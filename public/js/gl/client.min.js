World=function(){function e(){this.name="Cons"}return e}(),window.World.init=function(e,t){this.__vpx=0,this.auth_hash=e,this.login=t,this.p=new THREE.Projector,this.three_scenes={},this.scenes={},this.flares={},this.clock=new THREE.Clock;var i=new THREE.SphereGeometry(5);this.cur=new THREE.Mesh(i),this.vp_width=document.body.clientWidth,this.vp_height=400,this._main_viewport=0,this._additional_vps=[],this.sceneActions={},this._input_keymap={},this._uniform_updaters={};var n=dcodeIO.ProtoBuf;this.protobufBuilder=n.loadProtoFile("/js/gl/client_message.proto");var s=this.vp_height/3,o=this.vp_width/4,r=this.vp_width-o;this._additional_vps_geom=[{l:r,t:2*s,w:o,h:s},{l:r,t:s,w:o,h:s},{l:r,t:0,w:o,h:s}],this._main_vp_geom={l:0,t:0,w:this.vp_width,h:this.vp_height},this.skyboxScenes={},this.skyBoxes={},this.skyBoxCamera={},this.mouse_projection_vec=new THREE.Vector3,SL.init();var h=this;return h.pings=[],h.pings_instability=[],h._time_diffs=[],this.renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.setSize(this.vp_width,this.vp_height),this.renderer.setClearColor(new THREE.Color(0)),document.body.appendChild(this.renderer.domElement),this.renderer.gammaInput=!0,this.renderer.gammaOutput=!0,this.renderer.autoClear=!1,this.renderer.physicallyBasedShading=!0,this._camera_rot_q=new THREE.Quaternion,document.addEventListener("mousemove",function(e){h.mouse_x=e.x,h.mouse_y=e.y},!1),this.renderer.domElement.addEventListener("mouseup",function(){h.Inputs.input("lmouse",!1)}),this.renderer.domElement.addEventListener("mousedown",function(){h.Inputs.input("lmouse",!0)}),document.addEventListener("keydown",function(e){var t=e.keyCode;h.Inputs.input(t,!0)},!1),document.addEventListener("keyup",function(e){var t=e.keyCode;h.Inputs.input(t,!1)},!1),h.init_socket(),h},window.World.set_actions=function(){self.actions=self._default_actions};
window.World.render=function(e,t){this.redrawSun(e),this.renderer.setViewport(t.l,t.t,t.w,t.h),this.redrawSky(e),this.scenes[e.scene]._action_on_the_run_var&&console.log("render M"),this._cur_cam=e.three_camera,this.renderer.render(this.three_scenes[e.scene],e.three_camera)},window.World.redrawSky=function(e){var t=e.three_camera.parent.matrix.clone(),o=e.three_camera.matrix.clone();t.multiply(o);var n=(new THREE.Matrix4).extractRotation(t),r=(new THREE.Euler).setFromRotationMatrix(n);this.skyBoxCamera[e.scene].rotation.copy(r),this.renderer.render(this.skyboxScenes[e.scene],this.skyBoxCamera[e.scene])},window.World.get_main_viewport=function(){return this._viewports[this._main_viewport]},window.World._init_vps=function(){var e=this._viewports[this._main_viewport],t=this;e.geom={t:0,l:0,w:this.vp_width,h:this.vp_height},e.three_camera=this.makeCamera(e),_.each(e.UIS,function(e){e.construct()}),_.each(e.actors,function(e){var o=t.sceneActions[e.scene][e.control.object_guid][e.control.workpoint];_.each(o,function(e){e.default_key&&(t._input_keymap[e.default_key]=e)})}),this.three_scenes[e.scene].add(this.cur),this.initSpace(e);var t=this;t.Inputs=new Controller.LocalInputActor(t,t.socket),_.each(this._additional_vps,function(e,o){var n=t._viewports[e];n.geom=t._additional_vps_geom[o],n.three_camera=t.makeCamera(n),t.initSpace(n)})},window.World.setupCameras=function(){var e=this;e._viewports={},e._viewport_amount=0;var t=!0;_.each(e.actors,function(o){var n=o.control.workpoint,r=e.scenes[o.scene].get_objects()[o.control.object_guid].workpoints[n].views,i=e.scenes[o.scene].meshes[o.control.object_guid],s=i.getUIForWP(n);_.each(r,function(n){var r=o.scene+o.control.object_guid+n;if(t&&(e._main_viewport=r),r in e._viewports){e._viewports[r].actors.push(o);var i=e._viewports[r].UIS;e._viewports[r].UIS=i.concat(s)}else{var c={scene:o.scene,object:o.control.object_guid,camera:n,actors:[o],UIS:s};e._viewports[r]=c,e._viewport_amount+=1}})}),e._init_vps();var o=document.getElementById("viewports-select");o.innerHtml="",_.each(e._viewports,function(e,t){var n=document.createElement("option");n.value=t,n.appendChild(document.createTextNode(e.camera)),o.appendChild(n)})},window.World.redrawSun=function(e){var t=this.scenes[e.scene].meshes[e.object],o=(new THREE.Vector3).fromArray(this.scenes[e.scene]._scene.sunDirection).multiplyScalar(10);this.flares[e.scene].position=t.position.clone().add(o)},window.World.makeCamera=function(e){var t=this,o=e.scene,n=e.object,r=e.camera,i=t.scenes[o].meshes[n],s=t.scenes[o].get_objects()[n],c=new THREE.PerspectiveCamera(45,e.geom.w/e.geom.h,1,1e3),a=new THREE.Vector3,_=new THREE.Vector3;a.set.apply(a,s.cameras[r].position),_.set.apply(_,s.cameras[r].direction);var h=new THREE.Vector3(0,0,-1),d=new THREE.Vector3;d.crossVectors(h,_);var u=Math.acos(h.dot(_)/h.length()/_.length());return 0!==d.length()||h.equals(_)||(d=new THREE.Vector3(0,1,0),u=Math.PI),c.rotateOnAxis(d,u),c.position=a,i.add(c),c},window.World.setup_scene=function(e){material=new THREE.MeshBasicMaterial({color:16711680,wireframe:!0});var t=(new THREE.Vector3).fromArray(e._scene.sunDirection),o=new THREE.AmbientLight(65793);this.three_scenes[e.GUID].add(o);var n=new THREE.DirectionalLight(16777198,1);n.color.setHSL.apply(n.color,e._scene.sunLightColor),n.position=t,this.three_scenes[e.GUID].add(n),this.initSun(e),this.sceneActions[e.GUID]=e.getActions()},window.World.bindCamera=function(){var e=this,t=e.get_current_actor(),o=e.meshes()[t.control.object_guid];o.add(e.camera),e.setCamera()},window.World.go=function(){var e=this;e.setupCameras();var t=function(){_.each(e.scenes,function(e){e.tick()})},o=function(){if(e.total_objects_count===e.loaded_objects_count){t();var n=e.get_main_viewport(),r=e._main_vp_geom;_.each(e._uniform_updaters,function(e){e()}),e.render(n,r),_.each(n.UIS,function(e){e.refresh()}),e.mouse_projection_vec.set(e.mouse_x/r.w*2-1,2*-(e.mouse_y/r.h)+1,.99),e.p.unprojectVector(e.mouse_projection_vec,n.three_camera),e.cur.position.copy(e.mouse_projection_vec),_.each(e._additional_vps,function(t,o){var n=e._viewports[t];e.render(n,e._additional_vps_geom[o])})}SL.redraw(),requestAnimationFrame(o)};requestAnimationFrame(o)};
window.World.load_scene=function(e,n){var t=new Scene;t.set_from_json(e),this.scenes[t.GUID]=t,this.three_scenes[t.GUID]=new THREE.Scene,t.load(n,this.three_scenes[t.GUID],this)},window.World.initSun=function(e){var n=new THREE.Color(16777215),t=_.clone(e._scene.sunLightColor);t[2]+=.5,n.setHSL.apply(n,t);var i=THREE.ImageUtils.loadTexture("/textures/lensflare/lensflare0.png"),s=THREE.ImageUtils.loadTexture("/textures/lensflare/lensflare2.png"),d=THREE.ImageUtils.loadTexture("/textures/lensflare/lensflare3.png"),r=new THREE.LensFlare(i,700,0,THREE.AdditiveBlending,n);r.add(s,512,0,THREE.AdditiveBlending),r.add(s,512,0,THREE.AdditiveBlending),r.add(s,512,0,THREE.AdditiveBlending),r.add(d,60,.6,THREE.AdditiveBlending),r.add(d,70,.7,THREE.AdditiveBlending),r.add(d,120,.9,THREE.AdditiveBlending),r.add(d,70,1,THREE.AdditiveBlending);var o=function(e){var n,t,i=e.lensFlares.length,s=2*-e.positionScreen.x,d=2*-e.positionScreen.y;for(n=0;i>n;n++)t=e.lensFlares[n],t.x=e.positionScreen.x+s*t.distance,t.y=e.positionScreen.y+d*t.distance,t.rotation=0;e.lensFlares[2].y+=.025,e.lensFlares[3].rotation=.5*e.positionScreen.x+THREE.Math.degToRad(45)};r.customUpdateCallback=o,r.position=(new THREE.Vector3).fromArray(e._scene.sunDirection).multiplyScalar(500),this.three_scenes[e.GUID].add(r),this.flares[e.GUID]=r},window.World.initSpace=function(e){var n="/textures/space/m01_cube",t="png",i=[n+".px."+t,n+".nx."+t,n+".py."+t,n+".ny."+t,n+".pz."+t,n+".nz."+t],s=THREE.ImageUtils.loadTextureCube(i),d=THREE.ShaderLib.cube;d.uniforms.tCube.value=s;var r=new THREE.ShaderMaterial({fragmentShader:d.fragmentShader,vertexShader:d.vertexShader,uniforms:d.uniforms,depthWrite:!1,side:THREE.BackSide});this.skyboxScenes[e.scene]=new THREE.Scene;var o=new THREE.Mesh(new THREE.CubeGeometry(9e3,9e3,9e3),r);this.skyBoxes[e.scene]=o,this.skyBoxCamera[e.scene]=new THREE.PerspectiveCamera(45,e.geom.w/e.geom.h,1,1e4),this.skyboxScenes[e.scene].add(o)},window.World.make_main=function(){var e=document.getElementById("viewports-select");this._main_viewport=e.options[e.selectedIndex].value,this._init_vps()},window.World.add_icon=function(){var e=document.getElementById("viewports-select");add_vp=e.options[e.selectedIndex].value,3==this._additional_vps.length?this._additional_vps[2]==add_vp:this._additional_vps.push(add_vp),this._init_vps()},window.World.meshes=function(){return this.scene.meshes},window.World.controllable=function(){var e=this.get_main_viewport();return this.scenes[e.scene].meshes[e.object]},window.World.mesh_for=function(e){return this.meshes()[this.scene.actors[e].control.object_guid]},window.World.get_current_actor=function(){var e=this;return e.scene.actors[e.login]};
window.World.init_socket=function(){var e=window.location.origin,s=io.connect(e);this.socket=s;var t=this;this.socket.on("connected",function(){t.socket.emit("auth_hash",{auth:t.auth_hash})}),this.socket.on("server_fault",function(){}),this.socket.on("actors",function(e){var s=e.actors;t.actors=s,t.syncTime();var n=_.map(t.actors,function(e){return e.scene});t.socket.emit("request_scenes",{scenes:_.uniq(n)})}),this.socket.on("scenes",function(e){var s=_.keys(e.scenes),n=0,o=function(){t.go(),t.network_actor=new Controller.NetworkActor(function(){},t)},i=function(e){n+=1,t.setup_scene(e),_.each(t.actors,function(s){s.GUID in e.actors&&t.socket.emit("actor-joined",{a:s,s:e.GUID})}),n==s.length&&o()};_.each(e.scenes,function(e){t.load_scene(e,i)})}),this.socket.on("actor-joined",function(e){e.GUID in t.scenes[e.scene].actors||t.scenes[e.scene].join_actor(e)}),this.socket.on("scene_sync",function(e){void 0!==t.scenes[e.scene]&&t.scenes[e.scene].sync(e.almanach)}),this.socket.on("player-inputs",function(e){console.log("RR",e),t.scenes[e.s].addNetworkMessage(e.a)})},window.World.syncTime=function(){this._sync_timestamp=(new Date).getTime();{var e=this;this.protobufBuilder.build("Actions")}this.socket.emit("sync_request");var s=50;this._sync_message_setup||(this.socket.on("clock_response",function(t){var n=(new Date).getTime(),o=n-e._sync_timestamp;e.pings.push(o);var i=o/2,c=t.ts-e._sync_timestamp-i;e._time_diffs.push(c),e._time_diffs.length>s&&e._time_diffs.splice(0,1),e._time_diff=Math.floor(_.reduce(e._time_diffs,function(e,s){return e+s},0)/e._time_diffs.length),e.max_ping=_.max(e.pings),setTimeout(function(){e.syncTime()},1e3)}),this._sync_message_setup=!0)},window.World.sendAction=function(e,s){var t=_.clone(s);t.ts+=this._time_diff,t.p=JSON.stringify(t.p),console.log("act before sending",t.ident),delete t.vector,this.socket.emit("user_actions",{s:e,a:t})};
function StaticLogger(){this._vals={},this.setValue=function(t,i){this._vals[t]=i},this.init=function(){this.cont=$("<div>").css({position:"fixed",top:0,right:0,width:400,bottom:0,"background-color":"rgba(0,200,100,0.7)"}).appendTo("body")},this.redraw=function(){this.cont.find("*").remove();for(var t in this._vals)c=$("<div>").appendTo(this.cont),l=$("<span>").html(t+"&nbsp;: &nbsp;").css("font-weight","bold").appendTo(c),v=$("<span>").text(this._vals[t]).appendTo(c)}}var SL=new StaticLogger;
window.World.addUniformUpdater=function(d,o){this._uniform_updaters[d]=o},window.World.removeUniformUpdater=function(d){delete this._uniform_updaters[d]};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluaXRpYWxpemF0aW9uLmpzIiwicmVuZGVyLmpzIiwic2NlbmVfdXRpbHMuanMiLCJzb2NrZXRzLmpzIiwic3RhdGljTG9nZ2VyLmpzIiwidXRpbHMuanMiXSwibmFtZXMiOlsiV29ybGQiLCJDb25zIiwidGhpcyIsIm5hbWUiLCJ3aW5kb3ciLCJpbml0IiwiYXV0aF9oYXNoIiwiY2xpZW50X2xvZ2luIiwiX192cHgiLCJsb2dpbiIsInAiLCJUSFJFRSIsIlByb2plY3RvciIsInRocmVlX3NjZW5lcyIsInNjZW5lcyIsImZsYXJlcyIsImNsb2NrIiwiQ2xvY2siLCJzZyIsIlNwaGVyZUdlb21ldHJ5IiwiY3VyIiwiTWVzaCIsInZwX3dpZHRoIiwiZG9jdW1lbnQiLCJib2R5IiwiY2xpZW50V2lkdGgiLCJ2cF9oZWlnaHQiLCJfbWFpbl92aWV3cG9ydCIsIl9hZGRpdGlvbmFsX3ZwcyIsInNjZW5lQWN0aW9ucyIsIl9pbnB1dF9rZXltYXAiLCJfdW5pZm9ybV91cGRhdGVycyIsIlByb3RvQnVmIiwiZGNvZGVJTyIsInByb3RvYnVmQnVpbGRlciIsImxvYWRQcm90b0ZpbGUiLCJoMyIsInc0IiwidzM0IiwiX2FkZGl0aW9uYWxfdnBzX2dlb20iLCJsIiwidCIsInciLCJoIiwiX21haW5fdnBfZ2VvbSIsInNreWJveFNjZW5lcyIsInNreUJveGVzIiwic2t5Qm94Q2FtZXJhIiwibW91c2VfcHJvamVjdGlvbl92ZWMiLCJWZWN0b3IzIiwiU0wiLCJzZWxmIiwicGluZ3MiLCJwaW5nc19pbnN0YWJpbGl0eSIsIl90aW1lX2RpZmZzIiwicmVuZGVyZXIiLCJXZWJHTFJlbmRlcmVyIiwiYW50aWFsaWFzIiwiYWxwaGEiLCJzZXRTaXplIiwic2V0Q2xlYXJDb2xvciIsIkNvbG9yIiwiYXBwZW5kQ2hpbGQiLCJkb21FbGVtZW50IiwiZ2FtbWFJbnB1dCIsImdhbW1hT3V0cHV0IiwiYXV0b0NsZWFyIiwicGh5c2ljYWxseUJhc2VkU2hhZGluZyIsIl9jYW1lcmFfcm90X3EiLCJRdWF0ZXJuaW9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJtb3VzZV94IiwieCIsIm1vdXNlX3kiLCJ5IiwiSW5wdXRzIiwiaW5wdXQiLCJjb2RlIiwia2V5Q29kZSIsImluaXRfc29ja2V0Iiwic2V0X2FjdGlvbnMiLCJhY3Rpb25zIiwiX2RlZmF1bHRfYWN0aW9ucyIsInJlbmRlciIsInZwIiwiZ2VvbSIsInJlZHJhd1N1biIsInNldFZpZXdwb3J0IiwicmVkcmF3U2t5Iiwic2NlbmUiLCJfYWN0aW9uX29uX3RoZV9ydW5fdmFyIiwiY29uc29sZSIsImxvZyIsIl9jdXJfY2FtIiwidGhyZWVfY2FtZXJhIiwibXAiLCJwYXJlbnQiLCJtYXRyaXgiLCJjbG9uZSIsIm0iLCJtdWx0aXBseSIsIm1yIiwiTWF0cml4NCIsImV4dHJhY3RSb3RhdGlvbiIsInJvdCIsIkV1bGVyIiwic2V0RnJvbVJvdGF0aW9uTWF0cml4Iiwicm90YXRpb24iLCJjb3B5IiwiZ2V0X21haW5fdmlld3BvcnQiLCJfdmlld3BvcnRzIiwiX2luaXRfdnBzIiwibXZwIiwibWFrZUNhbWVyYSIsIl8iLCJlYWNoIiwiVUlTIiwidWkiLCJjb25zdHJ1Y3QiLCJhY3RvcnMiLCJhY3RvciIsInRvdGFsX2FjdGlvbnMiLCJjb250cm9sIiwib2JqZWN0X2d1aWQiLCJ3b3JrcG9pbnQiLCJhY3Rpb24iLCJkZWZhdWx0X2tleSIsImFkZCIsImluaXRTcGFjZSIsIkNvbnRyb2xsZXIiLCJMb2NhbElucHV0QWN0b3IiLCJzb2NrZXQiLCJ2cF9uYW1lIiwiaSIsInNldHVwQ2FtZXJhcyIsIl92aWV3cG9ydF9hbW91bnQiLCJpc19maXJzdCIsIndwIiwidmlld3MiLCJnZXRfb2JqZWN0cyIsIndvcmtwb2ludHMiLCJtZXNoIiwibWVzaGVzIiwidWlzIiwiZ2V0VUlGb3JXUCIsInZpZXciLCJ2cF9oYXNoIiwicHVzaCIsIlUiLCJjb25jYXQiLCJvYmplY3QiLCJjYW1lcmEiLCJzZWwiLCJnZXRFbGVtZW50QnlJZCIsImlubmVySHRtbCIsImsiLCJvcHQiLCJjcmVhdGVFbGVtZW50IiwidmFsdWUiLCJjcmVhdGVUZXh0Tm9kZSIsInNkIiwiZnJvbUFycmF5IiwiX3NjZW5lIiwic3VuRGlyZWN0aW9uIiwibXVsdGlwbHlTY2FsYXIiLCJwb3NpdGlvbiIsIm9iamVjdF9pZCIsInBvcnQiLCJQZXJzcGVjdGl2ZUNhbWVyYSIsInZwX3BvcyIsInZwX3JvdCIsInNldCIsImFwcGx5IiwiY2FtZXJhcyIsImRpcmVjdGlvbiIsImNhbV9iYXNlIiwiYXhpcyIsImNyb3NzVmVjdG9ycyIsImFnIiwiTWF0aCIsImFjb3MiLCJkb3QiLCJsZW5ndGgiLCJlcXVhbHMiLCJQSSIsInJvdGF0ZU9uQXhpcyIsInNldHVwX3NjZW5lIiwibWF0ZXJpYWwiLCJNZXNoQmFzaWNNYXRlcmlhbCIsImNvbG9yIiwid2lyZWZyYW1lIiwiYW1iaWVudExpZ2h0IiwiQW1iaWVudExpZ2h0IiwiR1VJRCIsImxpZ2h0IiwiRGlyZWN0aW9uYWxMaWdodCIsInNldEhTTCIsInN1bkxpZ2h0Q29sb3IiLCJpbml0U3VuIiwiZ2V0QWN0aW9ucyIsImJpbmRDYW1lcmEiLCJnZXRfY3VycmVudF9hY3RvciIsImNvbnRyb2xsYWJsZSIsInNldENhbWVyYSIsImdvIiwidXBkYXRlUG9zaXRpb25zIiwicyIsInRpY2siLCJhbmltYXRlIiwidG90YWxfb2JqZWN0c19jb3VudCIsImxvYWRlZF9vYmplY3RzX2NvdW50IiwiZiIsInJlZnJlc2giLCJ1bnByb2plY3RWZWN0b3IiLCJyZWRyYXciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJsb2FkX3NjZW5lIiwic2NlbmVfanMiLCJvbmxvYWQiLCJTY2VuZSIsInNldF9mcm9tX2pzb24iLCJsb2FkIiwiZmxhcmVDb2xvciIsInNsIiwidGV4dHVyZUZsYXJlMCIsIkltYWdlVXRpbHMiLCJsb2FkVGV4dHVyZSIsInRleHR1cmVGbGFyZTIiLCJ0ZXh0dXJlRmxhcmUzIiwibGVuc0ZsYXJlIiwiTGVuc0ZsYXJlIiwiQWRkaXRpdmVCbGVuZGluZyIsImxlbnNGbGFyZVVwZGF0ZUNhbGxiYWNrIiwiZmxhcmUiLCJmbCIsImxlbnNGbGFyZXMiLCJ2ZWNYIiwicG9zaXRpb25TY3JlZW4iLCJ2ZWNZIiwiZGlzdGFuY2UiLCJkZWdUb1JhZCIsImN1c3RvbVVwZGF0ZUNhbGxiYWNrIiwicGF0aCIsImZvcm1hdCIsInVybHMiLCJ0ZXh0dXJlQ3ViZSIsImxvYWRUZXh0dXJlQ3ViZSIsInNoYWRlciIsIlNoYWRlckxpYiIsInVuaWZvcm1zIiwiU2hhZGVyTWF0ZXJpYWwiLCJmcmFnbWVudFNoYWRlciIsInZlcnRleFNoYWRlciIsImRlcHRoV3JpdGUiLCJzaWRlIiwiQmFja1NpZGUiLCJDdWJlR2VvbWV0cnkiLCJtYWtlX21haW4iLCJvcHRpb25zIiwic2VsZWN0ZWRJbmRleCIsImFkZF9pY29uIiwiYWRkX3ZwIiwibWVzaF9mb3IiLCJvcmlnaW4iLCJsb2NhdGlvbiIsImlvIiwiY29ubmVjdCIsIm9uIiwiZW1pdCIsImF1dGgiLCJkYXRhIiwic3luY1RpbWUiLCJtYXAiLCJ1bmlxIiwiZ3VpZHMiLCJrZXlzIiwiX3RvdGFscyIsImFsbF9sb2FkZWQiLCJuZXR3b3JrX2FjdG9yIiwiTmV0d29ya0FjdG9yIiwiYSIsImpvaW5fYWN0b3IiLCJ1bmRlZmluZWQiLCJzeW5jIiwiYWxtYW5hY2giLCJhZGROZXR3b3JrTWVzc2FnZSIsIl9zeW5jX3RpbWVzdGFtcCIsIkRhdGUiLCJnZXRUaW1lIiwiYnVpbGQiLCJkaWZmX3N0YXRpc3RpY3NfbGVuZ3RoIiwiX3N5bmNfbWVzc2FnZV9zZXR1cCIsInJlY3ZfdHMiLCJwaW5nIiwibGF0IiwiX3RpbWVfZGlmZiIsInRzIiwic3BsaWNlIiwiZmxvb3IiLCJyZWR1Y2UiLCJiIiwibWF4X3BpbmciLCJtYXgiLCJzZXRUaW1lb3V0Iiwic2VuZEFjdGlvbiIsImFjdCIsIkpTT04iLCJzdHJpbmdpZnkiLCJpZGVudCIsInZlY3RvciIsIlN0YXRpY0xvZ2dlciIsIl92YWxzIiwic2V0VmFsdWUiLCJwYXJhbSIsInZhbCIsImNvbnQiLCIkIiwiY3NzIiwidG9wIiwicmlnaHQiLCJ3aWR0aCIsImJvdHRvbSIsImJhY2tncm91bmQtY29sb3IiLCJhcHBlbmRUbyIsImZpbmQiLCJyZW1vdmUiLCJjIiwiaHRtbCIsInYiLCJ0ZXh0IiwiYWRkVW5pZm9ybVVwZGF0ZXIiLCJ1cGRmdW5jIiwicmVtb3ZlVW5pZm9ybVVwZGF0ZXIiXSwibWFwcGluZ3MiOiJBQUFBQSxNQUFRLFdBQ1AsUUFBU0MsS0FDUkMsS0FBS0MsS0FBTyxPQUViLE1BQU9GLE1BSVJHLE9BQU9KLE1BQU1LLEtBQU8sU0FBU0MsRUFBV0MsR0FDdkNMLEtBQUtNLE1BQVEsRUFDYk4sS0FBS0ksVUFBWUEsRUFDakJKLEtBQUtPLE1BQVFGLEVBSWJMLEtBQUtRLEVBQUksR0FBSUMsT0FBTUMsVUFDbkJWLEtBQUtXLGdCQUNMWCxLQUFLWSxVQUNMWixLQUFLYSxVQUVMYixLQUFLYyxNQUFRLEdBQUlMLE9BQU1NLEtBRXZCLElBQUlDLEdBQUssR0FBSVAsT0FBTVEsZUFBZSxFQUVsQ2pCLE1BQUtrQixJQUFNLEdBQUlULE9BQU1VLEtBQUtILEdBQzFCaEIsS0FBS29CLFNBQVdDLFNBQVNDLEtBQUtDLFlBQzlCdkIsS0FBS3dCLFVBQVksSUFDakJ4QixLQUFLeUIsZUFBaUIsRUFDdEJ6QixLQUFLMEIsbUJBQ0wxQixLQUFLMkIsZ0JBQ0wzQixLQUFLNEIsaUJBQ0Y1QixLQUFLNkIsb0JBQ1IsSUFBSUMsR0FBV0MsUUFBUUQsUUFDdkI5QixNQUFLZ0MsZ0JBQWtCRixFQUFTRyxjQUFlLDhCQUUvQyxJQUFJQyxHQUFLbEMsS0FBS3dCLFVBQVUsRUFDcEJXLEVBQUtuQyxLQUFLb0IsU0FBUyxFQUNuQmdCLEVBQU1wQyxLQUFLb0IsU0FBVWUsQ0FDekJuQyxNQUFLcUMsdUJBQ0hDLEVBQUVGLEVBQUtHLEVBQUssRUFBSEwsRUFBTU0sRUFBRUwsRUFBSU0sRUFBRVAsSUFDdkJJLEVBQUVGLEVBQUtHLEVBQUVMLEVBQUlNLEVBQUVMLEVBQUlNLEVBQUVQLElBQ3JCSSxFQUFFRixFQUFLRyxF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LEdBQzNCa0YsUUFBUUMsSUFBSSxxQkFBc0JxTixFQUFJRyxhQUUvQkgsR0FBSUksT0FFWHBULEtBQUtrSSxPQUFPeUksS0FBSyxnQkFBaUI5RCxFQUFFckgsRUFBTStMLEVBQUV5QjtBQ3RLN0MsUUFBU0ssZ0JBQ1JyVCxLQUFLc1QsU0FDTHRULEtBQUt1VCxTQUFXLFNBQVNDLEVBQU9DLEdBRS9CelQsS0FBS3NULE1BQU1FLEdBQVNDLEdBRXJCelQsS0FBS0csS0FBTyxXQUNYSCxLQUFLMFQsS0FBT0MsRUFBRSxTQUFTQyxLQUN0QnhKLFNBQVcsUUFDWHlKLElBQU0sRUFDTkMsTUFBUSxFQUNSQyxNQUFRLElBQ1JDLE9BQVMsRUFDVEMsbUJBQW1CLHdCQUNqQkMsU0FBUyxTQUlibFUsS0FBS3FOLE9BQVMsV0FDYnJOLEtBQUswVCxLQUFLUyxLQUFLLEtBQUtDLFFBRXBCLEtBQUksR0FBSWhNLEtBQUtwSSxNQUFLc1QsTUFFakJlLEVBQUlWLEVBQUUsU0FBU08sU0FBU2xVLEtBQUswVCxNQUM3QnBSLEVBQUlxUixFQUFFLFVBQVVXLEtBQUtsTSxFQUFJLGtCQUFrQndMLElBQUksY0FBYyxRQUFRTSxTQUFTRyxHQUM5RUUsRUFBSVosRUFBRSxVQUFVYSxLQUFNeFUsS0FBS3NULE1BQU1sTCxJQUFLOEwsU0FBU0csSUFLbEQsR0FBSXJSLElBQUssR0FBSXFRO0FDOUJiblQsT0FBT0osTUFBTTJVLGtCQUFvQixTQUFTeFUsRUFBTXlVLEdBQzVDMVUsS0FBSzZCLGtCQUFrQjVCLEdBQVF5VSxHQUVuQ3hVLE9BQU9KLE1BQU02VSxxQkFBdUIsU0FBUzFVLFNBQ2xDRCxNQUFLNkIsa0JBQWtCNUIiLCJmaWxlIjoiY2xpZW50Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIldvcmxkID0gKGZ1bmN0aW9uKCl7XG5cdGZ1bmN0aW9uIENvbnMoKXtcblx0XHR0aGlzLm5hbWUgPSBcIkNvbnNcIjtcblx0fVxuXHRyZXR1cm4gQ29ucztcbn0pKClcblxuXG53aW5kb3cuV29ybGQuaW5pdCA9IGZ1bmN0aW9uKGF1dGhfaGFzaCwgY2xpZW50X2xvZ2luKXtcblx0dGhpcy5fX3ZweCA9IDA7XG5cdHRoaXMuYXV0aF9oYXNoID0gYXV0aF9oYXNoO1xuXHR0aGlzLmxvZ2luID0gY2xpZW50X2xvZ2luO1xuXHRcblx0Ly8gdGhpcy5jYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoNDUsIHdpbmRvdy5pbm5lcldpZHRoIC8gd2luZG93LmlubmVySGVpZ2h0LCAxLCAxMDAwMCk7XG5cdC8vIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnogPSAyNTA7XG5cdHRoaXMucCA9IG5ldyBUSFJFRS5Qcm9qZWN0b3IoKTtcblx0dGhpcy50aHJlZV9zY2VuZXMgPSB7fVxuXHR0aGlzLnNjZW5lcyA9IHt9O1xuXHR0aGlzLmZsYXJlcyA9IHt9XG5cdC8vICA9IG5ldyBUSFJFRS5TY2VuZSgpO1xuXHR0aGlzLmNsb2NrID0gbmV3IFRIUkVFLkNsb2NrKCk7XG5cdC8vdGhpcy5nZW9tZXRyeSA9IG5ldyBUSFJFRS5DdWJlR2VvbWV0cnkoMjAwLCAyMDAsIDIwMCk7XG5cdHZhciBzZyA9IG5ldyBUSFJFRS5TcGhlcmVHZW9tZXRyeSg1KTtcblx0Ly8gdmFyIHdpcmVzID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHt3aXJlZnJhbWU6dHJ1ZX0pXG5cdHRoaXMuY3VyID0gbmV3IFRIUkVFLk1lc2goc2cpIC8vICwgd2lyZXMpO1xuXHR0aGlzLnZwX3dpZHRoID0gZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDtcblx0dGhpcy52cF9oZWlnaHQgPSA0MDA7Ly9kb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodDtcblx0dGhpcy5fbWFpbl92aWV3cG9ydCA9IDBcblx0dGhpcy5fYWRkaXRpb25hbF92cHMgPSBbXTtcblx0dGhpcy5zY2VuZUFjdGlvbnMgPSB7fTtcblx0dGhpcy5faW5wdXRfa2V5bWFwID0ge307XG4gICAgdGhpcy5fdW5pZm9ybV91cGRhdGVycyA9IHt9O1xuXHR2YXIgUHJvdG9CdWYgPSBkY29kZUlPLlByb3RvQnVmO1xuXHR0aGlzLnByb3RvYnVmQnVpbGRlciA9IFByb3RvQnVmLmxvYWRQcm90b0ZpbGUoIFwiL2pzL2dsL2NsaWVudF9tZXNzYWdlLnByb3RvXCIgKTtcblx0Ly90aGlzLl9tYWluX3ZpZXdwb3J0X2FjdG9ycyA9IFtdO1xuXHR2YXIgaDMgPSB0aGlzLnZwX2hlaWdodC8zXG5cdHZhciB3NCA9IHRoaXMudnBfd2lkdGgvNFxuXHR2YXIgdzM0ID0gdGhpcy52cF93aWR0aC0gdzRcblx0dGhpcy5fYWRkaXRpb25hbF92cHNfZ2VvbSA9IFtcblx0XHR7bDp3MzQsIHQ6aDMqMiwgdzp3NCwgaDpoM30sXG5cdFx0e2w6dzM0LCB0OmgzLCB3Onc0LCBoOmgzfSxcblx0XHR7bDp3MzQsIHQ6MCwgdzp3NCwgaDpoM30sXG5cdFxuXHRdXG5cdHRoaXMuX21haW5fdnBfZ2VvbSA9IHtsOjAsIHQ6MCwgdzp0aGlzLnZwX3dpZHRoLCBoOnRoaXMudnBfaGVpZ2h0fTtcblx0XG5cdHRoaXMuc2t5Ym94U2NlbmVzID0ge307XG5cdHRoaXMuc2t5Qm94ZXMgPSB7fTsgLy9bc2NlbmUuZ3VpZF0gID0gbmV3IFRIUkVFLk1lc2goIG5ldyBUSFJFRS5DdWJlR2VvbWV0cnkoIDkwMDAsIDkwMDAsIDkwMDAgKSwgbWF0ZXJpYWwgKTtcblx0dGhpcy5za3lCb3hDYW1lcmEgPSB7fTsvL1tzY2VuZS5ndWlkXVxuXHR0aGlzLm1vdXNlX3Byb2plY3Rpb25fdmVjID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcblx0U0wuaW5pdCgpO1xuXHR2YXIgc2VsZiA9IHRoaXM7XG5cdHNlbGYucGluZ3MgPSBbXTtcblx0c2VsZi5waW5nc19pbnN0YWJpbGl0eSA9IFtdO1xuXHRzZWxmLl90aW1lX2RpZmZzID0gW107XG5cdFxuXG5cdFxuICAgIFxuXHR0aGlzLnJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoe2FudGlhbGlhczp0cnVlLCBhbHBoYTp0cnVlfSk7XG5cdHRoaXMucmVuZGVyZXIuc2V0U2l6ZSh0aGlzLnZwX3dpZHRoLCB0aGlzLnZwX2hlaWdodCk7XG5cdHRoaXMucmVuZGVyZXIuc2V0Q2xlYXJDb2xvcihuZXcgVEhSRUUuQ29sb3IoMHgwMDAwMDApKTtcblx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnQpO1xuXHRcblx0dGhpcy5yZW5kZXJlci5nYW1tYUlucHV0ID0gdHJ1ZTtcblx0dGhpcy5yZW5kZXJlci5nYW1tYU91dHB1dCA9IHRydWU7XG5cdHRoaXMucmVuZGVyZXIuYXV0b0NsZWFyID0gZmFsc2U7XG5cdHRoaXMucmVuZGVyZXIucGh5c2ljYWxseUJhc2VkU2hhZGluZyA9IHRydWU7XG5cdFxuXHR0aGlzLl9jYW1lcmFfcm90X3EgPSBuZXcgVEhSRUUuUXVhdGVybmlvbigpO1xuXHRcblx0XG5cdFxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCAnbW91c2Vtb3ZlJywgZnVuY3Rpb24oZSl7XG5cdFx0c2VsZi5tb3VzZV94ID0gZS54O1xuXHRcdHNlbGYubW91c2VfeSA9IGUueTtcblx0fSwgZmFsc2UgKTtcblx0dGhpcy5yZW5kZXJlci5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBmdW5jdGlvbihlKXtcblx0XHQvLyBjb25zb2xlLmxvZyhlKVxuXHRcdC8vIGNvbnNvbGUubG9nKFwiTU9VU0VcIik7XG5cdFx0c2VsZi5JbnB1dHMuaW5wdXQoICdsbW91c2UnLCBmYWxzZSlcblx0fSlcblx0XG5cdHRoaXMucmVuZGVyZXIuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBmdW5jdGlvbihlKXtcblx0XHQvLyBjb25zb2xlLmxvZyhlKVxuXHRcdHNlbGYuSW5wdXRzLmlucHV0KCAnbG1vdXNlJywgdHJ1ZSlcblx0fSlcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGUpe1xuXHRcdHZhciBjb2RlID0gZS5rZXlDb2RlO1xuXHRcdC8vIGNvbnNvbGUubG9nKGNvZGUpO1xuXHRcdHNlbGYuSW5wdXRzLmlucHV0KCBjb2RlLCB0cnVlKVxuXHRcdFxuXHRcdC8vaWYoY29kZSBpbiBzZWxmLmFjdGlvbnMpe1xuXHRcdC8vXHR2YXIgYWN0aW9uID0gc2VsZi5hY3Rpb25zW2NvZGVdXG5cdFx0Ly9cdENvbnRyb2xsZXJzQWN0aW9uTWFwW2FjdGlvbi50eXBlXS5hY3Qoc2VsZiwgYWN0aW9uLCB0cnVlKVxuXHRcdC8vfWVsc2V7XG5cdFx0XHQvL31cblx0XHRcblx0fSwgZmFsc2UpXG5cdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24oZSl7XG5cdFx0dmFyIGNvZGUgPSBlLmtleUNvZGU7XG5cdFx0c2VsZi5JbnB1dHMuaW5wdXQoY29kZSwgZmFsc2UpXG5cdFx0Ly9pZihjb2RlIGluIHNlbGYuYWN0aW9ucyl7XG5cdFx0Ly9cdHZhciBhY3Rpb24gPSBzZWxmLmFjdGlvbnNbY29kZV1cblx0XHQvL1x0Q29udHJvbGxlcnNBY3Rpb25NYXBbYWN0aW9uLnR5cGVdLmFjdChzZWxmLCBhY3Rpb24sIGZhbHNlKVxuXHRcdC8vfWVsc2V7XG5cdFx0XHQvL31cblx0XHRcblx0fSwgZmFsc2UpXG5cdHNlbGYuaW5pdF9zb2NrZXQoKVxuXHRyZXR1cm4gc2VsZjtcblx0XG59XG5cblxud2luZG93LldvcmxkLnNldF9hY3Rpb25zID0gZnVuY3Rpb24oKXtcblx0c2VsZi5hY3Rpb25zID0gc2VsZi5fZGVmYXVsdF9hY3Rpb25zXG59XG5cbi8vIG1vZHVsZS5leHBvcnRzLlcgPSB3aW5kb3c7Iiwid2luZG93LldvcmxkLnJlbmRlciA9IGZ1bmN0aW9uKHZwLGdlb20pe1xuXHR0aGlzLnJlZHJhd1N1bih2cClcblx0Ly8gY29uc29sZS5sb2codnApXG5cdHRoaXMucmVuZGVyZXIuc2V0Vmlld3BvcnQoZ2VvbS5sLCBnZW9tLnQsIGdlb20udywgZ2VvbS5oKVxuXHQvL2NvbnNvbGUubG9nKFwiQkxCTEJcIix0aGlzLnRocmVlX3NjZW5lcyx2cC5zY2VuZSk7XG5cdHRoaXMucmVkcmF3U2t5KHZwKVxuXHRpZih0aGlzLnNjZW5lc1t2cC5zY2VuZV0uX2FjdGlvbl9vbl90aGVfcnVuX3Zhcil7XG5cdFx0Y29uc29sZS5sb2coJ3JlbmRlciBNJyk7XG5cdH1cbiAgICB0aGlzLl9jdXJfY2FtID0gdnAudGhyZWVfY2FtZXJhO1xuXHR0aGlzLnJlbmRlcmVyLnJlbmRlciggdGhpcy50aHJlZV9zY2VuZXNbdnAuc2NlbmVdLCB2cC50aHJlZV9jYW1lcmEgKTtcblx0XG4gICAgLy9zZWxmLnJlbmRlcmVyLnJlbmRlcihzZWxmLnRocmVlX3NjZW5lLCBzZWxmLmNhbWVyYSk7XG5cdFxuXHRcbn1cblxud2luZG93LldvcmxkLnJlZHJhd1NreSA9IGZ1bmN0aW9uKHZwKXtcblx0Ly92YXIgbSA9IHRoaXMuc2NlbmVzW3ZwLnNjZW5lXS5tZXNoZXNbdnAub2JqZWN0XVxuXHRcblx0Ly8vLyB2YXIgQyA9IHRoaXMuc2NlbmUubWVzaF9mb3IodGhpcy5sb2dpbik7XG5cdC8vIHZhciByPSBtLnJvdGF0aW9uXG5cdHZhciBtcCA9IHZwLnRocmVlX2NhbWVyYS5wYXJlbnQubWF0cml4LmNsb25lKClcblx0dmFyIG0gPSB2cC50aHJlZV9jYW1lcmEubWF0cml4LmNsb25lKClcblx0bXAubXVsdGlwbHkobSlcblx0dmFyIG1yID0gbmV3IFRIUkVFLk1hdHJpeDQoKS5leHRyYWN0Um90YXRpb24obXApXG5cdHZhciByb3QgPSBuZXcgVEhSRUUuRXVsZXIoKS5zZXRGcm9tUm90YXRpb25NYXRyaXgobXIpXG5cdFxuXHQvLyBjb25zb2xlLmxvZyh2cC50aHJlZV9jYW1lcmEpXG5cdHRoaXMuc2t5Qm94Q2FtZXJhW3ZwLnNjZW5lXS5yb3RhdGlvbi5jb3B5KCByb3QgKTtcblxuXHQvL3RoaXMucmVuZGVyZXIuc2V0Vmlld3BvcnQodnAuZ2VvbS5sLCB2cC5nZW9tLnQsIHZwLmdlb20udywgdnAuZ2VvbS5oKTtcblx0dGhpcy5yZW5kZXJlci5yZW5kZXIoIHRoaXMuc2t5Ym94U2NlbmVzW3ZwLnNjZW5lXSwgdGhpcy5za3lCb3hDYW1lcmFbdnAuc2NlbmVdICk7XG5cdC8vIHJlbmRlcmVyLnJlbmRlciggc2NlbmUsIGNhbWVyYSApO1xuXHQvLyBjb25zb2xlLmxvZyh0aGlzLnNreUJveC5wb3NpdGlvbilcblx0XG59XG5cbndpbmRvdy5Xb3JsZC5nZXRfbWFpbl92aWV3cG9ydCA9IGZ1bmN0aW9uKCl7XG5cdC8vY29uc29sZS5sb2codGhpcy5fbWFpbl92aWV3cG9ydCk7XG5cdHJldHVybiB0aGlzLl92aWV3cG9ydHNbdGhpcy5fbWFpbl92aWV3cG9ydF07XG59XG53aW5kb3cuV29ybGQuX2luaXRfdnBzID0gZnVuY3Rpb24oKXtcblx0dmFyIG12cCA9IHRoaXMuX3ZpZXdwb3J0c1t0aGlzLl9tYWluX3ZpZXdwb3J0XTtcblx0dmFyIHNlbGYgPSB0aGlzO1xuXHQvLyBjb25zb2xlLmxvZyhtdnApO1xuXHRtdnAuZ2VvbSA9IHt0OjAsIGw6MCwgdzp0aGlzLnZwX3dpZHRoLCBoOnRoaXMudnBfaGVpZ2h0fTtcblx0bXZwLnRocmVlX2NhbWVyYSA9IHRoaXMubWFrZUNhbWVyYShtdnApXG5cdF8uZWFjaChtdnAuVUlTLCBmdW5jdGlvbih1aSl7XG5cdFx0dWkuY29uc3RydWN0KCk7XG5cdH0pXG5cdC8vIHRoaXMuXG5cdF8uZWFjaChtdnAuYWN0b3JzLCBmdW5jdGlvbihhY3Rvcil7XG5cdFx0Ly8gZ2V0IGFjdGlvbnMgZm9yIHRoaXMgYWN0b3Jcblx0XHQvLyBjb25zb2xlLmxvZyhzZWxmLnNjZW5lQWN0aW9ucyk7XG5cdFx0dmFyIHRvdGFsX2FjdGlvbnMgPSBzZWxmLnNjZW5lQWN0aW9uc1thY3Rvci5zY2VuZV1bYWN0b3IuY29udHJvbC5vYmplY3RfZ3VpZF1bYWN0b3IuY29udHJvbC53b3JrcG9pbnRdO1xuXHRcdF8uZWFjaCh0b3RhbF9hY3Rpb25zLCBmdW5jdGlvbihhY3Rpb24pe1xuXHRcdFx0aWYoYWN0aW9uLmRlZmF1bHRfa2V5KXtcblx0XHRcdFx0c2VsZi5faW5wdXRfa2V5bWFwW2FjdGlvbi5kZWZhdWx0X2tleV0gPSBhY3Rpb247XG5cdFx0XHR9XG5cdFx0fSlcblx0XHQvLyBjb25zb2xlLmxvZyh0b3RhbF9hY3Rpb25zKTtcblx0fSlcblx0XG5cdHRoaXMudGhyZWVfc2NlbmVzW212cC5zY2VuZV0uYWRkKHRoaXMuY3VyKTtcblx0dGhpcy5pbml0U3BhY2UobXZwKTtcblx0XG5cdFxuXHR2YXIgc2VsZiA9IHRoaXM7XG5cdHNlbGYuSW5wdXRzID0gbmV3IENvbnRyb2xsZXIuTG9jYWxJbnB1dEFjdG9yKHNlbGYsIHNlbGYuc29ja2V0KVxuXHQvLyBzZWxmLl9jb250cmFsbGFibGUgPSBzZWxmLmNvbnRyb2xsYWJsZSgpO1xuXHRcblx0Xy5lYWNoKHRoaXMuX2FkZGl0aW9uYWxfdnBzLCBmdW5jdGlvbih2cF9uYW1lLGkpe1xuXHRcdHZhciB2cCA9IHNlbGYuX3ZpZXdwb3J0c1t2cF9uYW1lXTtcblx0XHR2cC5nZW9tID0gc2VsZi5fYWRkaXRpb25hbF92cHNfZ2VvbVtpXVxuXHRcdHZwLnRocmVlX2NhbWVyYSA9IHNlbGYubWFrZUNhbWVyYSh2cClcblx0XHRzZWxmLmluaXRTcGFjZSh2cCk7XG5cdFx0XG5cdFx0XG5cdH0pXG5cdFxufVxuXG53aW5kb3cuV29ybGQuc2V0dXBDYW1lcmFzID0gZnVuY3Rpb24oKXtcblx0dmFyIHNlbGYgPSB0aGlzO1xuXHQvLyDQodC90LDRh9Cw0LvQsCDRgdC+0YHRgtCw0LLQuNC8INGB0L/QuNGB0L7QuiDRg9C90LjQutCw0LvRjNC90YvRhSDQstGM0Y7Qv9C+0YDRgtC+0LIgLSDRgdGG0LXQvdCwLdC+0LHRitC10LrRgi3QutCw0LzQtdGA0LBcblx0c2VsZi5fdmlld3BvcnRzID0ge31cblx0c2VsZi5fdmlld3BvcnRfYW1vdW50ID0gMDtcblx0dmFyIGlzX2ZpcnN0ID0gdHJ1ZTtcblx0Ly8gdmFyIGNtYXAgPSBDb250cm9sbGVyLkNvbnRyb2xsZXJzQWN0aW9uTWFwKCk7XG5cdFxuXHRfLmVhY2goc2VsZi5hY3RvcnMsIGZ1bmN0aW9uKGFjdG9yKXtcblx0XHQvL2NvbnNvbGUubG9nKGFjdG9yKVxuXHRcdHZhciB3cCA9IGFjdG9yLmNvbnRyb2wud29ya3BvaW50O1xuXG5cdFx0Ly8gdmFyIEMgPSBjbWFwW2FjdG9yLmNvbnRyb2wudHlwZV07XG5cdFx0XG5cdFx0Ly8gdmFyIFVJID0gQy5nZXRVSShzZWxmLCBhY3Rvcik7XG5cdFx0XG5cdFx0dmFyIHZpZXdzID0gc2VsZi5zY2VuZXNbYWN0b3Iuc2NlbmVdLmdldF9vYmplY3RzKClbYWN0b3IuY29udHJvbC5vYmplY3RfZ3VpZF0ud29ya3BvaW50c1t3cF0udmlld3Ncblx0XHR2YXIgbWVzaCA9IHNlbGYuc2NlbmVzW2FjdG9yLnNjZW5lXS5tZXNoZXNbYWN0b3IuY29udHJvbC5vYmplY3RfZ3VpZF07XG5cdFx0dmFyIHVpcyA9IG1lc2guZ2V0VUlGb3JXUCh3cCk7XG5cdFx0XG5cdFx0Xy5lYWNoKHZpZXdzLCBmdW5jdGlvbih2aWV3KXtcblx0XHRcdHZhciB2cF9oYXNoID0gYWN0b3Iuc2NlbmUgKyBhY3Rvci5jb250cm9sLm9iamVjdF9ndWlkICsgdmlldztcblx0XHRcdGlmIChpc19maXJzdCl7XG5cdFx0XHRcdHNlbGYuX21haW5fdmlld3BvcnQgPSB2cF9oYXNoO1xuXHRcdFx0fVxuXHRcdFx0Ly8gY29uc29sZS5sb2coXCIgc2hvdyBtZSBcIiwgYWN0b3IpO1xuXHRcdFx0aWYoISh2cF9oYXNoIGluIHNlbGYuX3ZpZXdwb3J0cykpe1xuXHRcdFx0XHR2YXIgdnAgPSB7c2NlbmU6YWN0b3Iuc2NlbmUsIG9iamVjdDphY3Rvci5jb250cm9sLm9iamVjdF9ndWlkLCBjYW1lcmE6IHZpZXcsIGFjdG9yczpbYWN0b3JdLCBVSVM6dWlzfVxuXHRcdFx0XHRzZWxmLl92aWV3cG9ydHNbdnBfaGFzaF0gPSB2cFxuXHRcdFx0XHRzZWxmLl92aWV3cG9ydF9hbW91bnQgKz0xO1xuXHRcdFx0fWVsc2V7XG5cdFx0XHRcdHNlbGYuX3ZpZXdwb3J0c1t2cF9oYXNoXS5hY3RvcnMucHVzaChhY3Rvcik7XG5cdFx0XHRcdHZhciBVID0gc2VsZi5fdmlld3BvcnRzW3ZwX2hhc2hdLlVJUztcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyggVSwgVS5jb25jYXQodWlzKSwgdWlzICkgO1xuXHRcdFx0XHRzZWxmLl92aWV3cG9ydHNbdnBfaGFzaF0uVUlTID0gVS5jb25jYXQodWlzKTtcblx0XHRcdFx0XG5cdFx0XHR9XG5cdFx0fSlcblx0fSlcblx0Ly8gc2VsZi5fbWFpbl92aWV3cG9ydCA9IDA7XG5cdC8vIGNvbnNvbGUubG9nKFwiVlBcIixzZWxmLl92aWV3cG9ydHNbc2VsZi5fbWFpbl92aWV3cG9ydF0pO1xuXHQvL3NlbGYuX3ZpZXdwb3J0c1tzZWxmLl9tYWluX3ZpZXdwb3J0XVxuXHRzZWxmLl9pbml0X3ZwcygpO1xuXHR2YXIgc2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXdwb3J0cy1zZWxlY3QnKTtcblx0c2VsLmlubmVySHRtbCA9IFwiXCI7XG5cdF8uZWFjaChzZWxmLl92aWV3cG9ydHMsIGZ1bmN0aW9uKHZwLGspe1xuXHRcdHZhciBvcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKVxuXHRcdG9wdC52YWx1ZSA9IGs7XG5cdFx0b3B0LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHZwLmNhbWVyYSkpXG5cdFx0c2VsLmFwcGVuZENoaWxkKG9wdClcblx0fSlcblx0XG5cdFxufVxuXG5cblxud2luZG93LldvcmxkLnJlZHJhd1N1biA9IGZ1bmN0aW9uKHZwKXtcblx0dmFyIG0gPSB0aGlzLnNjZW5lc1t2cC5zY2VuZV0ubWVzaGVzW3ZwLm9iamVjdF1cblx0XG5cdHZhciBzZCA9IG5ldyBUSFJFRS5WZWN0b3IzKCkuZnJvbUFycmF5KHRoaXMuc2NlbmVzW3ZwLnNjZW5lXS5fc2NlbmUuc3VuRGlyZWN0aW9uKS5tdWx0aXBseVNjYWxhcigxMCk7IFxuXHQvL2NvbnNvbGUubG9nKHNkLCB0aGlzLnNjZW5lc1t2cC5zY2VuZV0uX3NjZW5lLnN1bkRpcmVjdGlvbik7XG5cdFxuXHR0aGlzLmZsYXJlc1t2cC5zY2VuZV0ucG9zaXRpb24gPSBtLnBvc2l0aW9uLmNsb25lKCkuYWRkKHNkKVxuXHQvLyBjb25zb2xlLmxvZyh0aGlzLmZsYXJlc1t2cC5zY2VuZV0ucG9zaXRpb24pXG59XG5cbndpbmRvdy5Xb3JsZC5tYWtlQ2FtZXJhID0gZnVuY3Rpb24odnAgKXtcblx0dmFyIHNlbGYgPSB0aGlzO1xuXHQvL3ZhciBhY3RvciA9IHNlbGYuZ2V0X2N1cnJlbnRfYWN0b3IoKVxuXHRcblx0Ly8gY29uc29sZS5sb2coXCJTRVQgQ0FNRVJBXCIpO1xuXHQvLyB2YXIgY29udHJvbGxhYmxlID0gc2VsZi5jb250cm9sbGFibGUoKVxuXHQvLyB2YXIgd3AgIFx0XHQgPSBhY3Rvci5jb250cm9sLndvcmtwb2ludHNcblx0Ly8gdmFyIHZwICAgICAgICBcdCA9IGFjdG9yLmNvbnRyb2wudmlld3BvcnQ7XG5cdFxuXHR2YXIgc2NlbmUgPSB2cC5zY2VuZVxuXHR2YXIgb2JqZWN0X2lkID0gdnAub2JqZWN0XG5cdHZhciBwb3J0ID0gdnAuY2FtZXJhXG5cdHZhciBtZXNoID0gc2VsZi5zY2VuZXNbc2NlbmVdLm1lc2hlc1tvYmplY3RfaWRdXG5cdHZhciBvYmplY3QgPSBzZWxmLnNjZW5lc1tzY2VuZV0uZ2V0X29iamVjdHMoKVtvYmplY3RfaWRdXG5cdFxuXHR2YXIgY2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDQ1LCB2cC5nZW9tLncgLyB2cC5nZW9tLmgsIDEsIDEwMDApO1xuXHRcblx0dmFyIHZwX3BvcyAgICBcdCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG5cdHZhciB2cF9yb3QgIFx0ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcblx0Ly8gY29uc29sZS5sb2cob2JqZWN0LCBjYW1lcmEpO1xuXHR2cF9wb3Muc2V0LmFwcGx5KHZwX3Bvcywgb2JqZWN0LmNhbWVyYXNbcG9ydF0ucG9zaXRpb24pXG5cdHZwX3JvdC5zZXQuYXBwbHkodnBfcm90LCBvYmplY3QuY2FtZXJhc1twb3J0XS5kaXJlY3Rpb24pXG5cdFxuXHR2YXIgY2FtX2Jhc2UgPSBuZXcgVEhSRUUuVmVjdG9yMygwLDAsLTEpO1xuXHR2YXIgYXhpcyA9IG5ldyBUSFJFRS5WZWN0b3IzKClcblx0YXhpcy5jcm9zc1ZlY3RvcnMoY2FtX2Jhc2UsIHZwX3JvdClcblx0dmFyIGFnID0gTWF0aC5hY29zKGNhbV9iYXNlLmRvdCh2cF9yb3QpLyBjYW1fYmFzZS5sZW5ndGgoKSAvIHZwX3JvdC5sZW5ndGgoKSlcblx0IC8vY29uc29sZS5sb2coYXhpcy5sZW5ndGgoKSA9PT0gMCAmJiBjYW1fYmFzZS5lcXVhbHMoIHZwX3JvdCApIClcblx0aWYoYXhpcy5sZW5ndGgoKSA9PT0gMCAmJiAhY2FtX2Jhc2UuZXF1YWxzKCB2cF9yb3QgKSApe1xuXHRcdGF4aXMgPSBuZXcgVEhSRUUuVmVjdG9yMygwLDEsMClcblx0XHRhZyA9IE1hdGguUEk7XG5cdFx0XG5cdH1cblx0Ly9jb25zb2xlLmxvZyhheGlzLGFnLCB2cF9yb3QpO1xuXHQvL2NvbnNvbGUubG9nKHZwX3JvdClcblx0Y2FtZXJhLnJvdGF0ZU9uQXhpcyhheGlzLCBhZylcblx0XG5cdGNhbWVyYS5wb3NpdGlvbiA9IHZwX3BvczsgLy8gY29udHJvbGxhYmxlLnBvc2l0aW9uLmNsb25lKCkuYWRkKHZwX3Bvcylcblx0bWVzaC5hZGQoY2FtZXJhKVxuXHRyZXR1cm4gY2FtZXJhXG5cdFxuXHRcbn1cblxud2luZG93LldvcmxkLnNldHVwX3NjZW5lID0gZnVuY3Rpb24oc2NlbmUpe1xuXHRtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7XG5cdCAgIGNvbG9yOiAweGZmMDAwMCxcblx0ICAgd2lyZWZyYW1lOiB0cnVlXG5cdH0pO1xuXHQvLyBjb25zb2xlLmxvZyhzY2VuZS5fc2NlbmUpXG5cdFxuXHR2YXIgc3VuRGlyZWN0aW9uID0gbmV3IFRIUkVFLlZlY3RvcjMoKS5mcm9tQXJyYXkoc2NlbmUuX3NjZW5lLnN1bkRpcmVjdGlvbikgO1xuXHQvL3RoaXMuc3VuTGlnaHRDb2xvciA9IFswLjEsIDAuNywgMC41XTtcblx0XG5cdHZhciBhbWJpZW50TGlnaHQgPSBuZXcgVEhSRUUuQW1iaWVudExpZ2h0KDB4MDEwMTAxKTtcblx0dGhpcy50aHJlZV9zY2VuZXNbc2NlbmUuR1VJRF0uYWRkKGFtYmllbnRMaWdodCk7XG5cblx0dmFyIGxpZ2h0ID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoIDB4RkZGRmVlLCAxICk7XG5cdC8vIGNvbnNvbGUubG9nKFwiQ09MT1JcIixzY2VuZS5fc2NlbmUuc3VuTGlnaHRDb2xvcik7XG5cdGxpZ2h0LmNvbG9yLnNldEhTTC5hcHBseShsaWdodC5jb2xvciwgc2NlbmUuX3NjZW5lLnN1bkxpZ2h0Q29sb3IpO1xuXHRsaWdodC5wb3NpdGlvbiA9IHN1bkRpcmVjdGlvblxuXG5cdHRoaXMudGhyZWVfc2NlbmVzW3NjZW5lLkdVSURdLmFkZCggbGlnaHQgKTtcblx0dGhpcy5pbml0U3VuKHNjZW5lKVxuXHRcblx0dGhpcy5zY2VuZUFjdGlvbnNbc2NlbmUuR1VJRF0gPSBzY2VuZS5nZXRBY3Rpb25zKCk7IC8vINCX0LTQtdGB0Ywg0LHRg9C00YPRgiDQstGB0LUg0LDQutGG0LjQuCDQv9C+INCy0YHQtdC8INGB0YbQtdC90LDQvFxuXHQvLyDQk9C00LUt0YLQviDQt9C00LXRgdGMINC80L7QttC90L4g0L/RgNC40LLRj9C30LDRgtGMINC60L7QvdGC0YDQvtC70LvRi1xuXHRcbn1cblxuXG53aW5kb3cuV29ybGQuYmluZENhbWVyYSA9IGZ1bmN0aW9uKCl7XG5cdFxuXHR2YXIgc2VsZiA9IHRoaXM7XG5cdC8vIGNvbnNvbGUubG9nKHNlbGYuYWN0b3JzKTtcblx0dmFyIGFjdG9yIFx0XHQgPSBzZWxmLmdldF9jdXJyZW50X2FjdG9yKCk7XG5cdC8vY29uc29sZS5sb2coYWN0b3IuY29udHJvbCk7XG5cdHZhciBjb250cm9sbGFibGUgPSBzZWxmLm1lc2hlcygpWyBhY3Rvci5jb250cm9sLm9iamVjdF9ndWlkIF07XG5cdGNvbnRyb2xsYWJsZS5hZGQoIHNlbGYuY2FtZXJhIClcblx0c2VsZi5zZXRDYW1lcmEoKTtcblx0XG59XG5cblxud2luZG93LldvcmxkLmdvID0gZnVuY3Rpb24oKXtcblx0dmFyIHNlbGYgPSB0aGlzO1xuXHR2YXIgbGFzdF90aW1lc3RhbXAgPSBmYWxzZTtcblx0dmFyIGZpcnN0X2xvb3AgPSB0cnVlO1xuXHR2YXIgdGltZV9pbmMgPSAwXG5cdC8vIHNlbGYubW91c2VfcHJvamVjdGlvbl92ZWMgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuXHQvLyB2YXIgXzNkX3NjZW5lID0gc2VsZi5zZXR1cF9zY2VuZShzZWxmLnNjZW5lLl8zc2NlbmUpXG5cdHZhciBfZCA9IGZhbHNlXG5cdHNlbGYuc2V0dXBDYW1lcmFzKCk7XG5cdFxuXHRcblx0XG5cdC8vIHZhciBfdGltZV9pbnRlcnYgPSBcblx0XG5cdHZhciB1cGRhdGVQb3NpdGlvbnMgPSBmdW5jdGlvbigpe1xuXHRcdF8uZWFjaChzZWxmLnNjZW5lcywgZnVuY3Rpb24ocywgZyl7XG5cdFx0XHQvL2NvbnNvbGUubG9nKFwicmVjb3VudCBcIixnKTtcblx0XHRcdHMudGljaygpXG5cdFx0XHQvL2NvbnNvbGUubG9nKFwiaXMgbWFkZSBzeW5jeVwiKTsgXG5cdFx0fSlcblx0fVxuXHRcblx0XG4gICAgdmFyIGFuaW1hdGUgPSBmdW5jdGlvbigpe1xuXHRcdGlmIChzZWxmLnRvdGFsX29iamVjdHNfY291bnQgPT09IHNlbGYubG9hZGVkX29iamVjdHNfY291bnQpe1xuXHRcdFx0dXBkYXRlUG9zaXRpb25zKCk7XG5cdFx0XHQvL2NvbnNvbGUubG9nKHNlbGYuX3ZpZXdwb3J0cylcblx0XHRcdHZhciBtdnAgPSBzZWxmLmdldF9tYWluX3ZpZXdwb3J0KCk7XG5cdFx0XHR2YXIgZ2VvbSA9IHNlbGYuX21haW5fdnBfZ2VvbVxuXHRcdFx0Ly8gY29uc29sZS5sb2coXCJSRU5ERVJcIik7XG4gICAgICAgICAgICAvLyBCZWZvcmUgcmVuZGVyaW5nIGxldCdzIHVwZGF0ZSBvdXIgdW5pZm9ybXM7XG4gICAgICAgICAgICBfLmVhY2goc2VsZi5fdW5pZm9ybV91cGRhdGVycywgZnVuY3Rpb24oZiwgbmFtZSl7XG4gICAgICAgICAgICAgICAgZigpO1xuICAgICAgICAgICAgfSlcblx0XHRcdHNlbGYucmVuZGVyKG12cCwgZ2VvbSk7XG5cdFx0XHRfLmVhY2gobXZwLlVJUywgZnVuY3Rpb24odWkpe1xuXHRcdFx0XHR1aS5yZWZyZXNoKCk7XG5cdFx0XHR9KVxuXHRcdFx0c2VsZi5tb3VzZV9wcm9qZWN0aW9uX3ZlYy5zZXQoICggc2VsZi5tb3VzZV94LyBnZW9tLncgKSAqIDIgLSAxLCAtICggc2VsZi5tb3VzZV95IC8gZ2VvbS5oICkgKiAyICsgMSwgMC45OSApO1xuXHRcdFxuXHRcdCAgICBzZWxmLnAudW5wcm9qZWN0VmVjdG9yKCBzZWxmLm1vdXNlX3Byb2plY3Rpb25fdmVjLCBtdnAudGhyZWVfY2FtZXJhICk7XG5cdFx0XHRcblx0XHQgICAgc2VsZi5jdXIucG9zaXRpb24uY29weSggc2VsZi5tb3VzZV9wcm9qZWN0aW9uX3ZlYyApO1xuXHRcdFx0Ly9jb25zb2xlLmxvZyhzZWxmLm1vdXNlX3Byb2plY3Rpb25fdmVjKTtcblx0XHRcdFxuXHRcdFx0XG5cdFx0XHRfLmVhY2goc2VsZi5fYWRkaXRpb25hbF92cHMsIGZ1bmN0aW9uKHZwX25hbWUsIGkpe1xuXHRcdFx0XHR2YXIgdnAgPSBzZWxmLl92aWV3cG9ydHNbdnBfbmFtZV07XG5cdFx0XHRcdHNlbGYucmVuZGVyKHZwLCBzZWxmLl9hZGRpdGlvbmFsX3Zwc19nZW9tW2ldKVxuXHRcdFx0fSlcblx0XHR9XG5cdFx0U0wucmVkcmF3KCk7XG4gICAgXG5cdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpXG4gICAgXHRcbiAgICB9XG5cdHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTtcblx0XG59IiwiXG53aW5kb3cuV29ybGQubG9hZF9zY2VuZSA9IGZ1bmN0aW9uIChzY2VuZV9qcywgb25sb2FkKXtcblx0Ly8gY29uc29sZS5sb2coJ3dlbGwtd2VsbCcsIHNjZW5lLl9zY2VuZSk7XG5cdFxuXHQvLyB0aGlzLnNjZW5lcyA9IHt9XG5cdFxuXHR2YXIgc2NlbmUgPSBuZXcgU2NlbmUoKVxuXHRcblx0c2NlbmUuc2V0X2Zyb21fanNvbihzY2VuZV9qcylcblx0XG5cdFxuXHR0aGlzLnNjZW5lc1tzY2VuZS5HVUlEXSA9IHNjZW5lO1xuXHR0aGlzLnRocmVlX3NjZW5lc1tzY2VuZS5HVUlEXSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xuXHQvLyBjb25zb2xlLmxvZyhcIldXV1wiLCBvbmxvYWQpO1xuXHRzY2VuZS5sb2FkKG9ubG9hZCwgdGhpcy50aHJlZV9zY2VuZXNbc2NlbmUuR1VJRF0sIHRoaXMgKVxuXHRcblx0Ly8gXG5cdC8vY29uc29sZS5sb2coXCJsb2FkaW5nIHRoaXMgc2NlbmVcIiwgc2NlbmUuR1VJRCk7XG5cbn1cblxud2luZG93LldvcmxkLmluaXRTdW4gPSBmdW5jdGlvbihzY2VuZSl7XG5cdFxuXHR2YXIgZmxhcmVDb2xvciA9IG5ldyBUSFJFRS5Db2xvciggMHhmZmZmZmYgKTtcblx0dmFyIHNsID0gXy5jbG9uZShzY2VuZS5fc2NlbmUuc3VuTGlnaHRDb2xvcik7XG5cdHNsWzJdICs9IDAuNVxuXHRmbGFyZUNvbG9yLnNldEhTTC5hcHBseShmbGFyZUNvbG9yLCBzbCk7XG5cdFxuXHR2YXIgdGV4dHVyZUZsYXJlMCA9IFRIUkVFLkltYWdlVXRpbHMubG9hZFRleHR1cmUoIFwiL3RleHR1cmVzL2xlbnNmbGFyZS9sZW5zZmxhcmUwLnBuZ1wiICk7XG5cdHZhciB0ZXh0dXJlRmxhcmUyID0gVEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZSggXCIvdGV4dHVyZXMvbGVuc2ZsYXJlL2xlbnNmbGFyZTIucG5nXCIgKTtcblx0dmFyIHRleHR1cmVGbGFyZTMgPSBUSFJFRS5JbWFnZVV0aWxzLmxvYWRUZXh0dXJlKCBcIi90ZXh0dXJlcy9sZW5zZmxhcmUvbGVuc2ZsYXJlMy5wbmdcIiApO1xuXHRcblx0dmFyIGxlbnNGbGFyZSA9IG5ldyBUSFJFRS5MZW5zRmxhcmUoIHRleHR1cmVGbGFyZTAsIDcwMCwgMC4wLCBUSFJFRS5BZGRpdGl2ZUJsZW5kaW5nLCBmbGFyZUNvbG9yICk7XG5cblx0bGVuc0ZsYXJlLmFkZCggdGV4dHVyZUZsYXJlMiwgNTEyLCAwLjAsIFRIUkVFLkFkZGl0aXZlQmxlbmRpbmcgKTtcblx0bGVuc0ZsYXJlLmFkZCggdGV4dHVyZUZsYXJlMiwgNTEyLCAwLjAsIFRIUkVFLkFkZGl0aXZlQmxlbmRpbmcgKTtcblx0bGVuc0ZsYXJlLmFkZCggdGV4dHVyZUZsYXJlMiwgNTEyLCAwLjAsIFRIUkVFLkFkZGl0aXZlQmxlbmRpbmcgKTtcblxuXHRsZW5zRmxhcmUuYWRkKCB0ZXh0dXJlRmxhcmUzLCA2MCwgMC42LCBUSFJFRS5BZGRpdGl2ZUJsZW5kaW5nICk7XG5cdGxlbnNGbGFyZS5hZGQoIHRleHR1cmVGbGFyZTMsIDcwLCAwLjcsIFRIUkVFLkFkZGl0aXZlQmxlbmRpbmcgKTtcblx0bGVuc0ZsYXJlLmFkZCggdGV4dHVyZUZsYXJlMywgMTIwLCAwLjksIFRIUkVFLkFkZGl0aXZlQmxlbmRpbmcgKTtcblx0bGVuc0ZsYXJlLmFkZCggdGV4dHVyZUZsYXJlMywgNzAsIDEuMCwgVEhSRUUuQWRkaXRpdmVCbGVuZGluZyApO1xuXHR2YXIgbGVuc0ZsYXJlVXBkYXRlQ2FsbGJhY2sgPSBmdW5jdGlvbiAoIG9iamVjdCApIHtcblxuXHRcdHZhciBmLCBmbCA9IG9iamVjdC5sZW5zRmxhcmVzLmxlbmd0aDtcblx0XHR2YXIgZmxhcmU7XG5cdFx0dmFyIHZlY1ggPSAtb2JqZWN0LnBvc2l0aW9uU2NyZWVuLnggKiAyO1xuXHRcdHZhciB2ZWNZID0gLW9iamVjdC5wb3NpdGlvblNjcmVlbi55ICogMjtcblxuXG5cdFx0Zm9yKCBmID0gMDsgZiA8IGZsOyBmKysgKSB7XG5cblx0XHRcdCAgIGZsYXJlID0gb2JqZWN0LmxlbnNGbGFyZXNbIGYgXTtcblxuXHRcdFx0ICAgZmxhcmUueCA9IG9iamVjdC5wb3NpdGlvblNjcmVlbi54ICsgdmVjWCAqIGZsYXJlLmRpc3RhbmNlO1xuXHRcdFx0ICAgZmxhcmUueSA9IG9iamVjdC5wb3NpdGlvblNjcmVlbi55ICsgdmVjWSAqIGZsYXJlLmRpc3RhbmNlO1xuXG5cdFx0XHQgICBmbGFyZS5yb3RhdGlvbiA9IDA7XG5cblx0XHR9XG5cblx0XHRvYmplY3QubGVuc0ZsYXJlc1sgMiBdLnkgKz0gMC4wMjU7XG5cdFx0b2JqZWN0LmxlbnNGbGFyZXNbIDMgXS5yb3RhdGlvbiA9IG9iamVjdC5wb3NpdGlvblNjcmVlbi54ICogMC41ICsgVEhSRUUuTWF0aC5kZWdUb1JhZCggNDUgKTtcblxuXHR9XG5cdGxlbnNGbGFyZS5jdXN0b21VcGRhdGVDYWxsYmFjayA9IGxlbnNGbGFyZVVwZGF0ZUNhbGxiYWNrO1xuXHRsZW5zRmxhcmUucG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpLmZyb21BcnJheShzY2VuZS5fc2NlbmUuc3VuRGlyZWN0aW9uKS5tdWx0aXBseVNjYWxhcig1MDApXG5cdFxuXHRcblx0Ly8gdGhpcy5zdW5CaWxsYm9hcmQgPSBuZXcgVEhSRUUuU3ByaXRlKHRleHR1cmVGbGFyZTAgKVxuXHR0aGlzLnRocmVlX3NjZW5lc1tzY2VuZS5HVUlEXS5hZGQobGVuc0ZsYXJlKVxuXHR0aGlzLmZsYXJlc1tzY2VuZS5HVUlEXSA9IGxlbnNGbGFyZTtcbn1cbndpbmRvdy5Xb3JsZC5pbml0U3BhY2UgID0gZnVuY3Rpb24odnApe1xuXG5cdHZhciBwYXRoID0gXCIvdGV4dHVyZXMvc3BhY2UvbTAxX2N1YmVcIjtcblx0dmFyIGZvcm1hdCA9ICdwbmcnO1xuXHR2YXIgdXJscyA9IFtcblx0XHRwYXRoICsgJy5weC4nICsgZm9ybWF0LCBwYXRoICsgJy5ueC4nICsgZm9ybWF0LFxuXHRcdHBhdGggKyAnLnB5LicgKyBmb3JtYXQsIHBhdGggKyAnLm55LicgKyBmb3JtYXQsXG5cdFx0cGF0aCArICcucHouJyArIGZvcm1hdCwgcGF0aCArICcubnouJyArIGZvcm1hdFxuXHRdO1xuXG5cdHZhciB0ZXh0dXJlQ3ViZSA9IFRIUkVFLkltYWdlVXRpbHMubG9hZFRleHR1cmVDdWJlKCB1cmxzICk7XG5cdHZhciBzaGFkZXIgPSBUSFJFRS5TaGFkZXJMaWJbIFwiY3ViZVwiIF07XG5cdHNoYWRlci51bmlmb3Jtc1sgXCJ0Q3ViZVwiIF0udmFsdWUgPSB0ZXh0dXJlQ3ViZTtcblxuXHR2YXIgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuU2hhZGVyTWF0ZXJpYWwoIHtcblxuXHRcdGZyYWdtZW50U2hhZGVyOiBzaGFkZXIuZnJhZ21lbnRTaGFkZXIsXG5cdFx0dmVydGV4U2hhZGVyOiBzaGFkZXIudmVydGV4U2hhZGVyLFxuXHRcdHVuaWZvcm1zOiBzaGFkZXIudW5pZm9ybXMsXG5cdFx0ZGVwdGhXcml0ZTogZmFsc2UsXG5cdFx0c2lkZTogVEhSRUUuQmFja1NpZGVcblxuXHR9ICk7XG5cdHRoaXMuc2t5Ym94U2NlbmVzW3ZwLnNjZW5lXSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xuXHR2YXIgbSA9IG5ldyBUSFJFRS5NZXNoKCBuZXcgVEhSRUUuQ3ViZUdlb21ldHJ5KCA5MDAwLCA5MDAwLCA5MDAwICksIG1hdGVyaWFsICk7XG5cdHRoaXMuc2t5Qm94ZXNbdnAuc2NlbmVdICAgPSBtXG5cdFxuXHR0aGlzLnNreUJveENhbWVyYVt2cC5zY2VuZV0gPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoNDUsIHZwLmdlb20udyAvIHZwLmdlb20uaCwgMSwgMTAwMDApO1xuXHR0aGlzLnNreWJveFNjZW5lc1t2cC5zY2VuZV0uYWRkKG0pO1xufVxuXG5cbi8vIFZpZXBvcnQgZnVuY3Rpb25zXG53aW5kb3cuV29ybGQubWFrZV9tYWluID0gZnVuY3Rpb24oc2NlbmUpe1xuXHR2YXIgc2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXdwb3J0cy1zZWxlY3QnKTtcblx0dGhpcy5fbWFpbl92aWV3cG9ydCA9IHNlbC5vcHRpb25zW3NlbC5zZWxlY3RlZEluZGV4XS52YWx1ZTtcblx0dGhpcy5faW5pdF92cHMoKVxufVxud2luZG93LldvcmxkLmFkZF9pY29uID0gZnVuY3Rpb24oc2NlbmUpe1xuXHR2YXIgc2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXdwb3J0cy1zZWxlY3QnKTtcblx0YWRkX3ZwID0gc2VsLm9wdGlvbnNbc2VsLnNlbGVjdGVkSW5kZXhdLnZhbHVlO1xuXHRpZih0aGlzLl9hZGRpdGlvbmFsX3Zwcy5sZW5ndGggPT0gMyl7XG5cdFx0dGhpcy5fYWRkaXRpb25hbF92cHNbMl0gPT0gYWRkX3ZwO1xuXHRcdFxuXHR9ZWxzZXtcblx0XHR0aGlzLl9hZGRpdGlvbmFsX3Zwcy5wdXNoKGFkZF92cCk7XG5cdH1cblx0dGhpcy5faW5pdF92cHMoKVxuXHRcblx0XG59XG5cbndpbmRvdy5Xb3JsZC5tZXNoZXMgPSBmdW5jdGlvbigpe1xuXHRyZXR1cm4gdGhpcy5zY2VuZS5tZXNoZXNcbn1cblxuXG53aW5kb3cuV29ybGQuY29udHJvbGxhYmxlID0gZnVuY3Rpb24oKXtcblx0dmFyIG12cCA9IHRoaXMuZ2V0X21haW5fdmlld3BvcnQoKTtcblx0Ly8gY29uc29sZS5sb2coXCJNTU1cIiwgbXZwKVxuXHRyZXR1cm4gdGhpcy5zY2VuZXNbbXZwLnNjZW5lXS5tZXNoZXNbbXZwLm9iamVjdF1cbn1cbndpbmRvdy5Xb3JsZC5tZXNoX2ZvciA9IGZ1bmN0aW9uKGFjdG9yKXtcblx0Ly9jb25zb2xlLmxvZyhcIj4+PlwiLHRoaXMubWVzaGVzKClbdGhpcy5zY2VuZS5hY3RvcnNbYWN0b3JdLmNvbnRyb2wub2JqZWN0X2d1aWRdKTtcblx0cmV0dXJuIHRoaXMubWVzaGVzKClbdGhpcy5zY2VuZS5hY3RvcnNbYWN0b3JdLmNvbnRyb2wub2JqZWN0X2d1aWRdXG59XG5cblxud2luZG93LldvcmxkLmdldF9jdXJyZW50X2FjdG9yID0gZnVuY3Rpb24oKXtcblx0dmFyIHNlbGYgPSB0aGlzO1xuXHRyZXR1cm4gc2VsZi5zY2VuZS5hY3RvcnNbc2VsZi5sb2dpbl1cbn0iLCJ3aW5kb3cuV29ybGQuaW5pdF9zb2NrZXQgPSBmdW5jdGlvbigpe1xuXHQvLyBjb25zb2xlLmxvZyhcImluaXQgc29ja2V0XCIpO1xuXHR2YXIgb3JpZ2luID0gd2luZG93LmxvY2F0aW9uLm9yaWdpblxuXHQvL2NvbnNvbGUubG9nKFwiV2hhdCBpZiBJIHRyeSB0byBkbyBpdCB0d2ljZVwiKTtcblx0dmFyIHNvY2tldCA9IGlvLmNvbm5lY3Qob3JpZ2luKTtcblx0dGhpcy5zb2NrZXQgPSBzb2NrZXQ7XG5cdHZhciBzZWxmID0gdGhpcztcblx0dGhpcy5zb2NrZXQub24oJ2Nvbm5lY3RlZCcsIGZ1bmN0aW9uKGQpe1xuXHRcdC8vY29uc29sZS5sb2coXCI+PlwiKVxuXHRcdFxuXHRcdHNlbGYuc29ja2V0LmVtaXQoXCJhdXRoX2hhc2hcIiwge2F1dGg6c2VsZi5hdXRoX2hhc2h9KVxuXHRcdFxuXHRcdC8vIFxuXHRcdFxuXHRcdFxuXHR9KVxuXHR0aGlzLnNvY2tldC5vbignc2VydmVyX2ZhdWx0JywgZnVuY3Rpb24oKXtcblx0XHQvLyB3aW5kb3cubG9jYXRpb24gPSBcIi9jb25zb2xlL1wiXG5cdFx0Ly8gY29uc29sZS5sb2coXCJBQUFcIik7XG5cdH0pXG5cdHRoaXMuc29ja2V0Lm9uKCdhY3RvcnMnLCBmdW5jdGlvbihkYXRhKXtcblx0XHQvLyDQl9C00LXRgdGMINC80Ysg0L/QvtC70YPRh9Cw0LXQvCDQstGB0LXRhSDQsNC60YLQvtGA0L7Qsiwg0LrQvtGC0L7RgNGL0LUg0L/RgNC40YHRg9GJ0Lgg0LTQu9GPINGN0YLQvtCz0L4g0LvQvtCz0LjQvdCwIC0g0LjRhSDQvNC+0LbQtdGCINC+0LrQsNC30LDRgtGM0YHRjyDQvdC10YHQutC+0LvRjNC60L4g0Lgg0LTQu9GPINC90LjRhSDQvNC+0LPRg9GCINCx0YvRgtGMINGA0LDQt9C90YvQtSDRgdGG0LXQvdGLXG5cdFx0dmFyIGFjdG9ycyA9IGRhdGEuYWN0b3JzO1xuXHRcdHNlbGYuYWN0b3JzID0gYWN0b3JzIC8vINCX0LTQtdGB0Ywg0YHQv9C40YHQvtC6INCy0YHQtdGFINCw0LrRgtC+0YDQvtCyLCDQutC+0YLQvtGA0YvQtSDRgtCw0Log0LjQu9C4INC40L3QsNGH0LUg0YHQstGP0LfQsNC90Ysg0YEg0L3QsNGI0LjQvCDQu9C+0LPQuNC90L7QvFxuXHRcdC8vY29uc29sZS5sb2coJ2FjdG9ycycsIGFjdG9ycyk7XG5cdFx0c2VsZi5zeW5jVGltZSgpXG5cdFx0XG5cdFx0dmFyIHNjZW5lcyA9IF8ubWFwKHNlbGYuYWN0b3JzLCBmdW5jdGlvbihhY3Rvcil7XG5cdFx0XHRyZXR1cm4gYWN0b3Iuc2NlbmVcblx0XHRcdFxuXHRcdH0pXG5cdFx0Ly8g0JfQsNC/0YDQsNGI0LjQstCw0LXQvCDQt9Cw0LPRgNGD0LfQutGDINCy0YHQtdGFINGB0YbQtdC9INC00LvRjyDRjdGC0L7Qs9C+INCw0LrRgtC+0YDQsCAtINC/0L4g0LjQtNC10L3RgtC40YTQuNC60LDRgtC+0YDQsNC8INGB0YbQtdC9XG5cdFx0XG5cdFx0Ly8gY29uc29sZS5sb2coXCJSZXEgc2NlbmVzXCIsIF8udW5pcShzY2VuZXMpKVxuXHRcdHNlbGYuc29ja2V0LmVtaXQoXCJyZXF1ZXN0X3NjZW5lc1wiLCB7c2NlbmVzOl8udW5pcShzY2VuZXMpfSlcblx0XHRcblx0XHQvLyBjb25zb2xlLmxvZyhcIlJlY3YgQWN0b3JzXCIsYWN0b3JzKVxuXHRcdC8vIHNlbGYuX3BsYXllcl92aWV3cG9ydHMgPSBkYXRhLmxlbmd0aDtcblx0XHQvLyBzZWxmLmdvKCkgLy8g0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INCw0LrRgtC+0YDQvtCyINC/0L7Qv9GA0L7QsdGD0LXQvCDQt9Cw0L/Rg9GB0YLQuNGC0Ywg0Y3QvNGD0LvRj9GG0LjRjlxuXHR9KVxuXHRcblx0dGhpcy5zb2NrZXQub24oJ3NjZW5lcycsIGZ1bmN0aW9uKGRhdGEpe1xuXHRcdC8vY29uc29sZS5sb2coJ3NjZW5lcycsIGRhdGEuc2NlbmVzKTtcblx0XHR2YXIgZ3VpZHMgPSBfLmtleXMoZGF0YS5zY2VuZXMpXG5cdFx0dmFyIF90b3RhbHMgPSAwXG5cdFx0dmFyIGFsbF9sb2FkZWQgPSBmdW5jdGlvbigpe1xuXHRcdFx0c2VsZi5nbygpO1x0XG5cdFx0XHQvLyBjb25zb2xlLmxvZyhcInJlY3Ygc2NlbmVzXCIsIHNlbGYuc2NlbmVzKVxuXHRcdFx0c2VsZi5uZXR3b3JrX2FjdG9yID0gbmV3IENvbnRyb2xsZXIuTmV0d29ya0FjdG9yKCBmdW5jdGlvbigpe30sIHNlbGYpXG5cdFx0fVxuXHRcdHZhciBvbmxvYWQgPSBmdW5jdGlvbihzY2VuZSl7XG5cdFx0XHQvLyBjb25zb2xlLmxvZygnbG9hZGVkJyk7XG5cdFx0XHR2YXIgb25BY3QgPSBmdW5jdGlvbigpe1xuXHRcdFx0XHQvL2NvbnNvbGUubG9nKCdhY3Qgb24gY2xpZW50Jylcblx0XHRcdH1cblx0XHRcdF90b3RhbHMgKz0xXG5cdFx0XHRzZWxmLnNldHVwX3NjZW5lKHNjZW5lKTtcblx0XHRcdF8uZWFjaChzZWxmLmFjdG9ycywgZnVuY3Rpb24oYSl7XG5cdFx0XHRcdGlmIChhLkdVSUQgaW4gc2NlbmUuYWN0b3JzKXtcblx0XHRcdFx0XHRzZWxmLnNvY2tldC5lbWl0KFwiYWN0b3Itam9pbmVkXCIse2E6YSwgczpzY2VuZS5HVUlEfSApXG5cdFx0XHRcdFx0Ly9jb25zb2xlLmxvZyhcInRoaXMgYWN0b3IgaXMgZm9yIG1lXCIsIGEuR1VJRCwgc2NlbmUuR1VJRClcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdH0pXG5cdFx0XHQvLyBzZWxmLnNvY2tldC5lbWl0KFwicGxheWVyLWpvaW5lZFwiLCB7c2NlbmU6c2NlbmUuR1VJRCwgfSlcblx0XHRcdFxuXHRcdFx0Ly8gY29uc29sZS5sb2coXCJXQVRcIixfdG90YWxzLCBndWlkcy5sZW5ndGgpXG5cdFx0XHRpZihfdG90YWxzID09IGd1aWRzLmxlbmd0aCl7XG5cdFx0XHRcdGFsbF9sb2FkZWQoKVxuXHRcdFx0fVxuXHRcdFx0Ly8gXG5cdFx0XHQvLyBcblx0XHR9XG5cdFx0Xy5lYWNoKGRhdGEuc2NlbmVzLCBmdW5jdGlvbihzY2VuZSwgZ3VpZCl7XG5cdFx0XHQvLyBjb25zb2xlLmxvZygnd2VsbCcsIHNjZW5lKTtcblx0XHRcdHNlbGYubG9hZF9zY2VuZShzY2VuZSAsIG9ubG9hZClcblx0XHRcdC8vY29uc29sZS5sb2coJ3dlbGwnLCBzY2VuZS5fc2NlbmUpO1xuXHRcdFx0XG5cdFx0fSlcblx0XHRcblx0fSlcblx0dGhpcy5zb2NrZXQub24oJ2FjdG9yLWpvaW5lZCcsIGZ1bmN0aW9uKGRhdGEpe1xuXHRcdC8vIGNvbnNvbGUubG9nKCdqb2luaW5nIGFjdG9yJywgZGF0YSk7XG5cdFx0Ly8gY29uc29sZS5sb2coc2VsZi5hY3RvcnMpXG5cdFx0Ly8g0JDQutGC0L7RgCDQvNC+0LbQtdGCINC00LbQvtC50L3QuNGC0Ywg0YPQttC1INGB0YPRidC10YHRgtCy0YPRjtGJ0LjQuSDQsiDRgdGG0LXQvdC1IC0g0L3QsNC00L4g0L/QtdGA0LXQtNC10LvRi9Cy0LDRgtGMINCy0YzRjtC/0L7RgNGC0Ytcblx0XHRpZiAoZGF0YS5HVUlEIGluIHNlbGYuc2NlbmVzW2RhdGEuc2NlbmVdLmFjdG9ycyl7XG5cdFx0XHQvL2NvbnNvbGUubG9nKFwiYWN0b3IgYWxyZWFkeSBleGlzdCwgZmlyc3QgY29tZXI/XCIpXG5cdFx0fWVsc2V7XG5cdFx0XHRzZWxmLnNjZW5lc1tkYXRhLnNjZW5lXS5qb2luX2FjdG9yKGRhdGEpO1xuXHRcdH1cblx0fSlcblx0dGhpcy5zb2NrZXQub24oJ3NjZW5lX3N5bmMnLCBmdW5jdGlvbihkYXRhKXtcblx0XHRcblx0XHQvLyBjb25zb2xlLmxvZyhkYXRhLmFsbWFuYWNoKTtcblx0XHRpZihzZWxmLnNjZW5lc1tkYXRhLnNjZW5lXSAhPT0gdW5kZWZpbmVkKXtcblx0XHRcdHNlbGYuc2NlbmVzW2RhdGEuc2NlbmVdLnN5bmMoZGF0YS5hbG1hbmFjaCk7XG5cdFx0fVxuXHR9KVxuXHR0aGlzLnNvY2tldC5vbigncGxheWVyLWlucHV0cycsIGZ1bmN0aW9uKGRhdGEpe1xuXHRcdGNvbnNvbGUubG9nKFwiUlJcIiwgZGF0YSk7XG5cdFx0c2VsZi5zY2VuZXNbZGF0YS5zXS5hZGROZXR3b3JrTWVzc2FnZShkYXRhLmEpO1xuXHR9KVxuXG5cdFxuXG5cdFxufVxuXG53aW5kb3cuV29ybGQuc3luY1RpbWUgPSBmdW5jdGlvbigpe1xuXHR0aGlzLl9zeW5jX3RpbWVzdGFtcCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXHR2YXIgc2VsZiA9IHRoaXM7XG5cdHZhciBBY3Rpb25zID0gdGhpcy5wcm90b2J1ZkJ1aWxkZXIuYnVpbGQoXCJBY3Rpb25zXCIpO1xuXHRcblx0dmFyIG1lc3NhZ2VzID0ge307XG5cblx0dGhpcy5zb2NrZXQuZW1pdChcInN5bmNfcmVxdWVzdFwiKVxuXHRcblx0Ly9jb25zb2xlLmxvZyhcIj4+Pj5cIiwgdGhpcy5zb2NrZXQuZW1pdCk7XG5cdHZhciBkaWZmX3N0YXRpc3RpY3NfbGVuZ3RoID0gNTBcblx0aWYoISB0aGlzLl9zeW5jX21lc3NhZ2Vfc2V0dXAgKXtcblx0XHR0aGlzLnNvY2tldC5vbihcImNsb2NrX3Jlc3BvbnNlXCIsIGZ1bmN0aW9uKGRhdGEpe1xuXHRcdFx0dmFyIHJlY3ZfdHMgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblx0XHRcdHZhciBwaW5nID0gcmVjdl90cyAtIHNlbGYuX3N5bmNfdGltZXN0YW1wXG5cdFx0XHRcblx0XHRcdHNlbGYucGluZ3MucHVzaChwaW5nKVxuXHRcdFx0XG5cdFx0XHQvL2lmIChzZWxmLnBpbmdzLmxlbmd0aCA+IHBpbmdfc3RhdGlzdGljc19sZW5ndGggKXtzZWxmLnBpbmdzLnNwbGljZSgwLDEpfTtcblx0XHRcdC8vdmFyIGF2Z19waW5nID0gXy5yZWR1Y2Uoc2VsZi5waW5ncywgZnVuY3Rpb24oYSxiKXtyZXR1cm4gYStifSwwKS8gc2VsZi5waW5ncy5sZW5ndGg7XG5cdFx0XHQvL3NlbGYucGluZ3NfaW5zdGFiaWxpdHkucHVzaChNYXRoLmFicyhhdmdfcGluZyAtIHBpbmcpKVxuXHRcdFx0Ly9pZiAoc2VsZi5waW5nc19pbnN0YWJpbGl0eS5sZW5ndGggPiBwaW5nX3N0YXRpc3RpY3NfbGVuZ3RoKXtzZWxmLnBpbmdzX2luc3RhYmlsaXR5LnNwbGljZSgwLDEpfTtcblx0XHRcdC8vdmFyIGF2Z19waW5nX2luc3RhYiA9IF8ucmVkdWNlKHNlbGYucGluZ3NfaW5zdGFiaWxpdHksIGZ1bmN0aW9uKGEsYil7cmV0dXJuIGE+PWI/YTpifSwwKVxuXHRcdFx0XG5cdFx0XHR2YXIgbGF0ID0gcGluZyAvIDJcblx0XHRcdHZhciBfdGltZV9kaWZmID0gZGF0YS50cyAtIHNlbGYuX3N5bmNfdGltZXN0YW1wIC0gbGF0XG5cdFx0XHRzZWxmLl90aW1lX2RpZmZzLnB1c2goX3RpbWVfZGlmZilcblx0XHRcdGlmKHNlbGYuX3RpbWVfZGlmZnMubGVuZ3RoID4gZGlmZl9zdGF0aXN0aWNzX2xlbmd0aCl7c2VsZi5fdGltZV9kaWZmcy5zcGxpY2UoMCwxKSB9XG5cdFx0XHRzZWxmLl90aW1lX2RpZmYgPSBNYXRoLmZsb29yKF8ucmVkdWNlKHNlbGYuX3RpbWVfZGlmZnMsIGZ1bmN0aW9uKGEsYil7cmV0dXJuIGErYn0sMCkvc2VsZi5fdGltZV9kaWZmcy5sZW5ndGgpXG5cdFx0XHQvL2lmKHNlbGYuX3RpbWVfZGlmZiA8IDApe1xuXHRcdFx0Ly9cdHNlbGYuX3RpbWVfZGlmZiA9IDA7XG5cdFx0XHQvL31cblx0XHRcdC8vIHNlbGYuYXZlcmFnZV9waW5nX2luc3RhYmlsaXR5ID0gYXZnX3BpbmdfaW5zdGFiO1xuXHRcdFx0c2VsZi5tYXhfcGluZyA9IF8ubWF4KHNlbGYucGluZ3MpXG5cdFx0XHRcblx0XHRcdC8vIGNvbnNvbGUubG9nKFwiVFwiLCBzZWxmLl90aW1lX2RpZmYpXG5cdFx0XHQvL2NvbnNvbGUubG9nKFwiVElNRVNcIiwgc2VsZi5fdGltZV9kaWZmLCBkYXRhLnRzIC0gc2VsZi5fc3luY190aW1lc3RhbXAsIGxhdClcblx0XHRcdFxuXHRcdFx0Ly8gdmFyIHRvID0gMTAwIC8gKGF2Z19waW5nLzEwMDApXG5cdFx0XHQvLyB2YXIgaW5zdGFiX3BlciAgPSAgYXZnX3BpbmdfaW5zdGFiIC8gYXZnX3BpbmcgKiAxMDA7XG5cdFx0XHQvL2NvbnNvbGUubG9nKFwiSU5TVFZcIix0bywgYXZnX3BpbmcsIGF2Z19waW5nX2luc3RhYiwgaW5zdGFiX3Blcik7XG5cdFx0XHRcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtzZWxmLnN5bmNUaW1lKCl9LCAxMDAwKTtcblx0XHRcdFxuXHRcdH0pXG5cdFx0dGhpcy5fc3luY19tZXNzYWdlX3NldHVwID0gdHJ1ZVxuXHRcdFxuXHR9XG59O1xuXG53aW5kb3cuV29ybGQuc2VuZEFjdGlvbj1mdW5jdGlvbihzY2VuZSwgYWN0aW9uKXtcblx0dmFyIGFjdCA9IF8uY2xvbmUoYWN0aW9uKVxuXHRhY3QudHMgKz0gdGhpcy5fdGltZV9kaWZmOyBcblx0YWN0LnAgPSBKU09OLnN0cmluZ2lmeShhY3QucCk7XG5cdGNvbnNvbGUubG9nKFwiYWN0IGJlZm9yZSBzZW5kaW5nXCIsIGFjdC5pZGVudClcblx0XG5cdGRlbGV0ZSBhY3QudmVjdG9yO1xuXG5cdHRoaXMuc29ja2V0LmVtaXQoXCJ1c2VyX2FjdGlvbnNcIiwge3M6c2NlbmUsYTphY3R9KVxufTsiLCJmdW5jdGlvbiBTdGF0aWNMb2dnZXIoKXtcblx0dGhpcy5fdmFscyA9IHt9XG5cdHRoaXMuc2V0VmFsdWUgPSBmdW5jdGlvbihwYXJhbSwgdmFsKXtcblx0XHQvLyBjb25zb2xlLmxvZyhwYXJhbSwgdmFsKTtcblx0XHR0aGlzLl92YWxzW3BhcmFtXSA9IHZhbDtcblx0fVxuXHR0aGlzLmluaXQgPSBmdW5jdGlvbigpe1xuXHRcdHRoaXMuY29udCA9ICQoXCI8ZGl2PlwiKS5jc3Moe1xuXHRcdFx0J3Bvc2l0aW9uJzonZml4ZWQnLFxuXHRcdFx0J3RvcCc6MCxcblx0XHRcdCdyaWdodCc6MCxcblx0XHRcdCd3aWR0aCc6NDAwLFxuXHRcdFx0J2JvdHRvbSc6MCxcblx0XHRcdCdiYWNrZ3JvdW5kLWNvbG9yJzpcInJnYmEoMCwyMDAsMTAwLDAuNylcIlxuXHRcdH0pLmFwcGVuZFRvKCdib2R5Jyk7XG5cdC8vIFx0Y29uc29sZS5sb2codGhpcy5jb250KTtcblx0XHRcblx0fVxuXHR0aGlzLnJlZHJhdyA9IGZ1bmN0aW9uKCl7XG5cdFx0dGhpcy5jb250LmZpbmQoJyonKS5yZW1vdmUoKTtcblx0XHQvL2NvbnNvbGUubG9nKHRoaXMuX3ZhbHMpO1xuXHRcdGZvcih2YXIgaSBpbiB0aGlzLl92YWxzKXtcblx0XHRcdC8vY29uc29sZS5sb2coJ2FzZGEnKTtcblx0XHRcdGMgPSAkKCc8ZGl2PicpLmFwcGVuZFRvKHRoaXMuY29udClcblx0XHRcdGwgPSAkKCc8c3Bhbj4nKS5odG1sKGkgKyBcIiZuYnNwOzogJm5ic3A7XCIpLmNzcygnZm9udC13ZWlnaHQnLCdib2xkJykuYXBwZW5kVG8oYyk7XG5cdFx0XHR2ID0gJCgnPHNwYW4+JykudGV4dCggdGhpcy5fdmFsc1tpXSApLmFwcGVuZFRvKGMpO1xuXHRcdH1cblx0fVxufVxuXG52YXIgU0wgPSBuZXcgU3RhdGljTG9nZ2VyKCk7Iiwid2luZG93LldvcmxkLmFkZFVuaWZvcm1VcGRhdGVyID0gZnVuY3Rpb24obmFtZSwgdXBkZnVuYyl7XG4gICAgdGhpcy5fdW5pZm9ybV91cGRhdGVyc1tuYW1lXSA9IHVwZGZ1bmM7XG59XG53aW5kb3cuV29ybGQucmVtb3ZlVW5pZm9ybVVwZGF0ZXIgPSBmdW5jdGlvbihuYW1lKXtcbiAgICBkZWxldGUgdGhpcy5fdW5pZm9ybV91cGRhdGVyc1tuYW1lXTtcbn1cblxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9