World=function(){function e(){this.name="Cons"}return e}(),window.World.init=function(e,t){this.__vpx=0,this.auth_hash=e,this.login=t,this.p=new THREE.Projector,this.three_scenes={},this.scenes={},this.flares={},this.actors={},this.actorScene={},this.clock=new THREE.Clock;var i=new THREE.SphereGeometry(5);this.cur=new THREE.Mesh(i),this.vp_width=document.body.clientWidth,this.vp_height=400,this._main_viewport=0,this._additional_vps=[],this.sceneActions={},this._input_keymap={},this._uniform_updaters={};var n=this.vp_height/3,s=this.vp_width/4,h=this.vp_width-s;this._additional_vps_geom=[{l:h,t:2*n,w:s,h:n},{l:h,t:n,w:s,h:n},{l:h,t:0,w:s,h:n}],this._main_vp_geom={l:0,t:0,w:this.vp_width,h:this.vp_height},this.skyboxScenes={},this.skyBoxes={},this.skyBoxCamera={},this.mouse_projection_vec=new THREE.Vector3,SL.init();var r=this;return r.pings=[],r.pings_instability=[],r._time_diffs=[],r.latencities=[],this.renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.setSize(this.vp_width,this.vp_height),this.renderer.setClearColor(new THREE.Color(0)),document.body.appendChild(this.renderer.domElement),this.renderer.gammaInput=!0,this.renderer.gammaOutput=!0,this.renderer.autoClear=!1,this.renderer.physicallyBasedShading=!0,this._camera_rot_q=new THREE.Quaternion,document.addEventListener("mousemove",function(e){r.mouse_x=e.x,r.mouse_y=e.y},!1),this.renderer.domElement.addEventListener("mouseup",function(){r.Inputs.input("lmouse",!1)}),this.renderer.domElement.addEventListener("mousedown",function(){r.Inputs.input("lmouse",!0)}),document.addEventListener("keydown",function(e){var t=e.keyCode;r.Inputs.input(t,!0)},!1),document.addEventListener("keyup",function(e){var t=e.keyCode;r.Inputs.input(t,!1)},!1),r.init_socket(),r},window.World.set_actions=function(){self.actions=self._default_actions};
window.World.render=function(e,t){this.redrawSun(e),this.renderer.setViewport(t.l,t.t,t.w,t.h),this.redrawSky(e),this.scenes[e.scene]._action_on_the_run_var&&console.log("render M"),this._cur_cam=e.three_camera,this.renderer.render(this.three_scenes[e.scene],e.three_camera)},window.World.redrawSky=function(e){var t=e.three_camera.parent.matrix.clone(),o=e.three_camera.matrix.clone();t.multiply(o);var r=(new THREE.Matrix4).extractRotation(t),n=(new THREE.Euler).setFromRotationMatrix(r);this.skyBoxCamera[e.scene].rotation.copy(n),this.renderer.render(this.skyboxScenes[e.scene],this.skyBoxCamera[e.scene])},window.World.get_main_viewport=function(){return this._viewports[this._main_viewport]},window.World._init_vps=function(){var e=this._viewports[this._main_viewport],t=this;e.geom={t:0,l:0,w:this.vp_width,h:this.vp_height},e.three_camera=this.makeCamera(e),_.each(e.UIS,function(e){e.construct()}),_.each(e.actors,function(e){var o=t.actorScene[e.GUID],r=t.sceneActions[o][e.control.object_guid][e.control.workpoint];_.each(r,function(e){e.default_key&&(t._input_keymap[e.default_key]=e)})}),this.three_scenes[e.scene].add(this.cur),this.initSpace(e);var t=this;t.Inputs=new Controller.LocalInputActor(t,t.socket),_.each(this._additional_vps,function(e,o){var r=t._viewports[e];r.geom=t._additional_vps_geom[o],r.three_camera=t.makeCamera(r),t.initSpace(r)})},window.World.setupCameras=function(){var e=this;e._viewports={},e._viewport_amount=0;var t=!0;console.log("setting up cameras with",e.actors),_.each(e.actors,function(o){var r=o.control.workpoint,n=e.actorScene[o.GUID];console.log("scenes",e.scenes,n);var i=e.scenes[n].get_object(o.control.object_guid).workpoints[r].views,a=e.scenes[n].meshes[o.control.object_guid],c=a.getUIForWP(r);_.each(i,function(r){var i=n+o.control.object_guid+r;if(t&&(e._main_viewport=i),i in e._viewports){e._viewports[i].actors.push(o);var a=e._viewports[i].UIS;e._viewports[i].UIS=a.concat(c)}else{var s={scene:n,object:o.control.object_guid,camera:r,actors:[o],UIS:c};e._viewports[i]=s,e._viewport_amount+=1}})}),e._init_vps();var o=document.getElementById("viewports-select");o.innerHtml="",_.each(e._viewports,function(e,t){var r=document.createElement("option");r.value=t,r.appendChild(document.createTextNode(e.camera)),o.appendChild(r)})},window.World.redrawSun=function(e){var t=this.scenes[e.scene].meshes[e.object],o=(new THREE.Vector3).fromArray([0,1,0]).multiplyScalar(10);this.flares[e.scene].position=t.position.clone().add(o)},window.World.makeCamera=function(e){var t=this,o=e.scene,r=e.object,n=e.camera,i=t.scenes[o].meshes[r],a=t.scenes[o].get_object(r),c=new THREE.PerspectiveCamera(45,e.geom.w/e.geom.h,1,1e3),s=new THREE.Vector3,_=new THREE.Vector3;s.set.apply(s,a.cameras[n].position),_.set.apply(_,a.cameras[n].direction);var h=new THREE.Vector3(0,0,-1),d=new THREE.Vector3;d.crossVectors(h,_);var m=Math.acos(h.dot(_)/h.length()/_.length());return 0!==d.length()||h.equals(_)||(d=new THREE.Vector3(0,1,0),m=Math.PI),c.rotateOnAxis(d,m),c.position=s,i.add(c),c},window.World.setup_scene=function(e){material=new THREE.MeshBasicMaterial({color:16711680,wireframe:!0});var t=(new THREE.Vector3).fromArray([0,1,0]),o=new THREE.AmbientLight(65793);this.three_scenes[e.GUID].add(o);var r=new THREE.DirectionalLight(16777198,1);r.color.setHSL.apply(r.color,[Math.random(),.8,.9]),r.position=t,this.three_scenes[e.GUID].add(r),this.initSun(e),this.sceneActions[e.GUID]=e.getActions()},window.World.bindCamera=function(){var e=this,t=e.get_current_actor(),o=e.meshes()[t.control.object_guid];o.add(e.camera),e.setCamera()},window.World.go=function(){var e=this;e.setupCameras();var t=function(){_.each(e.scenes,function(e){e.tick()})},o=function(){t();var r=e.get_main_viewport(),n=e._main_vp_geom;_.each(e._uniform_updaters,function(e){e()}),e.mouse_projection_vec.set(e.mouse_x/n.w*2-1,2*-(e.mouse_y/n.h)+1,.99),e.render(r,n),_.each(r.UIS,function(e){e.refresh()}),e.p.unprojectVector(e.mouse_projection_vec,r.three_camera),e.cur.position.copy(e.mouse_projection_vec),_.each(e._additional_vps,function(t,o){var r=e._viewports[t];e.render(r,e._additional_vps_geom[o])}),SL.redraw(),requestAnimationFrame(o)};requestAnimationFrame(o)};
window.World.load_scene=function(e,n){var t=new Scene;t.set_from_json(e),this.scenes[t.GUID]=t,this.three_scenes[t.GUID]=new THREE.Scene,t.load(n,this.three_scenes[t.GUID],this)},window.World.initSun=function(e){var n=new THREE.Color(16777215),t=_.clone([Math.random(),.8,.9]);t[2]+=.5,n.setHSL.apply(n,t);var i=THREE.ImageUtils.loadTexture("/textures/lensflare/lensflare0.png"),s=THREE.ImageUtils.loadTexture("/textures/lensflare/lensflare2.png"),d=THREE.ImageUtils.loadTexture("/textures/lensflare/lensflare3.png"),r=new THREE.LensFlare(i,700,0,THREE.AdditiveBlending,n);r.add(s,512,0,THREE.AdditiveBlending),r.add(s,512,0,THREE.AdditiveBlending),r.add(s,512,0,THREE.AdditiveBlending),r.add(d,60,.6,THREE.AdditiveBlending),r.add(d,70,.7,THREE.AdditiveBlending),r.add(d,120,.9,THREE.AdditiveBlending),r.add(d,70,1,THREE.AdditiveBlending);var a=function(e){var n,t,i=e.lensFlares.length,s=2*-e.positionScreen.x,d=2*-e.positionScreen.y;for(n=0;i>n;n++)t=e.lensFlares[n],t.x=e.positionScreen.x+s*t.distance,t.y=e.positionScreen.y+d*t.distance,t.rotation=0;e.lensFlares[2].y+=.025,e.lensFlares[3].rotation=.5*e.positionScreen.x+THREE.Math.degToRad(45)};r.customUpdateCallback=a,r.position=(new THREE.Vector3).fromArray([0,1,0]).multiplyScalar(500),this.three_scenes[e.GUID].add(r),this.flares[e.GUID]=r},window.World.initSpace=function(e){var n="/textures/space/m01_cube",t="png",i=[n+".px."+t,n+".nx."+t,n+".py."+t,n+".ny."+t,n+".pz."+t,n+".nz."+t],s=THREE.ImageUtils.loadTextureCube(i),d=THREE.ShaderLib.cube;d.uniforms.tCube.value=s;var r=new THREE.ShaderMaterial({fragmentShader:d.fragmentShader,vertexShader:d.vertexShader,uniforms:d.uniforms,depthWrite:!1,side:THREE.BackSide});this.skyboxScenes[e.scene]=new THREE.Scene;var a=new THREE.Mesh(new THREE.CubeGeometry(9e3,9e3,9e3),r);this.skyBoxes[e.scene]=a,this.skyBoxCamera[e.scene]=new THREE.PerspectiveCamera(45,e.geom.w/e.geom.h,1,1e4),this.skyboxScenes[e.scene].add(a)},window.World.make_main=function(){var e=document.getElementById("viewports-select");this._main_viewport=e.options[e.selectedIndex].value,this._init_vps()},window.World.add_icon=function(){var e=document.getElementById("viewports-select");add_vp=e.options[e.selectedIndex].value,3==this._additional_vps.length?this._additional_vps[2]==add_vp:this._additional_vps.push(add_vp),this._init_vps()},window.World.meshes=function(){return this.scene.meshes},window.World.controllable=function(){var e=this.get_main_viewport();return this.scenes[e.scene].meshes[e.object]},window.World.mesh_for=function(e){return this.meshes()[this.scene.actors[e].control.object_guid]},window.World.get_current_actor=function(){var e=this;return e.scene.actors[e.login]};
function socketService(e){function t(){return r+=1,r%1e4}var n=function(e){var t=(Q.defer(),new XMLHttpRequest);t.open("GET","/my-auth-hash/",!0),t.send(),t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){var n=JSON.parse(t.responseText);e(n)}}},c=io.connect(),i=!1,s=[];is_authenticated=Q.defer(),c.on("connected",function(){n(function(e){c.emit("auth_hash",{auth:e.hash})})}),c.on("auth_completed",function(e){e.err?is_authenticated.reject(e.err):is_authenticated.resolve(!0)}),is_authenticated.promise.then(function(){i=!0;for(var e=0;e<s.length;e++)c.emit(s[e].T,s[e].p)});var o={},a={},r=0,u=function(e,n,o){var r=Q.defer(),u=t();a[u]={cb:r};var f={p:o};return f.cbix=u,f.T=n,i?c.emit(e,f):s.push({T:e,p:f}),r.promise},f=["Q","R","S"];return _.each(f,function(e){c.on(e,function(e){var t=e.cbix;a.hasOwnProperty(t)&&(a[t].cb.resolve(e.d),delete a[t])})}),c.on("F",function(t){e("F",t)}),c.on("ALM",function(t){e("ALM",t)}),o.get=function(e,t){return u("Q",e,t)},o.sync=function(){return u("S","",{})},o.request=function(e,t){return u("R",e,t)},o.action=function(e){c.emit("A",e)},o}window.World.init_socket=function(){var e=window.location.origin,t=io.connect(e);this.socket=t;var n=this;this.socket_srv=socketService(function(e,t){switch(e){case"ALM":void 0!==n.scenes[t.scene]&&n.scenes[t.scene].sync(t.almanach);break;case"F":n.scenes[t.s].addNetworkMessage(t.a)}});var c=[];this.socket_srv.request("CTX",{user_id:!0}).then(function(e){n.syncTime();var t=0,i=0;_.each(e.contexts,function(e,s){console.log("CTXes",e,s);var o=e.GUID;if(-1===c.indexOf(o)){c.push(o),t+=1;var a=e.objects,r=e.actors,u=[];_.each(a,function(e){var t=n.socket_srv.get("A",{id:e}).then(function(e){return n.socket_srv.get("T",{type:e.ship_type}).then(function(t){return e.ship_type=t,e})});u.push(t)}),Q.all(u).then(function(e){n.three_scenes[o]=new THREE.Scene;var c=new Scene(n.three_scenes[o],n);c.GUID=o,c.onLoadCallback=function(){n.setup_scene(c),i+=1,i===t&&(console.log("all_loaded"),n.go())},n.scenes[o]=c,_.each(r,function(e){e.GUID===s&&(n.actors[s]=e,n.actorScene[s]=o),c.join_actor(e)}),_.each(e,function(e){c.join_object(e,e.GUID)})}).catch(function(e){console.log(e.stack)})}})})},window.World.syncTime=function(){this._sync_timestamp=(new Date).getTime();var e=this,t=50;this.socket_srv.sync().then(function(n){var c=(new Date).getTime(),i=c-e._sync_timestamp;e.latencities.push(i/2),e.avg_latencity=Math.floor(_.reduce(e.latencities,function(e,t){return e+t},0)/e.latencities.length);var s=n.ts-e._sync_timestamp;e._time_diffs.push(s),e._time_diffs.length>t&&e._time_diffs.splice(0,1),e._time_diff=Math.floor(_.reduce(e._time_diffs,function(e,t){return e+t},0)/e._time_diffs.length),e.max_ping=_.max(e.pings),setTimeout(function(){e.syncTime()},1e3)}).catch(function(e){console.log(e.stack)})},window.World.sendAction=function(e,t){var n=_.clone(t);n.ts+=this._time_diff,n.p=JSON.stringify(n.p),delete n.vector,this.socket_srv.action({s:e,a:n})};
function StaticLogger(){this._vals={},this.setValue=function(t,i){this._vals[t]=i},this.init=function(){this.cont=$("<div>").css({position:"fixed",top:0,right:0,width:400,bottom:0,"background-color":"rgba(0,200,100,0.7)"}).appendTo("body")},this.redraw=function(){this.cont.find("*").remove();for(var t in this._vals)c=$("<div>").appendTo(this.cont),l=$("<span>").html(t+"&nbsp;: &nbsp;").css("font-weight","bold").appendTo(c),v=$("<span>").text(this._vals[t]).appendTo(c)}}var SL=new StaticLogger;
window.World.addUniformUpdater=function(d,o){this._uniform_updaters[d]=o},window.World.removeUniformUpdater=function(d){delete this._uniform_updaters[d]};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluaXRpYWxpemF0aW9uLmpzIiwicmVuZGVyLmpzIiwic2NlbmVfdXRpbHMuanMiLCJzb2NrZXRzLmpzIiwic3RhdGljTG9nZ2VyLmpzIiwidXRpbHMuanMiXSwibmFtZXMiOlsiV29ybGQiLCJDb25zIiwidGhpcyIsIm5hbWUiLCJ3aW5kb3ciLCJpbml0IiwiYXV0aF9oYXNoIiwiY2xpZW50X2xvZ2luIiwiX192cHgiLCJsb2dpbiIsInAiLCJUSFJFRSIsIlByb2plY3RvciIsInRocmVlX3NjZW5lcyIsInNjZW5lcyIsImZsYXJlcyIsImFjdG9ycyIsImFjdG9yU2NlbmUiLCJjbG9jayIsIkNsb2NrIiwic2ciLCJTcGhlcmVHZW9tZXRyeSIsImN1ciIsIk1lc2giLCJ2cF93aWR0aCIsImRvY3VtZW50IiwiYm9keSIsImNsaWVudFdpZHRoIiwidnBfaGVpZ2h0IiwiX21haW5fdmlld3BvcnQiLCJfYWRkaXRpb25hbF92cHMiLCJzY2VuZUFjdGlvbnMiLCJfaW5wdXRfa2V5bWFwIiwiX3VuaWZvcm1fdXBkYXRlcnMiLCJoMyIsInc0IiwidzM0IiwiX2FkZGl0aW9uYWxfdnBzX2dlb20iLCJsIiwidCIsInciLCJoIiwiX21haW5fdnBfZ2VvbSIsInNreWJveFNjZW5lcyIsInNreUJveGVzIiwic2t5Qm94Q2FtZXJhIiwibW91c2VfcHJvamVjdGlvbl92ZWMiLCJWZWN0b3IzIiwiU0wiLCJzZWxmIiwicGluZ3MiLCJwaW5nc19pbnN0YWJpbGl0eSIsIl90aW1lX2RpZmZzIiwibGF0ZW5jaXRpZXMiLCJyZW5kZXJlciIsIldlYkdMUmVuZGVyZXIiLCJhbnRpYWxpYXMiLCJhbHBoYSIsInNldFNpemUiLCJzZXRDbGVhckNvbG9yIiwiQ29sb3IiLCJhcHBlbmRDaGlsZCIsImRvbUVsZW1lbnQiLCJnYW1tYUlucHV0IiwiZ2FtbWFPdXRwdXQiLCJhdXRvQ2xlYXIiLCJwaHlzaWNhbGx5QmFzZWRTaGFkaW5nIiwiX2NhbWVyYV9yb3RfcSIsIlF1YXRlcm5pb24iLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsIm1vdXNlX3giLCJ4IiwibW91c2VfeSIsInkiLCJJbnB1dHMiLCJpbnB1dCIsImNvZGUiLCJrZXlDb2RlIiwiaW5pdF9zb2NrZXQiLCJzZXRfYWN0aW9ucyIsImFjdGlvbnMiLCJfZGVmYXVsdF9hY3Rpb25zIiwicmVuZGVyIiwidnAiLCJnZW9tIiwicmVkcmF3U3VuIiwic2V0Vmlld3BvcnQiLCJyZWRyYXdTa3kiLCJzY2VuZSIsIl9hY3Rpb25fb25fdGhlX3J1bl92YXIiLCJjb25zb2xlIiwibG9nIiwiX2N1cl9jYW0iLCJ0aHJlZV9jYW1lcmEiLCJtcCIsInBhcmVudCIsIm1hdHJpeCIsImNsb25lIiwibSIsIm11bHRpcGx5IiwibXIiLCJNYXRyaXg0IiwiZXh0cmFjdFJvdGF0aW9uIiwicm90IiwiRXVsZXIiLCJzZXRGcm9tUm90YXRpb25NYXRyaXgiLCJyb3RhdGlvbiIsImNvcHkiLCJnZXRfbWFpbl92aWV3cG9ydCIsIl92aWV3cG9ydHMiLCJfaW5pdF92cHMiLCJtdnAiLCJtYWtlQ2FtZXJhIiwiXyIsImVhY2giLCJVSVMiLCJ1aSIsImNvbnN0cnVjdCIsImFjdG9yIiwic2NlbmVfZ3VpZCIsIkdVSUQiLCJ0b3RhbF9hY3Rpb25zIiwiY29udHJvbCIsIm9iamVjdF9ndWlkIiwid29ya3BvaW50IiwiYWN0aW9uIiwiZGVmYXVsdF9rZXkiLCJhZGQiLCJpbml0U3BhY2UiLCJDb250cm9sbGVyIiwiTG9jYWxJbnB1dEFjdG9yIiwic29ja2V0IiwidnBfbmFtZSIsImkiLCJzZXR1cENhbWVyYXMiLCJfdmlld3BvcnRfYW1vdW50IiwiaXNfZmlyc3QiLCJ3cCIsInZpZXdzIiwiZ2V0X29iamVjdCIsIndvcmtwb2ludHMiLCJtZXNoIiwibWVzaGVzIiwidWlzIiwiZ2V0VUlGb3JXUCIsInZpZXciLCJ2cF9oYXNoIiwicHVzaCIsIlUiLCJjb25jYXQiLCJvYmplY3QiLCJjYW1lcmEiLCJzZWwiLCJnZXRFbGVtZW50QnlJZCIsImlubmVySHRtbCIsImsiLCJvcHQiLCJjcmVhdGVFbGVtZW50IiwidmFsdWUiLCJjcmVhdGVUZXh0Tm9kZSIsInNkIiwiZnJvbUFycmF5IiwibXVsdGlwbHlTY2FsYXIiLCJwb3NpdGlvbiIsIm9iamVjdF9pZCIsInBvcnQiLCJQZXJzcGVjdGl2ZUNhbWVyYSIsInZwX3BvcyIsInZwX3JvdCIsInNldCIsImFwcGx5IiwiY2FtZXJhcyIsImRpcmVjdGlvbiIsImNhbV9iYXNlIiwiYXhpcyIsImNyb3NzVmVjdG9ycyIsImFnIiwiTWF0aCIsImFjb3MiLCJkb3QiLCJsZW5ndGgiLCJlcXVhbHMiLCJQSSIsInJvdGF0ZU9uQXhpcyIsInNldHVwX3NjZW5lIiwibWF0ZXJpYWwiLCJNZXNoQmFzaWNNYXRlcmlhbCIsImNvbG9yIiwid2lyZWZyYW1lIiwic3VuRGlyZWN0aW9uIiwiYW1iaWVudExpZ2h0IiwiQW1iaWVudExpZ2h0IiwibGlnaHQiLCJEaXJlY3Rpb25hbExpZ2h0Iiwic2V0SFNMIiwicmFuZG9tIiwiaW5pdFN1biIsImdldEFjdGlvbnMiLCJiaW5kQ2FtZXJhIiwiZ2V0X2N1cnJlbnRfYWN0b3IiLCJjb250cm9sbGFibGUiLCJzZXRDYW1lcmEiLCJnbyIsIm1ha2VUaWNrcyIsInMiLCJ0aWNrIiwiYW5pbWF0ZSIsImYiLCJyZWZyZXNoIiwidW5wcm9qZWN0VmVjdG9yIiwicmVkcmF3IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwibG9hZF9zY2VuZSIsInNjZW5lX2pzIiwib25sb2FkIiwiU2NlbmUiLCJzZXRfZnJvbV9qc29uIiwibG9hZCIsImZsYXJlQ29sb3IiLCJzbCIsInRleHR1cmVGbGFyZTAiLCJJbWFnZVV0aWxzIiwibG9hZFRleHR1cmUiLCJ0ZXh0dXJlRmxhcmUyIiwidGV4dHVyZUZsYXJlMyIsImxlbnNGbGFyZSIsIkxlbnNGbGFyZSIsIkFkZGl0aXZlQmxlbmRpbmciLCJsZW5zRmxhcmVVcGRhdGVDYWxsYmFjayIsImZsYXJlIiwiZmwiLCJsZW5zRmxhcmVzIiwidmVjWCIsInBvc2l0aW9uU2NyZWVuIiwidmVjWSIsImRpc3RhbmNlIiwiZGVnVG9SYWQiLCJjdXN0b21VcGRhdGVDYWxsYmFjayIsInBhdGgiLCJmb3JtYXQiLCJ1cmxzIiwidGV4dHVyZUN1YmUiLCJsb2FkVGV4dHVyZUN1YmUiLCJzaGFkZXIiLCJTaGFkZXJMaWIiLCJ1bmlmb3JtcyIsIlNoYWRlck1hdGVyaWFsIiwiZnJhZ21lbnRTaGFkZXIiLCJ2ZXJ0ZXhTaGFkZXIiLCJkZXB0aFdyaXRlIiwic2lkZSIsIkJhY2tTaWRlIiwiQ3ViZUdlb21ldHJ5IiwibWFrZV9tYWluIiwib3B0aW9ucyIsInNlbGVjdGVkSW5kZXgiLCJhZGRfaWNvbiIsImFkZF92cCIsIm1lc2hfZm9yIiwic29ja2V0U2VydmljZSIsImxpc3RlbmVyIiwiZ2V0Q0JJeCIsImN1cmNiaXgiLCJhdXRoSGFzaEYiLCJjYiIsInhociIsIlEiLCJkZWZlciIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNlbmQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwianMiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJpbyIsImNvbm5lY3QiLCJpc19yZWFkeSIsIlF1ZXVlIiwiaXNfYXV0aGVudGljYXRlZCIsIm9uIiwianNvbiIsImVtaXQiLCJhdXRoIiwiaGFzaCIsIm1zZyIsImVyciIsInJlamVjdCIsInJlc29sdmUiLCJwcm9taXNlIiwidGhlbiIsIlQiLCJTIiwiY2JzIiwiUmVxIiwibXQiLCJkIiwiY2JpeCIsIm8iLCJtZXNzYWdlc190b19oZWFyIiwibWVzc2FnZV90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJkYXRhIiwiZ2V0Iiwic3luYyIsInJlcXVlc3QiLCJtZXNzIiwib3JpZ2luIiwibG9jYXRpb24iLCJzb2NrZXRfc3J2IiwidHlwZSIsInVuZGVmaW5lZCIsImFsbWFuYWNoIiwiYWRkTmV0d29ya01lc3NhZ2UiLCJhIiwic2NlbmVzX2luX3Byb2Nlc3MiLCJ1c2VyX2lkIiwiY3R4Iiwic3luY1RpbWUiLCJ0b3RhbF9zY2VuZXMiLCJsb2FkZWRfc2NlbmVzIiwiY29udGV4dHMiLCJzY2VuZV9kZXNjIiwiYWN0b3JfZ3VpZCIsImluZGV4T2YiLCJvYmplY3RzIiwic2NlbmVfYWN0b3JzIiwib3Nwcm9taXNlcyIsIm9ndWlkIiwiaWQiLCJvYmoiLCJzaGlwX3R5cGUiLCJhbGwiLCJvbkxvYWRDYWxsYmFjayIsImFjdCIsImpvaW5fYWN0b3IiLCJqb2luX29iamVjdCIsImNhdGNoIiwic3RhY2siLCJfc3luY190aW1lc3RhbXAiLCJEYXRlIiwiZ2V0VGltZSIsImRpZmZfc3RhdGlzdGljc19sZW5ndGgiLCJyZWN2X3RzIiwicGluZyIsImF2Z19sYXRlbmNpdHkiLCJmbG9vciIsInJlZHVjZSIsImIiLCJfdGltZV9kaWZmIiwidHMiLCJzcGxpY2UiLCJtYXhfcGluZyIsIm1heCIsInNldFRpbWVvdXQiLCJzZW5kQWN0aW9uIiwic3RyaW5naWZ5IiwidmVjdG9yIiwiU3RhdGljTG9nZ2VyIiwiX3ZhbHMiLCJzZXRWYWx1ZSIsInBhcmFtIiwidmFsIiwiY29udCIsIiQiLCJjc3MiLCJ0b3AiLCJyaWdodCIsIndpZHRoIiwiYm90dG9tIiwiYmFja2dyb3VuZC1jb2xvciIsImFwcGVuZFRvIiwiZmluZCIsInJlbW92ZSIsImMiLCJodG1sIiwidiIsInRleHQiLCJhZGRVbmlmb3JtVXBkYXRlciIsInVwZGZ1bmMiLCJyZW1vdmVVbmlmb3JtVXBkYXRlciJdLCJtYXBwaW5ncyI6IkFBQUFBLE1BQVEsV0FDUCxRQUFTQyxLQUNSQyxLQUFLQyxLQUFPLE9BRWIsTUFBT0YsTUFJUkcsT0FBT0osTUFBTUssS0FBTyxTQUFTQyxFQUFXQyxHQUN2Q0wsS0FBS00sTUFBUSxFQUNiTixLQUFLSSxVQUFZQSxFQUNqQkosS0FBS08sTUFBUUYsRUFHVkwsS0FBS1EsRUFBSSxHQUFJQyxPQUFNQyxVQUN0QlYsS0FBS1csZ0JBQ0xYLEtBQUtZLFVBQ0xaLEtBQUthLFVBQ0ZiLEtBQUtjLFVBQ0xkLEtBQUtlLGNBRUxmLEtBQUtnQixNQUFRLEdBQUlQLE9BQU1RLEtB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YnRXLE9BQU9KLE1BQU04WCxrQkFBb0IsU0FBUzNYLEVBQU00WCxHQUM1QzdYLEtBQUsrQixrQkFBa0I5QixHQUFRNFgsR0FFbkMzWCxPQUFPSixNQUFNZ1kscUJBQXVCLFNBQVM3WCxTQUNsQ0QsTUFBSytCLGtCQUFrQjlCIiwiZmlsZSI6ImNsaWVudC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJXb3JsZCA9IChmdW5jdGlvbigpe1xuXHRmdW5jdGlvbiBDb25zKCl7XG5cdFx0dGhpcy5uYW1lID0gXCJDb25zXCI7XG5cdH1cblx0cmV0dXJuIENvbnM7XG59KSgpXG5cblxud2luZG93LldvcmxkLmluaXQgPSBmdW5jdGlvbihhdXRoX2hhc2gsIGNsaWVudF9sb2dpbil7XG5cdHRoaXMuX192cHggPSAwO1xuXHR0aGlzLmF1dGhfaGFzaCA9IGF1dGhfaGFzaDtcblx0dGhpcy5sb2dpbiA9IGNsaWVudF9sb2dpbjtcblx0XG5cbiAgICB0aGlzLnAgPSBuZXcgVEhSRUUuUHJvamVjdG9yKCk7XG5cdHRoaXMudGhyZWVfc2NlbmVzID0ge31cblx0dGhpcy5zY2VuZXMgPSB7fTtcblx0dGhpcy5mbGFyZXMgPSB7fTtcbiAgICB0aGlzLmFjdG9ycyA9IHt9O1xuICAgIHRoaXMuYWN0b3JTY2VuZSA9IHt9O1xuXG4gICAgdGhpcy5jbG9jayA9IG5ldyBUSFJFRS5DbG9jaygpO1xuXG4gICAgdmFyIHNnID0gbmV3IFRIUkVFLlNwaGVyZUdlb21ldHJ5KDUpO1xuXG4gICAgdGhpcy5jdXIgPSBuZXcgVEhSRUUuTWVzaChzZykgLy8gLCB3aXJlcyk7XG5cdHRoaXMudnBfd2lkdGggPSBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoO1xuXHR0aGlzLnZwX2hlaWdodCA9IDQwMDsvL2RvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0O1xuXHR0aGlzLl9tYWluX3ZpZXdwb3J0ID0gMFxuXHR0aGlzLl9hZGRpdGlvbmFsX3ZwcyA9IFtdO1xuXHR0aGlzLnNjZW5lQWN0aW9ucyA9IHt9O1xuXHR0aGlzLl9pbnB1dF9rZXltYXAgPSB7fTtcbiAgICB0aGlzLl91bmlmb3JtX3VwZGF0ZXJzID0ge307XG5cbiAgICB2YXIgaDMgPSB0aGlzLnZwX2hlaWdodC8zXG5cdHZhciB3NCA9IHRoaXMudnBfd2lkdGgvNFxuXHR2YXIgdzM0ID0gdGhpcy52cF93aWR0aC0gdzRcblx0dGhpcy5fYWRkaXRpb25hbF92cHNfZ2VvbSA9IFtcblx0XHR7bDp3MzQsIHQ6aDMqMiwgdzp3NCwgaDpoM30sXG5cdFx0e2w6dzM0LCB0OmgzLCB3Onc0LCBoOmgzfSxcblx0XHR7bDp3MzQsIHQ6MCwgdzp3NCwgaDpoM30sXG5cdFxuXHRdXG5cdHRoaXMuX21haW5fdnBfZ2VvbSA9IHtsOjAsIHQ6MCwgdzp0aGlzLnZwX3dpZHRoLCBoOnRoaXMudnBfaGVpZ2h0fTtcblx0XG5cdHRoaXMuc2t5Ym94U2NlbmVzID0ge307XG5cdHRoaXMuc2t5Qm94ZXMgPSB7fTsgLy9bc2NlbmUuZ3VpZF0gID0gbmV3IFRIUkVFLk1lc2goIG5ldyBUSFJFRS5DdWJlR2VvbWV0cnkoIDkwMDAsIDkwMDAsIDkwMDAgKSwgbWF0ZXJpYWwgKTtcblx0dGhpcy5za3lCb3hDYW1lcmEgPSB7fTsvL1tzY2VuZS5ndWlkXVxuXHR0aGlzLm1vdXNlX3Byb2plY3Rpb25fdmVjID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcblx0U0wuaW5pdCgpO1xuXHR2YXIgc2VsZiA9IHRoaXM7XG5cdHNlbGYucGluZ3MgPSBbXTtcblx0c2VsZi5waW5nc19pbnN0YWJpbGl0eSA9IFtdO1xuXHRzZWxmLl90aW1lX2RpZmZzID0gW107XG4gICAgc2VsZi5sYXRlbmNpdGllcyA9IFtdO1xuXHRcblxuXHRcbiAgICBcblx0dGhpcy5yZW5kZXJlciA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKHthbnRpYWxpYXM6dHJ1ZSwgYWxwaGE6dHJ1ZX0pO1xuXHR0aGlzLnJlbmRlcmVyLnNldFNpemUodGhpcy52cF93aWR0aCwgdGhpcy52cF9oZWlnaHQpO1xuXHR0aGlzLnJlbmRlcmVyLnNldENsZWFyQ29sb3IobmV3IFRIUkVFLkNvbG9yKDB4MDAwMDAwKSk7XG5cdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5yZW5kZXJlci5kb21FbGVtZW50KTtcblx0XG5cdHRoaXMucmVuZGVyZXIuZ2FtbWFJbnB1dCA9IHRydWU7XG5cdHRoaXMucmVuZGVyZXIuZ2FtbWFPdXRwdXQgPSB0cnVlO1xuXHR0aGlzLnJlbmRlcmVyLmF1dG9DbGVhciA9IGZhbHNlO1xuXHR0aGlzLnJlbmRlcmVyLnBoeXNpY2FsbHlCYXNlZFNoYWRpbmcgPSB0cnVlO1xuXHRcblx0dGhpcy5fY2FtZXJhX3JvdF9xID0gbmV3IFRIUkVFLlF1YXRlcm5pb24oKTtcblx0XG5cdFxuXHRcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ21vdXNlbW92ZScsIGZ1bmN0aW9uKGUpe1xuXHRcdHNlbGYubW91c2VfeCA9IGUueDtcblx0XHRzZWxmLm1vdXNlX3kgPSBlLnk7XG5cdH0sIGZhbHNlICk7XG5cdHRoaXMucmVuZGVyZXIuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZnVuY3Rpb24oZSl7XG5cblx0XHRzZWxmLklucHV0cy5pbnB1dCggJ2xtb3VzZScsIGZhbHNlKVxuXHR9KVxuXHRcblx0dGhpcy5yZW5kZXJlci5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGZ1bmN0aW9uKGUpe1xuXG5cdFx0c2VsZi5JbnB1dHMuaW5wdXQoICdsbW91c2UnLCB0cnVlKVxuXHR9KVxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24oZSl7XG5cdFx0dmFyIGNvZGUgPSBlLmtleUNvZGU7XG5cblx0XHRzZWxmLklucHV0cy5pbnB1dCggY29kZSwgdHJ1ZSlcblx0XHRcblxuXHRcdFxuXHR9LCBmYWxzZSlcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmdW5jdGlvbihlKXtcblx0XHR2YXIgY29kZSA9IGUua2V5Q29kZTtcblx0XHRzZWxmLklucHV0cy5pbnB1dChjb2RlLCBmYWxzZSlcblxuXHRcdFxuXHR9LCBmYWxzZSlcblx0c2VsZi5pbml0X3NvY2tldCgpXG5cdHJldHVybiBzZWxmO1xuXHRcbn1cblxuXG53aW5kb3cuV29ybGQuc2V0X2FjdGlvbnMgPSBmdW5jdGlvbigpe1xuXHRzZWxmLmFjdGlvbnMgPSBzZWxmLl9kZWZhdWx0X2FjdGlvbnNcbn1cblxuLy8gbW9kdWxlLmV4cG9ydHMuVyA9IHdpbmRvdzsiLCJ3aW5kb3cuV29ybGQucmVuZGVyID0gZnVuY3Rpb24odnAsZ2VvbSl7XG5cdHRoaXMucmVkcmF3U3VuKHZwKVxuXHQvLyBjb25zb2xlLmxvZyh2cClcblx0dGhpcy5yZW5kZXJlci5zZXRWaWV3cG9ydChnZW9tLmwsIGdlb20udCwgZ2VvbS53LCBnZW9tLmgpXG5cdC8vY29uc29sZS5sb2coXCJCTEJMQlwiLHRoaXMudGhyZWVfc2NlbmVzLHZwLnNjZW5lKTtcblx0dGhpcy5yZWRyYXdTa3kodnApXG5cdGlmKHRoaXMuc2NlbmVzW3ZwLnNjZW5lXS5fYWN0aW9uX29uX3RoZV9ydW5fdmFyKXtcblx0XHRjb25zb2xlLmxvZygncmVuZGVyIE0nKTtcblx0fVxuICAgIHRoaXMuX2N1cl9jYW0gPSB2cC50aHJlZV9jYW1lcmE7XG5cdC8vdGhpcy4yNzZcblx0Ly8gZXIuMjc2XG5cdC8vICggdGhpcy50aHJlZV9zY2VuZXNbdnAuc2NlbmVdLCB2cC50aHJlZV9jYW1lcmEgKTtcblxuICAgIC8vIGNvbnNvbGUubG9nKHRoaXMudGhyZWVfc2NlbmVzLCB2cC50aHJlZV9jYW1lcmEpO1xuXG5cdFxuICAgIHRoaXMucmVuZGVyZXIucmVuZGVyKHRoaXMudGhyZWVfc2NlbmVzW3ZwLnNjZW5lXSwgdnAudGhyZWVfY2FtZXJhKTtcblx0XG5cdFxufVxuXG53aW5kb3cuV29ybGQucmVkcmF3U2t5ID0gZnVuY3Rpb24odnApe1xuXG5cbiAgICB2YXIgbXAgPSB2cC50aHJlZV9jYW1lcmEucGFyZW50Lm1hdHJpeC5jbG9uZSgpXG5cdHZhciBtID0gdnAudGhyZWVfY2FtZXJhLm1hdHJpeC5jbG9uZSgpXG5cdG1wLm11bHRpcGx5KG0pXG5cdHZhciBtciA9IG5ldyBUSFJFRS5NYXRyaXg0KCkuZXh0cmFjdFJvdGF0aW9uKG1wKVxuXHR2YXIgcm90ID0gbmV3IFRIUkVFLkV1bGVyKCkuc2V0RnJvbVJvdGF0aW9uTWF0cml4KG1yKVxuXHRcblx0Ly8gY29uc29sZS5sb2codnAudGhyZWVfY2FtZXJhKVxuXHR0aGlzLnNreUJveENhbWVyYVt2cC5zY2VuZV0ucm90YXRpb24uY29weSggcm90ICk7XG5cblxuXHQvL3RoaXMucmVuZGVyZXIuc2V0Vmlld3BvcnQodnAuZ2VvbS5sLCB2cC5nZW9tLnQsIHZwLmdlb20udywgdnAuZ2VvbS5oKTtcblxuXG4gICAgdGhpcy5yZW5kZXJlci5yZW5kZXIoIHRoaXMuc2t5Ym94U2NlbmVzW3ZwLnNjZW5lXSwgdGhpcy5za3lCb3hDYW1lcmFbdnAuc2NlbmVdICk7XG5cdC8vIHJlbmRlcmVyLnJlbmRlciggc2NlbmUsIGNhbWVyYSApO1xuXHQvLyBjb25zb2xlLmxvZyh0aGlzLnNreUJveC5wb3NpdGlvbilcblx0XG59XG5cbndpbmRvdy5Xb3JsZC5nZXRfbWFpbl92aWV3cG9ydCA9IGZ1bmN0aW9uKCl7XG5cdC8vY29uc29sZS5sb2codGhpcy5fbWFpbl92aWV3cG9ydCk7XG5cdHJldHVybiB0aGlzLl92aWV3cG9ydHNbdGhpcy5fbWFpbl92aWV3cG9ydF07XG59XG53aW5kb3cuV29ybGQuX2luaXRfdnBzID0gZnVuY3Rpb24oKXtcblx0dmFyIG12cCA9IHRoaXMuX3ZpZXdwb3J0c1t0aGlzLl9tYWluX3ZpZXdwb3J0XTtcblx0dmFyIHNlbGYgPSB0aGlzO1xuXHQvLyBjb25zb2xlLmxvZyhtdnApO1xuXHRtdnAuZ2VvbSA9IHt0OjAsIGw6MCwgdzp0aGlzLnZwX3dpZHRoLCBoOnRoaXMudnBfaGVpZ2h0fTtcblx0bXZwLnRocmVlX2NhbWVyYSA9IHRoaXMubWFrZUNhbWVyYShtdnApXG5cdF8uZWFjaChtdnAuVUlTLCBmdW5jdGlvbih1aSl7XG5cdFx0dWkuY29uc3RydWN0KCk7XG5cdH0pXG5cdC8vIHRoaXMuXG5cdF8uZWFjaChtdnAuYWN0b3JzLCBmdW5jdGlvbihhY3Rvcil7XG5cdFx0Ly8gZ2V0IGFjdGlvbnMgZm9yIHRoaXMgYWN0b3Jcblx0XHQvLyBjb25zb2xlLmxvZyhzZWxmLnNjZW5lQWN0aW9ucyk7XG4gICAgICAgIHZhciBzY2VuZV9ndWlkID0gc2VsZi5hY3RvclNjZW5lW2FjdG9yLkdVSURdO1xuXHRcdHZhciB0b3RhbF9hY3Rpb25zID0gc2VsZi5zY2VuZUFjdGlvbnNbc2NlbmVfZ3VpZF1bYWN0b3IuY29udHJvbC5vYmplY3RfZ3VpZF1bYWN0b3IuY29udHJvbC53b3JrcG9pbnRdO1xuXHRcdF8uZWFjaCh0b3RhbF9hY3Rpb25zLCBmdW5jdGlvbihhY3Rpb24pe1xuXHRcdFx0aWYoYWN0aW9uLmRlZmF1bHRfa2V5KXtcblx0XHRcdFx0c2VsZi5faW5wdXRfa2V5bWFwW2FjdGlvbi5kZWZhdWx0X2tleV0gPSBhY3Rpb247XG5cdFx0XHR9XG5cdFx0fSlcblx0XHQvLyBjb25zb2xlLmxvZyh0b3RhbF9hY3Rpb25zKTtcblx0fSlcblx0XG5cdHRoaXMudGhyZWVfc2NlbmVzW212cC5zY2VuZV0uYWRkKHRoaXMuY3VyKTtcblx0dGhpcy5pbml0U3BhY2UobXZwKTtcblx0XG5cdFxuXHR2YXIgc2VsZiA9IHRoaXM7XG5cdHNlbGYuSW5wdXRzID0gbmV3IENvbnRyb2xsZXIuTG9jYWxJbnB1dEFjdG9yKHNlbGYsIHNlbGYuc29ja2V0KVxuXHQvLyBzZWxmLl9jb250cmFsbGFibGUgPSBzZWxmLmNvbnRyb2xsYWJsZSgpO1xuXHRcblx0Xy5lYWNoKHRoaXMuX2FkZGl0aW9uYWxfdnBzLCBmdW5jdGlvbih2cF9uYW1lLGkpe1xuXHRcdHZhciB2cCA9IHNlbGYuX3ZpZXdwb3J0c1t2cF9uYW1lXTtcblx0XHR2cC5nZW9tID0gc2VsZi5fYWRkaXRpb25hbF92cHNfZ2VvbVtpXVxuXHRcdHZwLnRocmVlX2NhbWVyYSA9IHNlbGYubWFrZUNhbWVyYSh2cClcblx0XHRzZWxmLmluaXRTcGFjZSh2cCk7XG5cdFx0XG5cdFx0XG5cdH0pXG5cdFxufVxuXG53aW5kb3cuV29ybGQuc2V0dXBDYW1lcmFzID0gZnVuY3Rpb24oKXtcblx0dmFyIHNlbGYgPSB0aGlzO1xuXHQvLyDQodC90LDRh9Cw0LvQsCDRgdC+0YHRgtCw0LLQuNC8INGB0L/QuNGB0L7QuiDRg9C90LjQutCw0LvRjNC90YvRhSDQstGM0Y7Qv9C+0YDRgtC+0LIgLSDRgdGG0LXQvdCwLdC+0LHRitC10LrRgi3QutCw0LzQtdGA0LBcblx0c2VsZi5fdmlld3BvcnRzID0ge31cblx0c2VsZi5fdmlld3BvcnRfYW1vdW50ID0gMDtcblx0dmFyIGlzX2ZpcnN0ID0gdHJ1ZTtcblx0Ly8gdmFyIGNtYXAgPSBDb250cm9sbGVyLkNvbnRyb2xsZXJzQWN0aW9uTWFwKCk7XG5cdGNvbnNvbGUubG9nKFwic2V0dGluZyB1cCBjYW1lcmFzIHdpdGhcIiwgc2VsZi5hY3RvcnMpO1xuXHRfLmVhY2goc2VsZi5hY3RvcnMsIGZ1bmN0aW9uKGFjdG9yKXtcblx0XHQvL2NvbnNvbGUubG9nKGFjdG9yKVxuXHRcdHZhciB3cCA9IGFjdG9yLmNvbnRyb2wud29ya3BvaW50O1xuICAgICAgICB2YXIgc2NlbmVfZ3VpZCA9IHNlbGYuYWN0b3JTY2VuZVthY3Rvci5HVUlEXTtcblx0XHRjb25zb2xlLmxvZyhcInNjZW5lc1wiLCBzZWxmLnNjZW5lcywgc2NlbmVfZ3VpZCk7XG5cdFx0dmFyIHZpZXdzID0gc2VsZi5zY2VuZXNbc2NlbmVfZ3VpZF0uZ2V0X29iamVjdChhY3Rvci5jb250cm9sLm9iamVjdF9ndWlkKS53b3JrcG9pbnRzW3dwXS52aWV3c1xuXHRcdHZhciBtZXNoID0gc2VsZi5zY2VuZXNbc2NlbmVfZ3VpZF0ubWVzaGVzW2FjdG9yLmNvbnRyb2wub2JqZWN0X2d1aWRdO1xuXHRcdHZhciB1aXMgPSBtZXNoLmdldFVJRm9yV1Aod3ApO1xuXHRcdFxuXHRcdF8uZWFjaCh2aWV3cywgZnVuY3Rpb24odmlldyl7XG5cdFx0XHR2YXIgdnBfaGFzaCA9IHNjZW5lX2d1aWQgKyBhY3Rvci5jb250cm9sLm9iamVjdF9ndWlkICsgdmlldztcblx0XHRcdGlmIChpc19maXJzdCl7XG5cdFx0XHRcdHNlbGYuX21haW5fdmlld3BvcnQgPSB2cF9oYXNoO1xuXHRcdFx0fVxuXHRcdFx0Ly8gY29uc29sZS5sb2coXCIgc2hvdyBtZSBcIiwgYWN0b3IpO1xuXHRcdFx0aWYoISh2cF9oYXNoIGluIHNlbGYuX3ZpZXdwb3J0cykpe1xuXHRcdFx0XHR2YXIgdnAgPSB7c2NlbmU6c2NlbmVfZ3VpZCwgb2JqZWN0OmFjdG9yLmNvbnRyb2wub2JqZWN0X2d1aWQsIGNhbWVyYTogdmlldywgYWN0b3JzOlthY3Rvcl0sIFVJUzp1aXN9XG5cdFx0XHRcdHNlbGYuX3ZpZXdwb3J0c1t2cF9oYXNoXSA9IHZwXG5cdFx0XHRcdHNlbGYuX3ZpZXdwb3J0X2Ftb3VudCArPTE7XG5cdFx0XHR9ZWxzZXtcblx0XHRcdFx0c2VsZi5fdmlld3BvcnRzW3ZwX2hhc2hdLmFjdG9ycy5wdXNoKGFjdG9yKTtcblx0XHRcdFx0dmFyIFUgPSBzZWxmLl92aWV3cG9ydHNbdnBfaGFzaF0uVUlTO1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCBVLCBVLmNvbmNhdCh1aXMpLCB1aXMgKSA7XG5cdFx0XHRcdHNlbGYuX3ZpZXdwb3J0c1t2cF9oYXNoXS5VSVMgPSBVLmNvbmNhdCh1aXMpO1xuXHRcdFx0XHRcblx0XHRcdH1cblx0XHR9KVxuXHR9KVxuXHQvLyBzZWxmLl9tYWluX3ZpZXdwb3J0ID0gMDtcblx0Ly8gY29uc29sZS5sb2coXCJWUFwiLHNlbGYuX3ZpZXdwb3J0c1tzZWxmLl9tYWluX3ZpZXdwb3J0XSk7XG5cdC8vc2VsZi5fdmlld3BvcnRzW3NlbGYuX21haW5fdmlld3BvcnRdXG5cdHNlbGYuX2luaXRfdnBzKCk7XG5cdHZhciBzZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlld3BvcnRzLXNlbGVjdCcpO1xuXHRzZWwuaW5uZXJIdG1sID0gXCJcIjtcblx0Xy5lYWNoKHNlbGYuX3ZpZXdwb3J0cywgZnVuY3Rpb24odnAsayl7XG5cdFx0dmFyIG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpXG5cdFx0b3B0LnZhbHVlID0gaztcblx0XHRvcHQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodnAuY2FtZXJhKSlcblx0XHRzZWwuYXBwZW5kQ2hpbGQob3B0KVxuXHR9KVxuXHRcblx0XG59XG5cblxuXG53aW5kb3cuV29ybGQucmVkcmF3U3VuID0gZnVuY3Rpb24odnApe1xuXHR2YXIgbSA9IHRoaXMuc2NlbmVzW3ZwLnNjZW5lXS5tZXNoZXNbdnAub2JqZWN0XVxuXHRcblx0dmFyIHNkID0gbmV3IFRIUkVFLlZlY3RvcjMoKS5mcm9tQXJyYXkoWzAsMSwwXSkubXVsdGlwbHlTY2FsYXIoMTApOyBcblx0Ly9jb25zb2xlLmxvZyhzZCwgdGhpcy5zY2VuZXNbdnAuc2NlbmVdLl9zY2VuZS5zdW5EaXJlY3Rpb24pO1xuXHRcblx0dGhpcy5mbGFyZXNbdnAuc2NlbmVdLnBvc2l0aW9uID0gbS5wb3NpdGlvbi5jbG9uZSgpLmFkZChzZClcblx0Ly8gY29uc29sZS5sb2codGhpcy5mbGFyZXNbdnAuc2NlbmVdLnBvc2l0aW9uKVxufVxuXG53aW5kb3cuV29ybGQubWFrZUNhbWVyYSA9IGZ1bmN0aW9uKHZwICl7XG5cdHZhciBzZWxmID0gdGhpcztcblx0Ly92YXIgYWN0b3IgPSBzZWxmLmdldF9jdXJyZW50X2FjdG9yKClcblx0XG5cdC8vIGNvbnNvbGUubG9nKFwiU0VUIENBTUVSQVwiKTtcblx0Ly8gdmFyIGNvbnRyb2xsYWJsZSA9IHNlbGYuY29udHJvbGxhYmxlKClcblx0Ly8gdmFyIHdwICBcdFx0ID0gYWN0b3IuY29udHJvbC53b3JrcG9pbnRzXG5cdC8vIHZhciB2cCAgICAgICAgXHQgPSBhY3Rvci5jb250cm9sLnZpZXdwb3J0O1xuXHRcblx0dmFyIHNjZW5lID0gdnAuc2NlbmVcblx0dmFyIG9iamVjdF9pZCA9IHZwLm9iamVjdFxuXHR2YXIgcG9ydCA9IHZwLmNhbWVyYVxuXHR2YXIgbWVzaCA9IHNlbGYuc2NlbmVzW3NjZW5lXS5tZXNoZXNbb2JqZWN0X2lkXVxuXHR2YXIgb2JqZWN0ID0gc2VsZi5zY2VuZXNbc2NlbmVdLmdldF9vYmplY3Qob2JqZWN0X2lkKVxuXHRcblx0dmFyIGNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg0NSwgdnAuZ2VvbS53IC8gdnAuZ2VvbS5oLCAxLCAxMDAwKTtcblx0XG5cdHZhciB2cF9wb3MgICAgXHQgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuXHR2YXIgdnBfcm90ICBcdCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG5cdC8vIGNvbnNvbGUubG9nKG9iamVjdCwgY2FtZXJhKTtcblx0dnBfcG9zLnNldC5hcHBseSh2cF9wb3MsIG9iamVjdC5jYW1lcmFzW3BvcnRdLnBvc2l0aW9uKVxuXHR2cF9yb3Quc2V0LmFwcGx5KHZwX3JvdCwgb2JqZWN0LmNhbWVyYXNbcG9ydF0uZGlyZWN0aW9uKVxuXHRcblx0dmFyIGNhbV9iYXNlID0gbmV3IFRIUkVFLlZlY3RvcjMoMCwwLC0xKTtcblx0dmFyIGF4aXMgPSBuZXcgVEhSRUUuVmVjdG9yMygpXG5cdGF4aXMuY3Jvc3NWZWN0b3JzKGNhbV9iYXNlLCB2cF9yb3QpXG5cdHZhciBhZyA9IE1hdGguYWNvcyhjYW1fYmFzZS5kb3QodnBfcm90KS8gY2FtX2Jhc2UubGVuZ3RoKCkgLyB2cF9yb3QubGVuZ3RoKCkpXG5cdCAvL2NvbnNvbGUubG9nKGF4aXMubGVuZ3RoKCkgPT09IDAgJiYgY2FtX2Jhc2UuZXF1YWxzKCB2cF9yb3QgKSApXG5cdGlmKGF4aXMubGVuZ3RoKCkgPT09IDAgJiYgIWNhbV9iYXNlLmVxdWFscyggdnBfcm90ICkgKXtcblx0XHRheGlzID0gbmV3IFRIUkVFLlZlY3RvcjMoMCwxLDApXG5cdFx0YWcgPSBNYXRoLlBJO1xuXHRcdFxuXHR9XG5cdC8vY29uc29sZS5sb2coYXhpcyxhZywgdnBfcm90KTtcblx0Ly9jb25zb2xlLmxvZyh2cF9yb3QpXG5cdGNhbWVyYS5yb3RhdGVPbkF4aXMoYXhpcywgYWcpXG5cdFxuXHRjYW1lcmEucG9zaXRpb24gPSB2cF9wb3M7IC8vIGNvbnRyb2xsYWJsZS5wb3NpdGlvbi5jbG9uZSgpLmFkZCh2cF9wb3MpXG5cdG1lc2guYWRkKGNhbWVyYSlcblx0cmV0dXJuIGNhbWVyYVxuXHRcblx0XG59XG5cbndpbmRvdy5Xb3JsZC5zZXR1cF9zY2VuZSA9IGZ1bmN0aW9uKHNjZW5lKXtcblx0bWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe1xuXHQgICBjb2xvcjogMHhmZjAwMDAsXG5cdCAgIHdpcmVmcmFtZTogdHJ1ZVxuXHR9KTtcblx0Ly8gY29uc29sZS5sb2coc2NlbmUuX3NjZW5lKVxuXHRcblx0dmFyIHN1bkRpcmVjdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCkuZnJvbUFycmF5KFswLDEsMF0pIDtcblx0Ly90aGlzLnN1bkxpZ2h0Q29sb3IgPSBbMC4xLCAwLjcsIDAuNV07XG5cdFxuXHR2YXIgYW1iaWVudExpZ2h0ID0gbmV3IFRIUkVFLkFtYmllbnRMaWdodCgweDAxMDEwMSk7XG5cdHRoaXMudGhyZWVfc2NlbmVzW3NjZW5lLkdVSURdLmFkZChhbWJpZW50TGlnaHQpO1xuXG5cdHZhciBsaWdodCA9IG5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0KCAweEZGRkZlZSwgMSApO1xuXHQvLyBjb25zb2xlLmxvZyhcIkNPTE9SXCIsc2NlbmUuX3NjZW5lLnN1bkxpZ2h0Q29sb3IpO1xuXHRsaWdodC5jb2xvci5zZXRIU0wuYXBwbHkobGlnaHQuY29sb3IsIFtNYXRoLnJhbmRvbSgpLCAwLjgsIDAuOV0gKTtcblx0bGlnaHQucG9zaXRpb24gPSBzdW5EaXJlY3Rpb25cblxuXHR0aGlzLnRocmVlX3NjZW5lc1tzY2VuZS5HVUlEXS5hZGQoIGxpZ2h0ICk7XG5cdHRoaXMuaW5pdFN1bihzY2VuZSlcblx0XG5cdHRoaXMuc2NlbmVBY3Rpb25zW3NjZW5lLkdVSURdID0gc2NlbmUuZ2V0QWN0aW9ucygpOyAvLyDQl9C00LXRgdGMINCx0YPQtNGD0YIg0LLRgdC1INCw0LrRhtC40Lgg0L/QviDQstGB0LXQvCDRgdGG0LXQvdCw0Lxcblx0Ly8g0JPQtNC1LdGC0L4g0LfQtNC10YHRjCDQvNC+0LbQvdC+INC/0YDQuNCy0Y/Qt9Cw0YLRjCDQutC+0L3RgtGA0L7Qu9C70Ytcblx0XG59XG5cblxud2luZG93LldvcmxkLmJpbmRDYW1lcmEgPSBmdW5jdGlvbigpe1xuXHRcblx0dmFyIHNlbGYgPSB0aGlzO1xuXHQvLyBjb25zb2xlLmxvZyhzZWxmLmFjdG9ycyk7XG5cdHZhciBhY3RvciBcdFx0ID0gc2VsZi5nZXRfY3VycmVudF9hY3RvcigpO1xuXHQvL2NvbnNvbGUubG9nKGFjdG9yLmNvbnRyb2wpO1xuXHR2YXIgY29udHJvbGxhYmxlID0gc2VsZi5tZXNoZXMoKVsgYWN0b3IuY29udHJvbC5vYmplY3RfZ3VpZCBdO1xuXHRjb250cm9sbGFibGUuYWRkKCBzZWxmLmNhbWVyYSApXG5cdHNlbGYuc2V0Q2FtZXJhKCk7XG5cdFxufVxuXG5cbndpbmRvdy5Xb3JsZC5nbyA9IGZ1bmN0aW9uKCl7XG5cdHZhciBzZWxmID0gdGhpcztcblx0dmFyIGxhc3RfdGltZXN0YW1wID0gZmFsc2U7XG5cdHZhciBmaXJzdF9sb29wID0gdHJ1ZTtcblx0dmFyIHRpbWVfaW5jID0gMFxuXHQvLyBzZWxmLm1vdXNlX3Byb2plY3Rpb25fdmVjID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcblx0Ly8gdmFyIF8zZF9zY2VuZSA9IHNlbGYuc2V0dXBfc2NlbmUoc2VsZi5zY2VuZS5fM3NjZW5lKVxuXHR2YXIgX2QgPSBmYWxzZVxuXHRzZWxmLnNldHVwQ2FtZXJhcygpO1xuXHRcblx0XG5cdFxuXHQvLyB2YXIgX3RpbWVfaW50ZXJ2ID0gXG5cdFxuXHR2YXIgbWFrZVRpY2tzID0gZnVuY3Rpb24oKXtcblx0XHRfLmVhY2goc2VsZi5zY2VuZXMsIGZ1bmN0aW9uKHMsIGcpe1xuXHRcdFx0Ly9jb25zb2xlLmxvZyhcInJlY291bnQgXCIsZyk7XG5cdFx0XHRzLnRpY2soKVxuXHRcdFx0Ly9jb25zb2xlLmxvZyhcImlzIG1hZGUgc3luY3lcIik7IFxuXHRcdH0pXG5cdH1cblx0XG5cdFxuICAgIHZhciBhbmltYXRlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgLy8gaWYgKHNlbGYudG90YWxfb2JqZWN0c19jb3VudCA9PT0gc2VsZi5sb2FkZWRfb2JqZWN0c19jb3VudCl7XG4gICAgICAgIG1ha2VUaWNrcygpO1xuICAgICAgICAvL2NvbnNvbGUubG9nKHNlbGYuX3ZpZXdwb3J0cylcbiAgICAgICAgdmFyIG12cCA9IHNlbGYuZ2V0X21haW5fdmlld3BvcnQoKTtcbiAgICAgICAgdmFyIGdlb20gPSBzZWxmLl9tYWluX3ZwX2dlb21cbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJSRU5ERVJcIik7XG4gICAgICAgIC8vIEJlZm9yZSByZW5kZXJpbmcgbGV0J3MgdXBkYXRlIG91ciB1bmlmb3JtcztcbiAgICAgICAgXy5lYWNoKHNlbGYuX3VuaWZvcm1fdXBkYXRlcnMsIGZ1bmN0aW9uKGYsIG5hbWUpe1xuICAgICAgICAgICAgZigpO1xuICAgICAgICB9KVxuICAgICAgICBzZWxmLm1vdXNlX3Byb2plY3Rpb25fdmVjLnNldCggKCBzZWxmLm1vdXNlX3gvIGdlb20udyApICogMiAtIDEsIC0gKCBzZWxmLm1vdXNlX3kgLyBnZW9tLmggKSAqIDIgKyAxLCAwLjk5ICk7XG4gICAgICAgIFxuICAgICAgICBzZWxmLnJlbmRlcihtdnAsIGdlb20pO1xuICAgICAgICBfLmVhY2gobXZwLlVJUywgZnVuY3Rpb24odWkpe1xuICAgICAgICBcdHVpLnJlZnJlc2goKTtcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIHNlbGYucC51bnByb2plY3RWZWN0b3IoIHNlbGYubW91c2VfcHJvamVjdGlvbl92ZWMsIG12cC50aHJlZV9jYW1lcmEgKTtcblxuICAgICAgICBzZWxmLmN1ci5wb3NpdGlvbi5jb3B5KCBzZWxmLm1vdXNlX3Byb2plY3Rpb25fdmVjICk7XG4gICAgICAgIC8vY29uc29sZS5sb2coc2VsZi5tb3VzZV9wcm9qZWN0aW9uX3ZlYyk7XG5cblxuICAgICAgICBfLmVhY2goc2VsZi5fYWRkaXRpb25hbF92cHMsIGZ1bmN0aW9uKHZwX25hbWUsIGkpe1xuICAgICAgICAgICAgdmFyIHZwID0gc2VsZi5fdmlld3BvcnRzW3ZwX25hbWVdO1xuICAgICAgICAgICAgc2VsZi5yZW5kZXIodnAsIHNlbGYuX2FkZGl0aW9uYWxfdnBzX2dlb21baV0pXG4gICAgICAgIH0pXG4gICAgICAgIC8vfVxuICAgICAgICAgICAgXG5cdFx0U0wucmVkcmF3KCk7XG4gICAgXG5cdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpXG4gICAgXHRcbiAgICB9XG5cdHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTtcblx0XG59IiwiXG53aW5kb3cuV29ybGQubG9hZF9zY2VuZSA9IGZ1bmN0aW9uIChzY2VuZV9qcywgb25sb2FkKXtcblx0Ly8gY29uc29sZS5sb2coJ3dlbGwtd2VsbCcsIHNjZW5lLl9zY2VuZSk7XG5cdFxuXHQvLyB0aGlzLnNjZW5lcyA9IHt9XG5cdFxuXHR2YXIgc2NlbmUgPSBuZXcgU2NlbmUoKVxuXHRcblx0c2NlbmUuc2V0X2Zyb21fanNvbihzY2VuZV9qcylcblx0XG5cdFxuXHR0aGlzLnNjZW5lc1tzY2VuZS5HVUlEXSA9IHNjZW5lO1xuXHR0aGlzLnRocmVlX3NjZW5lc1tzY2VuZS5HVUlEXSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xuXHQvLyBjb25zb2xlLmxvZyhcIldXV1wiLCBvbmxvYWQpO1xuXHRzY2VuZS5sb2FkKG9ubG9hZCwgdGhpcy50aHJlZV9zY2VuZXNbc2NlbmUuR1VJRF0sIHRoaXMgKVxuXHRcblx0Ly8gXG5cdC8vY29uc29sZS5sb2coXCJsb2FkaW5nIHRoaXMgc2NlbmVcIiwgc2NlbmUuR1VJRCk7XG5cbn1cblxud2luZG93LldvcmxkLmluaXRTdW4gPSBmdW5jdGlvbihzY2VuZSl7XG5cdFxuXHR2YXIgZmxhcmVDb2xvciA9IG5ldyBUSFJFRS5Db2xvciggMHhmZmZmZmYgKTtcblx0dmFyIHNsID0gXy5jbG9uZShbTWF0aC5yYW5kb20oKSwgMC44LCAwLjldKTtcblx0c2xbMl0gKz0gMC41XG5cdGZsYXJlQ29sb3Iuc2V0SFNMLmFwcGx5KGZsYXJlQ29sb3IsIHNsKTtcblx0XG5cdHZhciB0ZXh0dXJlRmxhcmUwID0gVEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZSggXCIvdGV4dHVyZXMvbGVuc2ZsYXJlL2xlbnNmbGFyZTAucG5nXCIgKTtcblx0dmFyIHRleHR1cmVGbGFyZTIgPSBUSFJFRS5JbWFnZVV0aWxzLmxvYWRUZXh0dXJlKCBcIi90ZXh0dXJlcy9sZW5zZmxhcmUvbGVuc2ZsYXJlMi5wbmdcIiApO1xuXHR2YXIgdGV4dHVyZUZsYXJlMyA9IFRIUkVFLkltYWdlVXRpbHMubG9hZFRleHR1cmUoIFwiL3RleHR1cmVzL2xlbnNmbGFyZS9sZW5zZmxhcmUzLnBuZ1wiICk7XG5cdFxuXHR2YXIgbGVuc0ZsYXJlID0gbmV3IFRIUkVFLkxlbnNGbGFyZSggdGV4dHVyZUZsYXJlMCwgNzAwLCAwLjAsIFRIUkVFLkFkZGl0aXZlQmxlbmRpbmcsIGZsYXJlQ29sb3IgKTtcblxuXHRsZW5zRmxhcmUuYWRkKCB0ZXh0dXJlRmxhcmUyLCA1MTIsIDAuMCwgVEhSRUUuQWRkaXRpdmVCbGVuZGluZyApO1xuXHRsZW5zRmxhcmUuYWRkKCB0ZXh0dXJlRmxhcmUyLCA1MTIsIDAuMCwgVEhSRUUuQWRkaXRpdmVCbGVuZGluZyApO1xuXHRsZW5zRmxhcmUuYWRkKCB0ZXh0dXJlRmxhcmUyLCA1MTIsIDAuMCwgVEhSRUUuQWRkaXRpdmVCbGVuZGluZyApO1xuXG5cdGxlbnNGbGFyZS5hZGQoIHRleHR1cmVGbGFyZTMsIDYwLCAwLjYsIFRIUkVFLkFkZGl0aXZlQmxlbmRpbmcgKTtcblx0bGVuc0ZsYXJlLmFkZCggdGV4dHVyZUZsYXJlMywgNzAsIDAuNywgVEhSRUUuQWRkaXRpdmVCbGVuZGluZyApO1xuXHRsZW5zRmxhcmUuYWRkKCB0ZXh0dXJlRmxhcmUzLCAxMjAsIDAuOSwgVEhSRUUuQWRkaXRpdmVCbGVuZGluZyApO1xuXHRsZW5zRmxhcmUuYWRkKCB0ZXh0dXJlRmxhcmUzLCA3MCwgMS4wLCBUSFJFRS5BZGRpdGl2ZUJsZW5kaW5nICk7XG5cdHZhciBsZW5zRmxhcmVVcGRhdGVDYWxsYmFjayA9IGZ1bmN0aW9uICggb2JqZWN0ICkge1xuXG5cdFx0dmFyIGYsIGZsID0gb2JqZWN0LmxlbnNGbGFyZXMubGVuZ3RoO1xuXHRcdHZhciBmbGFyZTtcblx0XHR2YXIgdmVjWCA9IC1vYmplY3QucG9zaXRpb25TY3JlZW4ueCAqIDI7XG5cdFx0dmFyIHZlY1kgPSAtb2JqZWN0LnBvc2l0aW9uU2NyZWVuLnkgKiAyO1xuXG5cblx0XHRmb3IoIGYgPSAwOyBmIDwgZmw7IGYrKyApIHtcblxuXHRcdFx0ICAgZmxhcmUgPSBvYmplY3QubGVuc0ZsYXJlc1sgZiBdO1xuXG5cdFx0XHQgICBmbGFyZS54ID0gb2JqZWN0LnBvc2l0aW9uU2NyZWVuLnggKyB2ZWNYICogZmxhcmUuZGlzdGFuY2U7XG5cdFx0XHQgICBmbGFyZS55ID0gb2JqZWN0LnBvc2l0aW9uU2NyZWVuLnkgKyB2ZWNZICogZmxhcmUuZGlzdGFuY2U7XG5cblx0XHRcdCAgIGZsYXJlLnJvdGF0aW9uID0gMDtcblxuXHRcdH1cblxuXHRcdG9iamVjdC5sZW5zRmxhcmVzWyAyIF0ueSArPSAwLjAyNTtcblx0XHRvYmplY3QubGVuc0ZsYXJlc1sgMyBdLnJvdGF0aW9uID0gb2JqZWN0LnBvc2l0aW9uU2NyZWVuLnggKiAwLjUgKyBUSFJFRS5NYXRoLmRlZ1RvUmFkKCA0NSApO1xuXG5cdH1cblx0bGVuc0ZsYXJlLmN1c3RvbVVwZGF0ZUNhbGxiYWNrID0gbGVuc0ZsYXJlVXBkYXRlQ2FsbGJhY2s7XG5cdGxlbnNGbGFyZS5wb3NpdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCkuZnJvbUFycmF5KFswLDEsMF0pLm11bHRpcGx5U2NhbGFyKDUwMClcblx0XG5cdFxuXHQvLyB0aGlzLnN1bkJpbGxib2FyZCA9IG5ldyBUSFJFRS5TcHJpdGUodGV4dHVyZUZsYXJlMCApXG5cdHRoaXMudGhyZWVfc2NlbmVzW3NjZW5lLkdVSURdLmFkZChsZW5zRmxhcmUpXG5cdHRoaXMuZmxhcmVzW3NjZW5lLkdVSURdID0gbGVuc0ZsYXJlO1xufVxud2luZG93LldvcmxkLmluaXRTcGFjZSAgPSBmdW5jdGlvbih2cCl7XG5cblx0dmFyIHBhdGggPSBcIi90ZXh0dXJlcy9zcGFjZS9tMDFfY3ViZVwiO1xuXHR2YXIgZm9ybWF0ID0gJ3BuZyc7XG5cdHZhciB1cmxzID0gW1xuXHRcdHBhdGggKyAnLnB4LicgKyBmb3JtYXQsIHBhdGggKyAnLm54LicgKyBmb3JtYXQsXG5cdFx0cGF0aCArICcucHkuJyArIGZvcm1hdCwgcGF0aCArICcubnkuJyArIGZvcm1hdCxcblx0XHRwYXRoICsgJy5wei4nICsgZm9ybWF0LCBwYXRoICsgJy5uei4nICsgZm9ybWF0XG5cdF07XG5cblx0dmFyIHRleHR1cmVDdWJlID0gVEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZUN1YmUoIHVybHMgKTtcblx0dmFyIHNoYWRlciA9IFRIUkVFLlNoYWRlckxpYlsgXCJjdWJlXCIgXTtcblx0c2hhZGVyLnVuaWZvcm1zWyBcInRDdWJlXCIgXS52YWx1ZSA9IHRleHR1cmVDdWJlO1xuXG5cdHZhciBtYXRlcmlhbCA9IG5ldyBUSFJFRS5TaGFkZXJNYXRlcmlhbCgge1xuXG5cdFx0ZnJhZ21lbnRTaGFkZXI6IHNoYWRlci5mcmFnbWVudFNoYWRlcixcblx0XHR2ZXJ0ZXhTaGFkZXI6IHNoYWRlci52ZXJ0ZXhTaGFkZXIsXG5cdFx0dW5pZm9ybXM6IHNoYWRlci51bmlmb3Jtcyxcblx0XHRkZXB0aFdyaXRlOiBmYWxzZSxcblx0XHRzaWRlOiBUSFJFRS5CYWNrU2lkZVxuXG5cdH0gKTtcblx0dGhpcy5za3lib3hTY2VuZXNbdnAuc2NlbmVdID0gbmV3IFRIUkVFLlNjZW5lKCk7XG5cdHZhciBtID0gbmV3IFRIUkVFLk1lc2goIG5ldyBUSFJFRS5DdWJlR2VvbWV0cnkoIDkwMDAsIDkwMDAsIDkwMDAgKSwgbWF0ZXJpYWwgKTtcblx0dGhpcy5za3lCb3hlc1t2cC5zY2VuZV0gICA9IG1cblx0XG5cdHRoaXMuc2t5Qm94Q2FtZXJhW3ZwLnNjZW5lXSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg0NSwgdnAuZ2VvbS53IC8gdnAuZ2VvbS5oLCAxLCAxMDAwMCk7XG5cdHRoaXMuc2t5Ym94U2NlbmVzW3ZwLnNjZW5lXS5hZGQobSk7XG59XG5cblxuLy8gVmllcG9ydCBmdW5jdGlvbnNcbndpbmRvdy5Xb3JsZC5tYWtlX21haW4gPSBmdW5jdGlvbihzY2VuZSl7XG5cdHZhciBzZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlld3BvcnRzLXNlbGVjdCcpO1xuXHR0aGlzLl9tYWluX3ZpZXdwb3J0ID0gc2VsLm9wdGlvbnNbc2VsLnNlbGVjdGVkSW5kZXhdLnZhbHVlO1xuXHR0aGlzLl9pbml0X3ZwcygpXG59XG53aW5kb3cuV29ybGQuYWRkX2ljb24gPSBmdW5jdGlvbihzY2VuZSl7XG5cdHZhciBzZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlld3BvcnRzLXNlbGVjdCcpO1xuXHRhZGRfdnAgPSBzZWwub3B0aW9uc1tzZWwuc2VsZWN0ZWRJbmRleF0udmFsdWU7XG5cdGlmKHRoaXMuX2FkZGl0aW9uYWxfdnBzLmxlbmd0aCA9PSAzKXtcblx0XHR0aGlzLl9hZGRpdGlvbmFsX3Zwc1syXSA9PSBhZGRfdnA7XG5cdFx0XG5cdH1lbHNle1xuXHRcdHRoaXMuX2FkZGl0aW9uYWxfdnBzLnB1c2goYWRkX3ZwKTtcblx0fVxuXHR0aGlzLl9pbml0X3ZwcygpXG5cdFxuXHRcbn1cblxud2luZG93LldvcmxkLm1lc2hlcyA9IGZ1bmN0aW9uKCl7XG5cdHJldHVybiB0aGlzLnNjZW5lLm1lc2hlc1xufVxuXG5cbndpbmRvdy5Xb3JsZC5jb250cm9sbGFibGUgPSBmdW5jdGlvbigpe1xuXHR2YXIgbXZwID0gdGhpcy5nZXRfbWFpbl92aWV3cG9ydCgpO1xuXHQvLyBjb25zb2xlLmxvZyhcIk1NTVwiLCBtdnApXG5cdHJldHVybiB0aGlzLnNjZW5lc1ttdnAuc2NlbmVdLm1lc2hlc1ttdnAub2JqZWN0XVxufVxud2luZG93LldvcmxkLm1lc2hfZm9yID0gZnVuY3Rpb24oYWN0b3Ipe1xuXHQvL2NvbnNvbGUubG9nKFwiPj4+XCIsdGhpcy5tZXNoZXMoKVt0aGlzLnNjZW5lLmFjdG9yc1thY3Rvcl0uY29udHJvbC5vYmplY3RfZ3VpZF0pO1xuXHRyZXR1cm4gdGhpcy5tZXNoZXMoKVt0aGlzLnNjZW5lLmFjdG9yc1thY3Rvcl0uY29udHJvbC5vYmplY3RfZ3VpZF1cbn1cblxuXG53aW5kb3cuV29ybGQuZ2V0X2N1cnJlbnRfYWN0b3IgPSBmdW5jdGlvbigpe1xuXHR2YXIgc2VsZiA9IHRoaXM7XG5cdHJldHVybiBzZWxmLnNjZW5lLmFjdG9yc1tzZWxmLmxvZ2luXVxufSIsImZ1bmN0aW9uIHNvY2tldFNlcnZpY2UobGlzdGVuZXIpe1xuICAgIFxuICAgIHZhciBhdXRoSGFzaEYgPSBmdW5jdGlvbihjYil7XG4gICAgICAgIHZhciBkID0gUS5kZWZlcigpO1xuICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIHhoci5vcGVuKCdHRVQnLCAnL215LWF1dGgtaGFzaC8nLCB0cnVlKTtcbiAgICAgICAgeGhyLnNlbmQoKTtcbiAgICAgICAgXG4gICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PSA0KSB7XG4gICAgICAgICAgICAgICAgIGlmKHhoci5zdGF0dXMgPT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgICB2YXIganMgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgY2IoanMpO1xuICAgICAgICAgICAgICAgICAgICAgLy9hbGVydC8oeG1saHR0cC5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBcbiAgICB9XG4gICAgdmFyIHNvY2tldCA9IGlvLmNvbm5lY3QoKTtcbiAgICB2YXIgaXNfcmVhZHkgPSBmYWxzZTtcbiAgICB2YXIgUXVldWUgPSBbXTtcbiAgICBcbiAgICBpc19hdXRoZW50aWNhdGVkID0gUS5kZWZlcigpO1xuICAgIHNvY2tldC5vbignY29ubmVjdGVkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcInJlY29ubmVjdGlvblwiKTtcbiAgICAgICAgYXV0aEhhc2hGKGZ1bmN0aW9uKGpzb24pe1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCI+Pj5cIixqc29uKTtcbiAgICAgICAgICAgIHNvY2tldC5lbWl0KFwiYXV0aF9oYXNoXCIsIHthdXRoOiBqc29uLmhhc2h9KTtcbiAgICAgICAgfSlcbiAgICB9KVxuICAgIHNvY2tldC5vbihcImF1dGhfY29tcGxldGVkXCIsIGZ1bmN0aW9uKG1zZyl7XG4gICAgICAgIGlmKG1zZy5lcnIpe1xuICAgICAgICAgICAgaXNfYXV0aGVudGljYXRlZC5yZWplY3QobXNnLmVycik7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIj4+XCIpO1xuICAgICAgICAgICAgaXNfYXV0aGVudGljYXRlZC5yZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgLy8kcm9vdFNjb3BlLiRhcHBseShmdW5jdGlvbigpe2lzX2F1dGhlbnRpY2F0ZWQucmVzb2x2ZSh0cnVlKX0pXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfSlcbiAgICAvLyBjb25zb2xlLmxvZyhpc19hdXRoZW50aWNhdGVkKTtcbiAgICBpc19hdXRoZW50aWNhdGVkLnByb21pc2UudGhlbihmdW5jdGlvbihzLGUpe1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhpc19hdXRoZW50aWNhdGVkLCBzLGUpO1xuICAgICAgICBpc19yZWFkeSA9IHRydWU7XG4gICAgICAgIGZvcih2YXIgaSA9MDtpIDxRdWV1ZS5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICBzb2NrZXQuZW1pdChRdWV1ZVtpXS5ULCBRdWV1ZVtpXS5wKTtcbiAgICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgdmFyIFMgPSB7fTtcbiAgICB2YXIgY2JzID0ge307XG4gICAgdmFyIGN1cmNiaXggPSAwO1xuICAgIGZ1bmN0aW9uIGdldENCSXgoKXtcbiAgICAgICAgY3VyY2JpeCs9MTtcbiAgICAgICAgcmV0dXJuIGN1cmNiaXggJSAxMDAwMDtcbiAgICB9O1xuICAgIFxuICAgIHZhciBSZXEgPSBmdW5jdGlvbihtdCwgdCwgcCl7XG4gICAgICAgIHZhciBkID0gUS5kZWZlcigpLFxuICAgICAgICBjYml4ID0gIGdldENCSXgoKTtcbiAgICAgICAgY2JzW2NiaXhdID0ge1xuICAgICAgICAgICAgY2I6IGRcbiAgICAgICAgfVxuICAgICAgICB2YXIgbyA9IHtwOnB9O1xuICAgICAgICBvLmNiaXggPSBjYml4O1xuICAgICAgICBvLlQgPSB0O1xuICAgICAgICBpZighaXNfcmVhZHkpe1xuICAgICAgICAgICAgUXVldWUucHVzaCh7VDptdCxwOm99KTtcbiAgICAgICAgICAgIFxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHNvY2tldC5lbWl0KG10LCBvKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGQucHJvbWlzZTtcbiAgICB9XG4gICAgXG4gICAgdmFyIG1lc3NhZ2VzX3RvX2hlYXIgPSBbXCJRXCIsIFwiUlwiLCAnUyddO1xuICAgIF8uZWFjaChtZXNzYWdlc190b19oZWFyLCBmdW5jdGlvbihtZXNzYWdlX3R5cGUpe1xuICAgICAgICBzb2NrZXQub24obWVzc2FnZV90eXBlLCBmdW5jdGlvbihtc2cpe1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJSPj4+XCIsIG1zZyk7XG4gICAgICAgICAgICB2YXIgY2JpeCA9IG1zZy5jYml4O1xuICAgICAgICAgICAgaWYoY2JzLmhhc093blByb3BlcnR5KGNiaXgpKSB7XG4gICAgICAgICAgICAgICAgY2JzW2NiaXhdLmNiLnJlc29sdmUobXNnLmQpXG4gICAgICAgICAgICAgICAgZGVsZXRlIGNic1tjYml4XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgfSlcbiAgICBcbiAgICBzb2NrZXQub24oJ0YnLCBmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgbGlzdGVuZXIoXCJGXCIsIGRhdGEpO1xuICAgIH0gKTtcbiAgICBzb2NrZXQub24oXCJBTE1cIiwgZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgIGxpc3RlbmVyKFwiQUxNXCIsIGRhdGEpO1xuXG4gICAgfSlcbiAgICBcbiAgICBTLmdldCA9IGZ1bmN0aW9uKHQscCl7XG4gICAgICAgIHJldHVybiBSZXEoXCJRXCIsIHQscClcbiAgICB9XG4gICAgUy5zeW5jID0gZnVuY3Rpb24oKXtcbiAgICAgICAgcmV0dXJuIFJlcShcIlNcIiwnJyx7fSlcbiAgICB9XG4gICAgUy5yZXF1ZXN0ID0gZnVuY3Rpb24odCxwKXtcbiAgICAgICAgcmV0dXJuIFJlcShcIlJcIiwgdCxwKVxuICAgIH1cbiAgICBTLmFjdGlvbiA9ZnVuY3Rpb24obWVzcyl7XG4gICAgICAgIHNvY2tldC5lbWl0KFwiQVwiLG1lc3MpXG4gICAgfVxuICAgIHJldHVybiBTO1xufVxuXG53aW5kb3cuV29ybGQuaW5pdF9zb2NrZXQgPSBmdW5jdGlvbigpe1xuXHQvLyBjb25zb2xlLmxvZyhcImluaXQgc29ja2V0XCIpO1xuXHR2YXIgb3JpZ2luID0gd2luZG93LmxvY2F0aW9uLm9yaWdpblxuXHQvL2NvbnNvbGUubG9nKFwiV2hhdCBpZiBJIHRyeSB0byBkbyBpdCB0d2ljZVwiKTtcblx0dmFyIHNvY2tldCA9IGlvLmNvbm5lY3Qob3JpZ2luKTtcblx0dGhpcy5zb2NrZXQgPSBzb2NrZXQ7XG5cdHZhciBzZWxmID0gdGhpcztcbiAgICAvLyBjb25zb2xlLmxvZyhcIkJcIik7XG4gICAgXG4gICAgdGhpcy5zb2NrZXRfc3J2ID0gc29ja2V0U2VydmljZShmdW5jdGlvbih0eXBlLCBkYXRhKXtcbiAgICAgICAgc3dpdGNoKHR5cGUpe1xuICAgICAgICBjYXNlIFwiQUxNXCI6XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhLmFsbWFuYWNoKTtcbiAgICAgICAgICAgIGlmKHNlbGYuc2NlbmVzW2RhdGEuc2NlbmVdICE9PSB1bmRlZmluZWQpe1xuICAgICAgICAgICAgICAgIHNlbGYuc2NlbmVzW2RhdGEuc2NlbmVdLnN5bmMoZGF0YS5hbG1hbmFjaCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiRlwiOlxuICAgICAgICAgICAgc2VsZi5zY2VuZXNbZGF0YS5zXS5hZGROZXR3b3JrTWVzc2FnZShkYXRhLmEpO1xuICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICApO1xuICAgIC8vIGNvbnNvbGUubG9nKFwiQVwiKTtcbiAgICBcbiAgICB2YXIgc2NlbmVzX2luX3Byb2Nlc3MgPSBbXTtcbiAgICBcbiAgICB0aGlzLnNvY2tldF9zcnYucmVxdWVzdChcIkNUWFwiLHt1c2VyX2lkOnRydWV9KVxuICAgIC50aGVuKGZ1bmN0aW9uKGN0eCl7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiY3R4IHJlY2VpdmVkXCIsIGN0eCk7XG4gICAgICAgIHNlbGYuc3luY1RpbWUoKVxuICAgICAgICBcbiAgICAgICAgdmFyIHRvdGFsX3NjZW5lcyAgPSAwO1xuICAgICAgICB2YXIgbG9hZGVkX3NjZW5lcyA9IDA7XG4gICAgICAgIF8uZWFjaChjdHguY29udGV4dHMsIGZ1bmN0aW9uKHNjZW5lX2Rlc2MsIGFjdG9yX2d1aWQpe1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJDVFhlc1wiLCBzY2VuZV9kZXNjLCBhY3Rvcl9ndWlkKVxuICAgICAgICAgICAgdmFyIHNjZW5lX2d1aWQgPSBzY2VuZV9kZXNjLkdVSUQ7XG4gICAgICAgICAgICBpZihzY2VuZXNfaW5fcHJvY2Vzcy5pbmRleE9mKCBzY2VuZV9ndWlkICApICE9PSAtMSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgc2NlbmVzX2luX3Byb2Nlc3MucHVzaChzY2VuZV9ndWlkKTtcbiAgICAgICAgICAgICAgICB0b3RhbF9zY2VuZXMgKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBvYmplY3RzID0gc2NlbmVfZGVzYy5vYmplY3RzO1xuICAgICAgICAgICAgdmFyIHNjZW5lX2FjdG9ycyA9IHNjZW5lX2Rlc2MuYWN0b3JzO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgb3Nwcm9taXNlcyA9IFtdO1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIlNEXCIsIHNjZW5lX2Rlc2MpO1xuICAgICAgICAgICAgXy5lYWNoKG9iamVjdHMsIGZ1bmN0aW9uKG9ndWlkKXtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwib1wiLCBvZ3VpZCk7XG4gICAgICAgICAgICAgICAgdmFyIHAgPSBzZWxmLnNvY2tldF9zcnYuZ2V0KFwiQVwiLCB7aWQ6b2d1aWR9ICkgXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ob2JqKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuc29ja2V0X3Nydi5nZXQoXCJUXCIsIHt0eXBlOiBvYmouc2hpcF90eXBlfSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24odCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYmouc2hpcF90eXBlID0gdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJUXCIsIG9iai5zaGlwX3R5cGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgb3Nwcm9taXNlcy5wdXNoKHApO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFEuYWxsKG9zcHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24ob2JqZWN0cyl7XG4gICAgICAgICAgICAgICAgdmFyIGFjdG9yc19sb2FkZWQgPSBmYWxzZSBcbiAgICAgICAgICAgIFx0c2VsZi50aHJlZV9zY2VuZXNbc2NlbmVfZ3VpZF0gPSBuZXcgVEhSRUUuU2NlbmUoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIFx0dmFyIHNjZW5lID0gbmV3IFNjZW5lKHNlbGYudGhyZWVfc2NlbmVzW3NjZW5lX2d1aWRdLCBzZWxmKVxuICAgICAgICAgICAgICAgIHNjZW5lLkdVSUQgPSBzY2VuZV9ndWlkO1xuICAgICAgICAgICAgICAgIHNjZW5lLm9uTG9hZENhbGxiYWNrID0gZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNldHVwX3NjZW5lKHNjZW5lKTtcbiAgICAgICAgICAgICAgICAgICAgbG9hZGVkX3NjZW5lcyArPTE7XG4gICAgICAgICAgICAgICAgICAgIGlmKGxvYWRlZF9zY2VuZXMgPT09IHRvdGFsX3NjZW5lcyApe1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJhbGxfbG9hZGVkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5nbygpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICBcdHNlbGYuc2NlbmVzW3NjZW5lX2d1aWRdID0gc2NlbmU7XG5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBfLmVhY2goc2NlbmVfYWN0b3JzLCBmdW5jdGlvbihhY3Qpe1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdC5HVUlEID09PSAgYWN0b3JfZ3VpZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFjdG9yc1thY3Rvcl9ndWlkXSA9IGFjdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYWN0b3JTY2VuZVthY3Rvcl9ndWlkXSA9IHNjZW5lX2d1aWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc2NlbmUuam9pbl9hY3RvcihhY3QpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgXy5lYWNoKG9iamVjdHMsIGZ1bmN0aW9uKG9iail7XG4gICAgICAgICAgICAgICAgICAgIHNjZW5lLmpvaW5fb2JqZWN0KG9iaiwgb2JqLkdVSUQpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5zdGFjayk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH0pXG4gICAgLypcblx0dGhpcy5zb2NrZXQub24oJ2Nvbm5lY3RlZCcsIGZ1bmN0aW9uKGQpe1xuXHRcdC8vY29uc29sZS5sb2coXCI+PlwiKVxuXHRcdFxuXHRcdHNlbGYuc29ja2V0LmVtaXQoXCJhdXRoX2hhc2hcIiwge2F1dGg6c2VsZi5hdXRoX2hhc2h9KVxuXHRcdFxuXHRcdC8vIFxuXHRcdFxuXHRcdFxuXHR9KVxuXHR0aGlzLnNvY2tldC5vbignc2VydmVyX2ZhdWx0JywgZnVuY3Rpb24oKXtcblx0XHQvLyB3aW5kb3cubG9jYXRpb24gPSBcIi9jb25zb2xlL1wiXG5cdFx0Ly8gY29uc29sZS5sb2coXCJBQUFcIik7XG5cdH0pXG5cdHRoaXMuc29ja2V0Lm9uKCdjb250ZXh0cycsIGZ1bmN0aW9uKGRhdGEpe1xuXHRcdC8vINCX0LTQtdGB0Ywg0LzRiyDQv9C+0LvRg9GH0LDQtdC8INCy0YHQtdGFINCw0LrRgtC+0YDQvtCyLCDQutC+0YLQvtGA0YvQtSDQv9GA0LjRgdGD0YnQuCDQtNC70Y8g0Y3RgtC+0LPQviDQu9C+0LPQuNC90LAgLSDQuNGFINC80L7QttC10YIg0L7QutCw0LfQsNGC0YzRgdGPINC90LXRgdC60L7Qu9GM0LrQviDQuCDQtNC70Y8g0L3QuNGFINC80L7Qs9GD0YIg0LHRi9GC0Ywg0YDQsNC30L3Ri9C1INGB0YbQtdC90YtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKFwicmVjaWV2ZWQgZGF0YSBcIiwgZGF0YSk7XG5cdFx0Ly92YXIgYWN0b3JzID0gZGF0YS5hY3RvcnM7XG5cdFx0Ly9zZWxmLmFjdG9ycyA9IGFjdG9ycyAvLyDQl9C00LXRgdGMINGB0L/QuNGB0L7QuiDQstGB0LXRhSDQsNC60YLQvtGA0L7Qsiwg0LrQvtGC0L7RgNGL0LUg0YLQsNC6INC40LvQuCDQuNC90LDRh9C1INGB0LLRj9C30LDQvdGLINGBINC90LDRiNC40Lwg0LvQvtCz0LjQvdC+0Lxcblx0XHQvL2NvbnNvbGUubG9nKCdhY3RvcnMnLCBhY3RvcnMpO1xuXHRcdHNlbGYuc3luY1RpbWUoKVxuXHRcdFxuXHRcdC8vdmFyIHNjZW5lcyA9IF8ubWFwKHNlbGYuYWN0b3JzLCBmdW5jdGlvbihhY3Rvcil7XG5cdFx0Ly9cdHJldHVybiBhY3Rvci5zY2VuZVxuXHRcdFx0XG5cdFx0Ly8gfSlcblx0XHQvLyDQl9Cw0L/RgNCw0YjQuNCy0LDQtdC8INC30LDQs9GA0YPQt9C60YMg0LLRgdC10YUg0YHRhtC10L0g0LTQu9GPINGN0YLQvtCz0L4g0LDQutGC0L7RgNCwIC0g0L/QviDQuNC00LXQvdGC0LjRhNC40LrQsNGC0L7RgNCw0Lwg0YHRhtC10L1cblx0XHRcblx0XHQvLyBjb25zb2xlLmxvZyhcIlJlcSBzY2VuZXNcIiwgXy51bmlxKHNjZW5lcykpXG5cdFx0Ly8gc2VsZi5zb2NrZXQuZW1pdChcInJlcXVlc3Rfc2NlbmVzXCIsIHtzY2VuZXM6Xy51bmlxKHNjZW5lcyl9KVxuXHRcdFxuXHRcdC8vIGNvbnNvbGUubG9nKFwiUmVjdiBBY3RvcnNcIixhY3RvcnMpXG5cdFx0c2VsZi5fcGxheWVyX3ZpZXdwb3J0cyA9IF8ua2V5cyhkYXRhLmNvbnRleHQpLmxlbmd0aDtcblx0XHQvLyBzZWxmLmdvKCkgLy8g0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INCw0LrRgtC+0YDQvtCyINC/0L7Qv9GA0L7QsdGD0LXQvCDQt9Cw0L/Rg9GB0YLQuNGC0Ywg0Y3QvNGD0LvRj9GG0LjRjlxuICAgICAgICBsb2FkZWRfc2NlbmVzID0gW107XG4gICAgICAgIF8uZWFjaChkYXRhLmNvbnRleHRzLCBmdW5jdGlvbihzY2VuZV9jdHgsIGFjdG9yX2d1aWQpe1xuICAgICAgICAgICAgaWYgKHNjZW5lX2N0eCBpbiBsb2FkZWRfc2NlbmVzKXtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYWN0b3JzX2luX3NjZW5lID0gc2NlbmVfY3R4LmFjdG9ycztcbiAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IHNjZW5lX2N0eC5sb2NhdGlvbjtcbiAgICAgICAgICAgIHZhciBvYmplY3RfZ3VpZHMgPSBzY2VuZV9jdHgub2JqZWN0cztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYXN5bmNSZXEgPSBmdW5jdGlvbihxKXtcbiAgICAgICAgICAgICAgICB2YXIgZCA9IHEuZGVmZXIoKTtcbiAgICAgICAgICAgICAgICBzb2NrZXQuZW1pdChxLnR5cGUsIHEuZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIF8uZWFjaChvYmplY3RfZ3VpZHMsZnVuY3Rpb24ob0dVSUQpe1xuICAgICAgICAgICAgICAgIG9HVUlEXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIFxuXHR9KVxuXHRcblx0dGhpcy5zb2NrZXQub24oJ3NjZW5lcycsIGZ1bmN0aW9uKGRhdGEpe1xuXHRcdC8vY29uc29sZS5sb2coJ3NjZW5lcycsIGRhdGEuc2NlbmVzKTtcblx0XHR2YXIgZ3VpZHMgPSBfLmtleXMoZGF0YS5zY2VuZXMpXG5cdFx0dmFyIF90b3RhbHMgPSAwXG5cdFx0dmFyIGFsbF9sb2FkZWQgPSBmdW5jdGlvbigpe1xuXHRcdFx0c2VsZi5nbygpO1x0XG5cdFx0XHQvLyBjb25zb2xlLmxvZyhcInJlY3Ygc2NlbmVzXCIsIHNlbGYuc2NlbmVzKVxuXHRcdFx0c2VsZi5uZXR3b3JrX2FjdG9yID0gbmV3IENvbnRyb2xsZXIuTmV0d29ya0FjdG9yKCBmdW5jdGlvbigpe30sIHNlbGYpXG5cdFx0fVxuXHRcdHZhciBvbmxvYWQgPSBmdW5jdGlvbihzY2VuZSl7XG5cdFx0XHQvLyBjb25zb2xlLmxvZygnbG9hZGVkJyk7XG5cdFx0XHR2YXIgb25BY3QgPSBmdW5jdGlvbigpe1xuXHRcdFx0XHQvL2NvbnNvbGUubG9nKCdhY3Qgb24gY2xpZW50Jylcblx0XHRcdH1cblx0XHRcdF90b3RhbHMgKz0xXG5cdFx0XHRzZWxmLnNldHVwX3NjZW5lKHNjZW5lKTtcblx0XHRcdF8uZWFjaChzZWxmLmFjdG9ycywgZnVuY3Rpb24oYSl7XG5cdFx0XHRcdGlmIChhLkdVSUQgaW4gc2NlbmUuYWN0b3JzKXtcblx0XHRcdFx0XHRzZWxmLnNvY2tldC5lbWl0KFwiYWN0b3Itam9pbmVkXCIse2E6YSwgczpzY2VuZS5HVUlEfSApXG5cdFx0XHRcdFx0Ly9jb25zb2xlLmxvZyhcInRoaXMgYWN0b3IgaXMgZm9yIG1lXCIsIGEuR1VJRCwgc2NlbmUuR1VJRClcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdH0pXG5cdFx0XHQvLyBzZWxmLnNvY2tldC5lbWl0KFwicGxheWVyLWpvaW5lZFwiLCB7c2NlbmU6c2NlbmUuR1VJRCwgfSlcblx0XHRcdFxuXHRcdFx0Ly8gY29uc29sZS5sb2coXCJXQVRcIixfdG90YWxzLCBndWlkcy5sZW5ndGgpXG5cdFx0XHRpZihfdG90YWxzID09IGd1aWRzLmxlbmd0aCl7XG5cdFx0XHRcdGFsbF9sb2FkZWQoKVxuXHRcdFx0fVxuXHRcdFx0Ly8gXG5cdFx0XHQvLyBcblx0XHR9XG5cdFx0Xy5lYWNoKGRhdGEuc2NlbmVzLCBmdW5jdGlvbihzY2VuZSwgZ3VpZCl7XG5cdFx0XHQvLyBjb25zb2xlLmxvZygnd2VsbCcsIHNjZW5lKTtcblx0XHRcdHNlbGYubG9hZF9zY2VuZShzY2VuZSAsIG9ubG9hZClcblx0XHRcdC8vY29uc29sZS5sb2coJ3dlbGwnLCBzY2VuZS5fc2NlbmUpO1xuXHRcdFx0XG5cdFx0fSlcblx0XHRcblx0fSlcblx0dGhpcy5zb2NrZXQub24oJ2FjdG9yLWpvaW5lZCcsIGZ1bmN0aW9uKGRhdGEpe1xuXHRcdC8vIGNvbnNvbGUubG9nKCdqb2luaW5nIGFjdG9yJywgZGF0YSk7XG5cdFx0Ly8gY29uc29sZS5sb2coc2VsZi5hY3RvcnMpXG5cdFx0Ly8g0JDQutGC0L7RgCDQvNC+0LbQtdGCINC00LbQvtC50L3QuNGC0Ywg0YPQttC1INGB0YPRidC10YHRgtCy0YPRjtGJ0LjQuSDQsiDRgdGG0LXQvdC1IC0g0L3QsNC00L4g0L/QtdGA0LXQtNC10LvRi9Cy0LDRgtGMINCy0YzRjtC/0L7RgNGC0Ytcblx0XHRpZiAoZGF0YS5HVUlEIGluIHNlbGYuc2NlbmVzW2RhdGEuc2NlbmVdLmFjdG9ycyl7XG5cdFx0XHQvL2NvbnNvbGUubG9nKFwiYWN0b3IgYWxyZWFkeSBleGlzdCwgZmlyc3QgY29tZXI/XCIpXG5cdFx0fWVsc2V7XG5cdFx0XHRzZWxmLnNjZW5lc1tkYXRhLnNjZW5lXS5qb2luX2FjdG9yKGRhdGEpO1xuXHRcdH1cblx0fSlcblx0dGhpcy5zb2NrZXQub24oJ3NjZW5lX3N5bmMnLCBmdW5jdGlvbihkYXRhKXtcblx0XHRcblx0XHQvLyBjb25zb2xlLmxvZyhkYXRhLmFsbWFuYWNoKTtcblx0XHRpZihzZWxmLnNjZW5lc1tkYXRhLnNjZW5lXSAhPT0gdW5kZWZpbmVkKXtcblx0XHRcdHNlbGYuc2NlbmVzW2RhdGEuc2NlbmVdLnN5bmMoZGF0YS5hbG1hbmFjaCk7XG5cdFx0fVxuXHR9KVxuXHR0aGlzLnNvY2tldC5vbigncGxheWVyLWlucHV0cycsIGZ1bmN0aW9uKGRhdGEpe1xuXHRcdGNvbnNvbGUubG9nKFwiUlJcIiwgZGF0YSk7XG5cdFx0c2VsZi5zY2VuZXNbZGF0YS5zXS5hZGROZXR3b3JrTWVzc2FnZShkYXRhLmEpO1xuXHR9KVxuICAgICovXG5cdFxuXG5cdFxufVxuXG53aW5kb3cuV29ybGQuc3luY1RpbWUgPSBmdW5jdGlvbigpe1xuXHR0aGlzLl9zeW5jX3RpbWVzdGFtcCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXHR2YXIgc2VsZiA9IHRoaXM7XG5cdC8vIHZhciBBY3Rpb25zID0gdGhpcy5wcm90b2J1ZkJ1aWxkZXIuYnVpbGQoXCJBY3Rpb25zXCIpO1xuXHRcblx0dmFyIG1lc3NhZ2VzID0ge307XG5cdHZhciBkaWZmX3N0YXRpc3RpY3NfbGVuZ3RoID0gNTBcblxuXHQvLyBjb25zb2xlLmxvZyhcIlJVTiBTWU5DXCIpO1xuICAgIHRoaXMuc29ja2V0X3Nydi5zeW5jKCkudGhlbihmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcIlNTXCIsIGRhdGEpO1xuXHRcdHZhciByZWN2X3RzID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cdFx0dmFyIHBpbmcgPSByZWN2X3RzIC0gc2VsZi5fc3luY190aW1lc3RhbXBcbiAgICAgICAgXG4gICAgICAgIFxuXG5cdFx0c2VsZi5sYXRlbmNpdGllcy5wdXNoKHBpbmcvMik7XG5cdFx0XG5cdFx0c2VsZi5hdmdfbGF0ZW5jaXR5ID0gTWF0aC5mbG9vcihfLnJlZHVjZShzZWxmLmxhdGVuY2l0aWVzLCBmdW5jdGlvbihhLGIpe3JldHVybiBhK2J9LDApL3NlbGYubGF0ZW5jaXRpZXMubGVuZ3RoKVxuICAgICAgICBcblx0XHR2YXIgX3RpbWVfZGlmZiA9IGRhdGEudHMgLSBzZWxmLl9zeW5jX3RpbWVzdGFtcDsgLy8gLSBsYXRcblx0XHRzZWxmLl90aW1lX2RpZmZzLnB1c2goX3RpbWVfZGlmZilcblx0XHRpZihzZWxmLl90aW1lX2RpZmZzLmxlbmd0aCA+IGRpZmZfc3RhdGlzdGljc19sZW5ndGgpe3NlbGYuX3RpbWVfZGlmZnMuc3BsaWNlKDAsMSkgfVxuXHRcdHNlbGYuX3RpbWVfZGlmZiA9IE1hdGguZmxvb3IoXy5yZWR1Y2Uoc2VsZi5fdGltZV9kaWZmcywgZnVuY3Rpb24oYSxiKXtyZXR1cm4gYStifSwwKS9zZWxmLl90aW1lX2RpZmZzLmxlbmd0aClcblxuXHRcdHNlbGYubWF4X3BpbmcgPSBfLm1heChzZWxmLnBpbmdzKTtcblxuXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiVE9cIik7XG4gICAgICAgICAgICBzZWxmLnN5bmNUaW1lKClcbiAgICAgICAgfSwgMTAwMCk7XG4gICAgICAgIFxuICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycil7XG4gICAgICAgIGNvbnNvbGUubG9nKGVyci5zdGFjayk7XG4gICAgfSlcblx0XG5cdC8vY29uc29sZS5sb2coXCI+Pj4+XCIsIHRoaXMuc29ja2V0LmVtaXQpO1xuICAgIC8qXG5cdHZhciBkaWZmX3N0YXRpc3RpY3NfbGVuZ3RoID0gNTBcblx0aWYoISB0aGlzLl9zeW5jX21lc3NhZ2Vfc2V0dXAgKXtcblx0XHR0aGlzLnNvY2tldC5vbihcImNsb2NrX3Jlc3BvbnNlXCIsIGZ1bmN0aW9uKGRhdGEpe1xuXHRcdFx0dmFyIHJlY3ZfdHMgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblx0XHRcdHZhciBwaW5nID0gcmVjdl90cyAtIHNlbGYuX3N5bmNfdGltZXN0YW1wXG5cdFx0XHRcblx0XHRcdHNlbGYucGluZ3MucHVzaChwaW5nKVxuXHRcdFx0XG5cdFx0XHQvL2lmIChzZWxmLnBpbmdzLmxlbmd0aCA+IHBpbmdfc3RhdGlzdGljc19sZW5ndGggKXtzZWxmLnBpbmdzLnNwbGljZSgwLDEpfTtcblx0XHRcdC8vdmFyIGF2Z19waW5nID0gXy5yZWR1Y2Uoc2VsZi5waW5ncywgZnVuY3Rpb24oYSxiKXtyZXR1cm4gYStifSwwKS8gc2VsZi5waW5ncy5sZW5ndGg7XG5cdFx0XHQvL3NlbGYucGluZ3NfaW5zdGFiaWxpdHkucHVzaChNYXRoLmFicyhhdmdfcGluZyAtIHBpbmcpKVxuXHRcdFx0Ly9pZiAoc2VsZi5waW5nc19pbnN0YWJpbGl0eS5sZW5ndGggPiBwaW5nX3N0YXRpc3RpY3NfbGVuZ3RoKXtzZWxmLnBpbmdzX2luc3RhYmlsaXR5LnNwbGljZSgwLDEpfTtcblx0XHRcdC8vdmFyIGF2Z19waW5nX2luc3RhYiA9IF8ucmVkdWNlKHNlbGYucGluZ3NfaW5zdGFiaWxpdHksIGZ1bmN0aW9uKGEsYil7cmV0dXJuIGE+PWI/YTpifSwwKVxuXHRcdFx0XG5cdFx0XHR2YXIgbGF0ID0gcGluZyAvIDJcblx0XHRcdHZhciBfdGltZV9kaWZmID0gZGF0YS50cyAtIHNlbGYuX3N5bmNfdGltZXN0YW1wIC0gbGF0XG5cdFx0XHRzZWxmLl90aW1lX2RpZmZzLnB1c2goX3RpbWVfZGlmZilcblx0XHRcdGlmKHNlbGYuX3RpbWVfZGlmZnMubGVuZ3RoID4gZGlmZl9zdGF0aXN0aWNzX2xlbmd0aCl7c2VsZi5fdGltZV9kaWZmcy5zcGxpY2UoMCwxKSB9XG5cdFx0XHRzZWxmLl90aW1lX2RpZmYgPSBNYXRoLmZsb29yKF8ucmVkdWNlKHNlbGYuX3RpbWVfZGlmZnMsIGZ1bmN0aW9uKGEsYil7cmV0dXJuIGErYn0sMCkvc2VsZi5fdGltZV9kaWZmcy5sZW5ndGgpXG5cdFx0XHQvL2lmKHNlbGYuX3RpbWVfZGlmZiA8IDApe1xuXHRcdFx0Ly9cdHNlbGYuX3RpbWVfZGlmZiA9IDA7XG5cdFx0XHQvL31cblx0XHRcdC8vIHNlbGYuYXZlcmFnZV9waW5nX2luc3RhYmlsaXR5ID0gYXZnX3BpbmdfaW5zdGFiO1xuXHRcdFx0c2VsZi5tYXhfcGluZyA9IF8ubWF4KHNlbGYucGluZ3MpXG5cdFx0XHRcblx0XHRcdC8vIGNvbnNvbGUubG9nKFwiVFwiLCBzZWxmLl90aW1lX2RpZmYpXG5cdFx0XHQvL2NvbnNvbGUubG9nKFwiVElNRVNcIiwgc2VsZi5fdGltZV9kaWZmLCBkYXRhLnRzIC0gc2VsZi5fc3luY190aW1lc3RhbXAsIGxhdClcblx0XHRcdFxuXHRcdFx0Ly8gdmFyIHRvID0gMTAwIC8gKGF2Z19waW5nLzEwMDApXG5cdFx0XHQvLyB2YXIgaW5zdGFiX3BlciAgPSAgYXZnX3BpbmdfaW5zdGFiIC8gYXZnX3BpbmcgKiAxMDA7XG5cdFx0XHQvL2NvbnNvbGUubG9nKFwiSU5TVFZcIix0bywgYXZnX3BpbmcsIGF2Z19waW5nX2luc3RhYiwgaW5zdGFiX3Blcik7XG5cdFx0XHRcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtzZWxmLnN5bmNUaW1lKCl9LCAxMDAwKTtcblx0XHRcdFxuXHRcdH0pXG5cdFx0dGhpcy5fc3luY19tZXNzYWdlX3NldHVwID0gdHJ1ZVxuXHRcdFxuXHR9XG4gICAgKi9cbn07XG5cbndpbmRvdy5Xb3JsZC5zZW5kQWN0aW9uPWZ1bmN0aW9uKHNjZW5lLCBhY3Rpb24pe1xuXHR2YXIgYWN0ID0gXy5jbG9uZShhY3Rpb24pXG5cdGFjdC50cyArPSB0aGlzLl90aW1lX2RpZmY7IFxuXHRhY3QucCA9IEpTT04uc3RyaW5naWZ5KGFjdC5wKTtcblxuXHRcblx0ZGVsZXRlIGFjdC52ZWN0b3I7XG5cblx0dGhpcy5zb2NrZXRfc3J2LmFjdGlvbih7czpzY2VuZSxhOmFjdH0pXG59OyIsImZ1bmN0aW9uIFN0YXRpY0xvZ2dlcigpe1xuXHR0aGlzLl92YWxzID0ge31cblx0dGhpcy5zZXRWYWx1ZSA9IGZ1bmN0aW9uKHBhcmFtLCB2YWwpe1xuXHRcdC8vIGNvbnNvbGUubG9nKHBhcmFtLCB2YWwpO1xuXHRcdHRoaXMuX3ZhbHNbcGFyYW1dID0gdmFsO1xuXHR9XG5cdHRoaXMuaW5pdCA9IGZ1bmN0aW9uKCl7XG5cdFx0dGhpcy5jb250ID0gJChcIjxkaXY+XCIpLmNzcyh7XG5cdFx0XHQncG9zaXRpb24nOidmaXhlZCcsXG5cdFx0XHQndG9wJzowLFxuXHRcdFx0J3JpZ2h0JzowLFxuXHRcdFx0J3dpZHRoJzo0MDAsXG5cdFx0XHQnYm90dG9tJzowLFxuXHRcdFx0J2JhY2tncm91bmQtY29sb3InOlwicmdiYSgwLDIwMCwxMDAsMC43KVwiXG5cdFx0fSkuYXBwZW5kVG8oJ2JvZHknKTtcblx0Ly8gXHRjb25zb2xlLmxvZyh0aGlzLmNvbnQpO1xuXHRcdFxuXHR9XG5cdHRoaXMucmVkcmF3ID0gZnVuY3Rpb24oKXtcblx0XHR0aGlzLmNvbnQuZmluZCgnKicpLnJlbW92ZSgpO1xuXHRcdC8vY29uc29sZS5sb2codGhpcy5fdmFscyk7XG5cdFx0Zm9yKHZhciBpIGluIHRoaXMuX3ZhbHMpe1xuXHRcdFx0Ly9jb25zb2xlLmxvZygnYXNkYScpO1xuXHRcdFx0YyA9ICQoJzxkaXY+JykuYXBwZW5kVG8odGhpcy5jb250KVxuXHRcdFx0bCA9ICQoJzxzcGFuPicpLmh0bWwoaSArIFwiJm5ic3A7OiAmbmJzcDtcIikuY3NzKCdmb250LXdlaWdodCcsJ2JvbGQnKS5hcHBlbmRUbyhjKTtcblx0XHRcdHYgPSAkKCc8c3Bhbj4nKS50ZXh0KCB0aGlzLl92YWxzW2ldICkuYXBwZW5kVG8oYyk7XG5cdFx0fVxuXHR9XG59XG5cbnZhciBTTCA9IG5ldyBTdGF0aWNMb2dnZXIoKTsiLCJ3aW5kb3cuV29ybGQuYWRkVW5pZm9ybVVwZGF0ZXIgPSBmdW5jdGlvbihuYW1lLCB1cGRmdW5jKXtcbiAgICB0aGlzLl91bmlmb3JtX3VwZGF0ZXJzW25hbWVdID0gdXBkZnVuYztcbn1cbndpbmRvdy5Xb3JsZC5yZW1vdmVVbmlmb3JtVXBkYXRlciA9IGZ1bmN0aW9uKG5hbWUpe1xuICAgIGRlbGV0ZSB0aGlzLl91bmlmb3JtX3VwZGF0ZXJzW25hbWVdO1xufVxuXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=